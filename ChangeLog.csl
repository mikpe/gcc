2014-10-07  James Lemke  <jwlemke@codesourcery.com>

	gcc/config/hexagon/
	* hexagon.c (hexagon_pull_up_insns): Conditionalize dump output.

2014-10-07  James Lemke  <jwlemke@codesourcery.com>

	Issue 16563

	* release-notes-csl.xml: New note.

	gcc/config/hexagon/
	* hexagon.c (hwloop_optimize): Remove iter_init_is_combine.
	Add dump info.
	Check for a combine insn clobbering the iter-count source it uses.
	(hexagon_expand_prologue): Move declaration.
	(hexagon_predicate_dot_newable_p): Mark unused parm.
	(hexagon_pack_insns): Add dump info.
	(hexagon_pull_up_insns): Ditto

2014-10-07  James Lemke  <jwlemke@codesourcery.com>

	gcc/config/hexagon/
	* hexagon.c (hexagon_absolute_with_scaled_reg_address):
	Remove temporary instrumentation from 2014-09-10.

2014-09-22  James Lemke  <jwlemke@codesourcery.com>

	Issue 16620

	gcc/config/hexagon/
	*hexagon.c (hexagon_can_be_new_value_jump_p):
	Disallow an FP producer with a new value jump consumer.

2014-09-10  James Lemke  <jwlemke@codesourcery.com>

	gcc/config/hexagon/
	* hexagon.c (hexagon_absolute_with_scaled_reg_address):
	Fix two typos.

2014-09-10  James Lemke  <jwlemke@codesourcery.com>

	Issue 16026
	These changes are for a preview release for customer experiments.
	We intend to remove them before the next update release.

	gcc/config/hexagon/
	* hexagon.c (hexagon_absolute_with_scaled_reg_address):
	Add instrumentation to help debug this problem.

2014-08-27  James Lemke  <jwlemke@codesourcery.com>

	Issue 15858

	* release-notes-csl.xml: New note.

	gcc/config/hexagon/
	* hexagon.h (HEXAGON_ARCH_TABLE_DEFAULT_INDEX): For Linux use V5.

2014-08-13  James Lemke  <jwlemke@codesourcery.com>

	Issue 16006

	* release-notes-csl.xml: New note.

	gcc/config/hexagon/
	* hexagon.c (hexagon_move_insn_up_p): Add checking for a memory output
	dependency.

2014-05-06  Andrew Stubbs  <ams@codesourcery.com>

	Issue 16135:

	* release-notes-csl.xml: New note.

	gcc/
	* config/hexagon/hexagon.c (hexagon_expand_prologue): Set
	RTX_FRAME_RELATED_P on all parts of a prologue function pattern.

2014-04-29  James Lemke  <jwlemke@codesourcery.com>

	Issue 16086

	* release-notes-csl.xml: New note.

	gcc/config/hexagon/
	* hexagon.c (hexagon_get_source_packet): Exclude XFLOAT insns that
	create an SI value.

2014-03-27  James Lemke  <jwlemke@codesourcery.com>

	Issue 15954

	* release-notes-csl.xml: New note.

	Backport from FSF:
	2011-12-21  Richard Guenther  <rguenther@suse.de>

	PR lto/41159
	* tree-outof-ssa.c (insert_value_copy_on_edge): Use the
	mode of the pseudo as destination mode.  Only assert that
	is equal to the promoted mode of the decl if it is a REG.

2014-03-26  James Lemke  <jwlemke@codesourcery.com>

	Issue 16026
	Add temporary instrumentation for a preview release.

	gcc/config/hexagon/
	* hexagon.c (hexagon_absolute_with_scaled_reg_address_p): Add dump info.

2014-03-24  James Lemke  <jwlemke@codesourcery.com>

	Issue 15828

	* release-notes-csl.xml: New note.

	gcc/
	* genautomata.c (output_max_insn_queue_index_def): Increase minimum
	value from 1 to 3.

2014-03-13  James Lemke  <jwlemke@codesourcery.com>

	Issue 15805, 16132

	* release-notes-csl.xml: New note.

	Backport from FSF:

	2013-04-02  Jakub Jelinek  <jakub@redhat.com>

	PR rtl-optimization/56745
	gcc/
	* ifcvt.c (cond_exec_find_if_block): Don't try to optimize
	if then_bb has no successors and else_bb is EXIT_BLOCK_PTR.

	gcc/testsuite/gcc.c-torture/compile/
	* pr56745.c: New test.

2014-03-10  James Lemke  <jwlemke@codesourcery.com>

	Issue 15711

	* release-notes-csl.xml: New note.

	gcc/config/hexagon/
	* hexagon.c (hwloop_optimize): Change gcc_assert to a conditional.

2014-02-27  James Lemke  <jwlemke@codesourcery.com>

	Issues 15728 15820

	* release-notes-csl.xml: New note.

	gcc/
	* hw-doloop.h (opt): Add parameter: loops.
	* hw-doloop.c (optimize_loop): Add parameter: loops.  Pass to opt().

	gcc/config/hexagon/
	* hexagon.c (salc_used): New function.
	(hwloop_optimize): Add parameter: loops.  Use new function.

2014-02-26  James Lemke  <jwlemke@codesourcery.com>

	Issue 16027

	* release-notes-csl.xml: New note.

	gcc/config/hexagon/
	* hexagon.md (cond_return): Restrict to use without a frame.
	(cond_dealloc_return): Cosmetic change to match 5.0 changes.
	(deallocframe_return): Likewise.
	(deallocframe_function): Likewise.

2014-02-13  James Lemke  <jwlemke@codesourcery.com>

	Issue 15983 (PCR 07)

	* release-notes-csl.xml: New note.

	gcc/config/hexagon/
	* lib1funcs.asm
	(restore_r16_through_r17_and_deallocframe): Don't use dealloc_return.
	(__deallocframe): Likewise.
	* hexagon.c (TARGET_DEFAULT_TARGET_FLAGS): Set MASK_DEALLOC_RETURN.
	* hexagon.md (return): Use TARGET_DEALLOC_RETURN as a condition.
	(cond_return): Likewise.
	(cond_dealloc_return): Likewise.
	(deallocframe_return): Likewise.
	(deallocframe_function): Likewise.
	* hexagon.opt (mdealloc_return): Added.
	* elf.h (ASM_SPEC): Pass mno-dealloc_return.

2014-01-15  James Lemke  <jwlemke@codesourcery.com>

	Issue 15774

	* release-notes-csl.xml: New note.

	Revert (r168661):
	2011-01-11  Richard Guenther  <rguenther@suse.de>

	PR tree-optimization/47239
	* tree-ssa-ccp.c (get_value_from_alignment): Punt for FUNCTION_DECLs.

	Port from upstream (r172424):
	2011-04-14  Richard Guenther  <rguenther@suse.de>

	* tree.h (get_object_alignment_1): Declare.
	* builtins.c (get_object_alignment_1): Split out worker from ...
	(get_object_alignment): ... here.
	* fold-const.c (get_pointer_modulus_and_residue): Use
	get_object_alignment_1.

	2011-04-14  Richard Guenther  <rguenther@suse.de>

	* gcc.dg/fold-bitand-4.c: Move ...
	* c-c++-common/fold-bitand-4.c: ... here.  Adjust slightly.

	Port from upstream (r175348):
	2011-06-23  Jakub Jelinek  <jakub@redhat.com>

	* tree-vect-data-refs.c (vect_compute_data_ref_alignment): Use
	get_pointer_alignment to see if base isn't sufficiently aligned.

	Port from upstream (r175703):
	2011-06-30  Martin Jambor  <mjambor@suse.cz>

	PR tree-optimization/49094
	* tree-sra.c (tree_non_mode_aligned_mem_p): New function.
	(build_accesses_from_assign): Use it.

	2011-06-30  Martin Jambor  <mjambor@suse.cz>

	PR tree-optimization/49094
	* gcc.dg/tree-ssa/pr49094.c: New test.

	Port from upstream (r176969):
	2011-07-31  Tom de Vries  <tom@codesourcery.com>

	PR middle-end/43513
	* tree-ssa-loop-ivopts.c (may_be_unaligned_p): Use max of
	get_object_alignment and TYPE_ALIGN.

	Port from upstream (r177572):
	2011-08-08  Martin Jambor  <mjambor@suse.cz>

	PR middle-end/49923
	* tree-sra.c (access_precludes_ipa_sra_p): Also check access
	memory alignment.

	2011-08-08  Martin Jambor  <mjambor@suse.cz>

	PR middle-end/49923
	* gcc.dg/tree-ssa/pr49923.c: New test.

	Port from upstream (r177615):
	2011-08-10  Richard Guenther  <rguenther@suse.de>

	PR tree-optimization/49937
	* tree-ssa-ccp.c (get_value_from_alignment): Re-implement
	using get_object_alignment_1.

	Port from upstream (r177620):
	2011-08-10  Richard Guenther  <rguenther@suse.de>

	* tree.h (get_pointer_alignment): Remove max-align argument.
	(get_object_alignment): Likewise.
	* builtins.c (get_object_alignment_1): Adjust.
	(get_object_alignment): Remove max-align argument.
	(get_pointer_alignment): Likewise.
	(expand_builtin_strlen): Adjust.
	(expand_builtin_memcpy): Likewise.
	(expand_builtin_mempcpy_args): Likewise.
	(expand_builtin_strncpy): Likewise.
	(expand_builtin_memset_args): Likewise.
	(expand_builtin_memcmp): Likewise.
	(expand_builtin_strcmp): Likewise.
	(expand_builtin_strncmp): Likewise.
	(get_builtin_sync_mem): Likewise.
	(fold_builtin_memset): Likewise.
	(fold_builtin_memory_op): Likewise.
	(expand_builtin_memory_chk): Likewise.
	* emit-rtl.c (get_mem_align_offset): Likewise.
	(set_mem_attributes_minus_bitpos): Likewise.
	* expr.c (expand_assignment): Likewise.
	(expand_expr_real_1): Likewise.
	* tree-sra.c (tree_non_mode_aligned_mem_p): Likewise.
	* tree-ssa-forwprop.c (simplify_builtin_call): Likewise.
	* tree-ssa-loop-ivopts.c (may_be_unaligned_p): Likewise.
	* tree-vect-data-refs.c (vect_compute_data_ref_alignment): Likewise.
	* value-prof.c (gimple_stringops_transform): Likewise.

	Local fix to sync with above:
	* gcc/emit-rtl.c (set_mem_attributes_minus_bitpos):
	Remove 2nd parm from get_object_alignment().

2014-01-10  James Lemke  <jwlemke@codesourcery.com>

	Revert:
	2014-01-06  James Lemke  <jwlemke@codesourcery.com>

	Issue 15774

	Backport part of a fix from FSF GCC.

	2012-11-30  Martin Jambor  <mjambor@suse.cz>

	* tree-sra.c (access_precludes_ipa_sra_p): New parameter req_align,
	added check for required alignment.  Update the callers.

	gcc/testsuite/gcc.dg/ipa/
	* ipa-sra-2.c: Skip for hexagon (strict-alignment) targets.
	* ipa-sra-6.c: Likewise.

	2013-12-18  James Lemke  <jwlemke@codesourcery.com>

	Issue 15774

	* release-notes-csl.xml: New note.

	Backport these patches & their follow-ups from FSF GCC 4.6 branch:

	2011-10-20  Uros Bizjak  <ubizjak@gmail.com>

	gcc/testsuite/gcc.dg/ipa/
	* ipa-sra-2.c: Add dg-require-effective-target non_strict_align.
	* gcc.dg/ipa/ipa-sra-6.c: Ditto.

	2011-08-09  Martin Jambor  <mjambor@suse.cz>

	PR middle-end/49923
	gcc/
	* tree-sra.c (access_precludes_ipa_sra_p): Also check access
	memory alignment.

	gcc/testsuite/gcc.dg/tree-ssa/
	* pr49923.c: New test.

	2011-06-30  Martin Jambor  <mjambor@suse.cz>

	PR tree-optimization/49094
	gcc/
	* tree-sra.c (tree_non_mode_aligned_mem_p): New function.
	(build_accesses_from_assign): Use it.

	gcc/testsuite/gcc.dg/tree-ssa/
	* pr49094.c: New test.

2014-01-06  James Lemke  <jwlemke@codesourcery.com>

	Issue 15774

	Backport part of a fix from FSF GCC.

	2012-11-30  Martin Jambor  <mjambor@suse.cz>

	* tree-sra.c (access_precludes_ipa_sra_p): New parameter req_align,
	added check for required alignment.  Update the callers.

	gcc/testsuite/gcc.dg/ipa/
	* ipa-sra-2.c: Skip for hexagon (strict-alignment) targets.
	* ipa-sra-6.c: Likewise.

2013-12-18  James Lemke  <jwlemke@codesourcery.com>

	Issue 15774

	* release-notes-csl.xml: New note.

	Backport these patches & their follow-ups from FSF GCC 4.6 branch:

	2011-10-20  Uros Bizjak  <ubizjak@gmail.com>

	gcc/testsuite/gcc.dg/ipa/
	* ipa-sra-2.c: Add dg-require-effective-target non_strict_align.
	* gcc.dg/ipa/ipa-sra-6.c: Ditto.

	2011-08-09  Martin Jambor  <mjambor@suse.cz>

	PR middle-end/49923
	gcc/
	* tree-sra.c (access_precludes_ipa_sra_p): Also check access
	memory alignment.

	gcc/testsuite/gcc.dg/tree-ssa/
	* pr49923.c: New test.

	2011-06-30  Martin Jambor  <mjambor@suse.cz>

	PR tree-optimization/49094
	gcc/
	* tree-sra.c (tree_non_mode_aligned_mem_p): New function.
	(build_accesses_from_assign): Use it.

	gcc/testsuite/gcc.dg/tree-ssa/
	* pr49094.c: New test.

2013-10-13  James Lemke  <jwlemke@codesourcery.com>

	Issue 15473

	* release-notes-csl.xml: New note.

	gcc/config/hexagon/
	* hexagon.c (hexagon_cannot_copy_insn_p): Add loop0_v4, loop1_v4.
	* hexagon.md
	(loop0_v4): New
	(loop0): Add a condition.
	(loop1_v4): New
	(loop1): Add a condition.

2013-09-20  James Lemke  <jwlemke@codesourcery.com>

	Issue 15451

	* release-notes-csl.xml: New note.

	gcc/config/hexagon/
	* hexagon.md (deallocframe_return): Change the condition to
	hexagon_direct_return().
	* hexagon.c
	(hexagon_asm_function_prologue): Add pretend-args size to the dump and
	correct the indentation.
	(hexagon_direct_return): Return false for a varargs function.

2013-08-29  James Lemke  <jwlemke@codesourcery.com>

	gcc/testsuite/lib/
	* gcc-defs.exp (dg-additional-files-options): Extend regsub for
	dg-additional-files to also match BOL.

2013-08-20  James Lemke  <jwlemke@codesourcery.com>

	Issue 15218

	* release-notes-csl.xml (Missing debug info): New note.

	gcc/
	configure.ac (dwarf2 debug_line): Add a match for hexagon.
	configure: Regenerate

2013-07-17  Chung-Lin Tang  <cltang@codesourcery.com>

	Issue #15107

	* release-notes-csl.xml (Loop optimization fix): New note.

	gcc/
	* hw-doloop.c (discover_loop): Set loop->bad = true when
	adding forwarder block still does not allow successful
	processing of incoming edges.

2013-05-01  Julian Brown  <julian@codesourcery.com>

	Issue #14738

	* release-notes-csl.xml (Optimizer bug fix): New note.

	gcc/
	* gcse.c (compute_ld_motion_mems): Invalidate non-simple mem refs
	in REG_EQUAL notes.

	gcc/testsuite/
	* gcc.target/hexagon/gcse-pre-1.c: New test.

2013-04-19  James Lemke  <jwlemke@codesourcery.com>

	Issue #14410
	Restore my v4-as-default changes from 2013-02-20.

	* release-notes-csl.xml (Support for Hexagon architectures): New

	gcc/config/hexagon/
	* hexagon.c(hexagon_override_options): Change supported archs.
	* hexagon.h(HEXAGON_ARCH_TABLE_DEFAULT_INDEX): Change to V4.
	* t-linux: Remove v2 & v3 multilibs.
	* t-hexagon: Likewise.
	* linux.h: Likewise.
	* hexagon.opt(march): Change default.
	(mv1, mv2, mv3): Remove.
	(mabi): Change default.
	(G): Fix a typo.

2013-04-01  James Lemke  <jwlemke@codesourcery.com>

	* Temporarily revert the changes for -mv4 as default (2013-02-20 below).

2013-03-27  Joe Seymour  <jseymour@codesourcery.com>

	Issue #14649

	* release-notes-csl.xml (Stack corruption bug): New note.

	gcc/
	* config/hexagon/hexagon.c (hexagon_make_prologue_epilogue_decisions)
	(hexagon_expand_epilogue): Never use dealloc_return.

2013-03-01  Joe Seymour  <jseymour@codesourcery.com>

	Issue #14574

	* release-notes-csl.xml (Hexagon V55 support in QDSP6
	compatibility mode): New note.

	gcc/
	* config/hexagon/hexagon.h (QDSP6_COMPAT_MACROS): Add case for V55.

2013-02-20  James Lemke  <jwlemke@codesourcery.com>

	Issue #14410

	* release-notes-csl.xml (Support for Hexagon architectures): New

	gcc/config/hexagon/
	* hexagon.c(hexagon_override_options): Change supported archs.
	* hexagon.h(HEXAGON_ARCH_TABLE_DEFAULT_INDEX): Change to V4.
	* t-linux: Remove v2 & v3 multilibs.
	* t-hexagon: Likewise.
	* linux.h: Likewise.
	* hexagon.opt(march): Change default.
	(mv1, mv2, mv3): Remove.
	(mabi): Change default.
	(G): Fix a typo.

2013-02-11  James Lemke  <jwlemke@codesourcery.com>

	Issue #14351

	gcc/config/hexagon/
	* hexagon.c
	(hexagon_expand_prologue): Restore declaration of regno.
	(hexagon_get_flags): Minor logic simplification.
	(hexagon_get_insn_info): Likewise.
	(hexagon_local_combine_immediate_pass): Likewise.
	(hexagon_pack_insns): Likewise & fix some indentation.
	(hexagon_bb_real_head_insn): Ignore debug insns.
	(hexagon_bb_real_end_insn): Likewise.

2013-02-04  James Lemke  <jwlemke@codesourcery.com>

	Issue #14351

	* release-notes-csl.xml: Add note.

	gcc/config/hexagon/
	* hexagon.c
	(sdata_symbolic_operand_size): Remove never-true if statement.
	(hexagon_machine_dependant_reorg): Call variable_tracking_main().
	(hexagon_initialize_trampoline): Remove unused var.
	(hexagon_expand_prologue): Remove unused var.
	(hexagon_loop0_insn): Remove unused function.
	(hexagon_get_flags): Ignore debug insns.
	(hexagon_get_insn_info): Likewise.
	(hexagon_pack_insns): Likewise.
	(hexagon_local_combine_immediate_pass): Likewise & fix indentation.
	(TARGET_DELAY_SCHED2): Define.
	(TARGET_DELAY_VARTRACK): Define.

2012-12-18  Julian Brown  <julian@codesourcery.com>

	Issue #13895

	* release-notes-csl.xml (Hexagon V55 preprocessor macros): Add note.

	gcc/
	* config/hexagon/hexagon.h (TARGET_CPU_CPP_BUILTINS): Don't define
	__HEXAGON_V5__. Change __HEXAGON_ARCH__ to 55.

2012-12-07  James Lemke  <jwlemke@codesourcery.com>

	Issue #13058

	gcc/testsuite/
	* gcc.c-torture/execute/pr31448.x: Specify -fsigned-bitfields.
	* gcc.c-torture/execute/991118-1.x: Likewise.
	* gcc.c-torture/execute/pr48973-1.x: Likewise.
	* gcc.c-torture/execute/bitfld-4.x: Likewise.
	* gcc.c-torture/execute/pr49123.x: Likewise.
	* gcc.c-torture/execute/pr19689.x: Likewise.
	* gcc.c-torture/execute/bf64-1.x: Likewise.
	* gcc.c-torture/execute/pr31448-2.x: Likewise.
	* gcc.c-torture/execute/pr48973-2.x: Likewise.
	* gcc.dg/20040331-1.c: Likewise.
	* gcc.dg/bitfld-3.c: Likewise.
	* gcc.dg/pr35635.c: Likewise.
	* gcc.dg/tree-ssa/20030731-1.c: Likewise.
	* g++.dg/warn/overflow-warn-1.C: Likewise.
	* g++.dg/warn/pr35635.C: Likewise.
	* g++.dg/warn/overflow-warn-3.C: Likewise.
	* g++.dg/warn/overflow-warn-4.C: Likewise.
	* g++.dg/cpp0x/constexpr-bitfield3.C: Likewise.
	* g++.dg/cpp0x/decltype4.C: Likewise.
	* g++.dg/torture/pr37146-1.C: Likewise.

2012-11-30  James Lemke  <jwlemke@codesourcery.com>

	Issue #14095

	* release-notes-csl.xml (Corrected loop initialization):
	Add note.

	gcc/
	* config/hexagon/hexagon.c (hwloop_optimize):
	New conditions abort the search for a set of the iter reg.
	No longer remove a set of the iter reg.

2012-11-30  James Lemke  <jwlemke@codesourcery.com>

	Issue #14094

	* release-notes-csl.xml (Internal compiler error with jumps):
	Add note.

	gcc/
	* config/hexagon/predicates.md (gr_reg_or_memory_operand): New.
	* config/hexagon/hexagon.md (doloop_end_internal): Use new predicate.

2012-11-29  Julian Brown  <julian@codesourcery.com>

	Issue #13895

	* release-notes-csl.xml (Hexagon V55 support): Add release note.

	gcc/
	* config/hexagon/hexagon.h (TARGET_CPU_CPP_BUILTINS): Add Hexagon
	V55 defines.
	(hexagon_architecture): Add HEXAGON_ARCH_V55.
	(HEXAGON_FEAT_V55): New macro.
	(TARGET_V55_FEATURES): New macro.
	(HEXAGON_ARCH_TABLE_INITIALIZER): Add hexagonv55.
	* config/hexagon/hexagon.md (arch): Add v55.
	* config/hexagon/hexagon-v5.md: Use for Hexagon V55.
	* config/hexagon/hexagon.opt (mv55): Add option.
	* config/hexagon/t-hexagon (MULTILIB_OPTIONS, MULTILIB_DIRNAMES):
	Add V55 multilibs.

2012-11-27  Julian Brown  <julian@codesourcery.com>

	Issue #14097

	* release-notes-csl.xml (Internal compiler error with intrinsics):
	Add note.

	gcc/
	* config/builtins.md (hexagon_builtin_HEXAGON_A2_addh_l16_ll)
	(hexagon_builtin_HEXAGON_A2_addh_l16_hl)
	(hexagon_builtin_HEXAGON_A2_subh_l16_ll)
	(hexagon_builtin_HEXAGON_A2_subh_l16_hl): Correct type of operands.

2012-11-15  Julian Brown  <julian@codesourcery.com>

	Issue #14110, #14123

	* release-notes-csl.xml (Double-precision float compatibility): Add
	note.

	gcc/
	* config/hexagon/builtins.def: Remove builtins for dfadd, dfsub,
	dfmpy, dffma*, dffms*, dfmin, dfmax, dffixup.
	* config/hexagon/builtins.md: Remove constants and patterns for
	same.
	* config/hexagon/hexagon.md (smaxdf3, smindf3, adddf3, subdf3):
	Remove patterns.
	(FPM): Remove mode iterator.
	(mul<mode>3): Remove, replace with...
	(mulsf3): This.
	(*muladd<mode>3): Remove, replace with...
	(*muladdsf3): This.
	(*mulsub<mode>3): Remove, replace with...
	(*mulsubsf3): This.
	* config/hexagon/hexagon.c (hexagon_fast_libfunc): Add v5 field.
	(hexagon_fast_libfuncs): Initialise v5 field.
	(hexagon_init_libfuncs): Init suitable libfuncs for
	double-precision floating point on Hexagon V5.
	(hexagon_rtx_costs): Update for V5 DF removal.

2012-11-09  Joe Seymour  <jseymour@codesourcery.com>

	Issue #13682
	* release-notes-csl.xml (Volatile memory accesses): New note.

2012-11-09  Joe Seymour  <jseymour@codesourcery.com>

	Issue #13682
	gcc/
	* config/hexagon/hexagon.opt (mpacketize_volatiles): Remove.
	* config/hexagon/hexagon.c (TARGET_PACKETIZE_VOLATILES): Remove.

2012-07-20  Tom de Vries  <tom@codesourcery.com>

	Issue #13679

	* release-notes-csl.xml (Internal compiler error with virtual
	functions): New note.

2012-07-19  Tom de Vries  <tom@codesourcery.com>

	Backport from FSF GCC 4.6 branch:

	2012-01-06  Richard Sandiford  <richard.sandiford@linaro.org>

	PR middle-end/48660
	gcc/
	* expr.h (copy_blkmode_to_reg): Declare.
	* expr.c (copy_blkmode_to_reg): New function.
	(expand_assignment): Don't expand register RESULT_DECLs before
	the lhs.  Use copy_blkmode_to_reg to copy BLKmode values into a
	RESULT_DECL register.
	(expand_expr_real_1): Handle BLKmode decls when looking for promotion.

	2012-01-06  Richard Sandiford  <richard.sandiford@linaro.org>

	PR middle-end/48660
	gcc/testsuite/
	* g++.dg/pr48660.C: New test.

2012-07-06  Joe Seymour  <jseymour@codesourcery.com>

	Issue #13577

	gcc/
	* release-notes-csl.xml (Missing register names fixed): New note.

2012-07-06  Joe Seymour  <jseymour@codesourcery.com>

	Issue #13577

	gcc/
	* config/hexagon/hexagon.h (FIRST_PSEUDO_REGISTER)
	(ARG_POINTER_REGNUM, FRAME_POINTER_REGNUM): Increment to make space for
	gp, cs0, cs1.
	(REG_CLASS_CONTENTS): Update masks.
	(FIXED_REGISTERS, CALL_USED_REGISTERS, REGNO_REG_CLASS)
	(REGISTER_NAMES): Add entries for gp, cs0, cs1.

2012-07-06  Tom de Vries  <tom@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.h (DWARF_ALT_FRAME_RETURN_COLUMN): Define.
	* config/hexagon/linux-unwind.h: Use DWARF_ALT_FRAME_RETURN_COLUMN for
	retaddr_column.  Save r31 in r31 column.  Save pc in
	DWARF_ALT_FRAME_RETURN_COLUMN.

2012-07-05  Joe Seymour  <jseymour@codesourcery.com>

	gcc/testsuite/
	* gcc.target/hexagon/sections-1.c: Disable for linux.
	* gcc.target/hexagon/sections-2.c: Disable for linux.
	* gcc.target/hexagon/sections-3.c: Disable for linux.
	* gcc.target/hexagon/sections-4.c: Disable for linux.
	* gcc.target/hexagon/sections-5.c: Disable for linux.

2012-06-28  Tom de Vries  <tom@codesourcery.com>

	gcc/
	* config/hexagon/linux-unwind.h (hexagon_fallback_frame_state): Set
	column for return address to pc instead or r31.

2012-06-28  Julian Brown  <julian@codesourcery.com>

	Issue #13555

	* release-notes-csl.xml (Stack-frame debug info fix): New note.

	gcc/
	* config/hexagon/hexagon.c (hexagon_address_adjacent_p): New.
	(hexagon_expand_prologue): Use store_pair RTL insn for pair stores
	in prologue.
	* config/hexagon/hexagon.md (store_pair): New.
	* config/hexagon/hexagon-protos.h (hexagon_address_adjacent_p): Add
	prototype.

2012-06-26  Joe Seymour  <jseymour@codesourcery.com>

	gcc/
	* config/hexagon/linux.h (GLIBC_DYNAMIC_LINKER): Set.
	(LINK_SPEC): Pass -dynamic-linker.

2012-06-26  Julian Brown  <julian@codesourcery.com>

	Issue #13555

	gcc/
	* config/hexagon/hexagon.c
	(hexagon_compute_dwarf_frame_information): Delete.
	(hexagon_asm_function_prologue): Don't call above.
	(hexagon_allocate_stack): Set RTX_FRAME_RELATED_P as appropriate.
	(hexagon_expand_prologue): Likewise.

2012-06-21  Tom de Vries  <tom@codesourcery.com>

	gcc/
	* config/hexagon/linux.h (SIZE_TYPE): Define as "unsigned int".

2012-06-14  Tom de Vries  <tom@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.c (hexagon_tls_symbol_p): Remove static
	prototype.  Add comment.  Remove static from definition.
	* config/hexagon/hexagon.md (long_call_value_pc_relative)
	(call_value_pc_relative, call_value_pc_relative_tls): Use
	hexagon_tls_symbol_p.
	* config/hexagon/hexagon-protos.h: Declare.

2012-06-14  Tom de Vries  <tom@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.c (hexagon_legitimize_address): Remove
	legitimize_tls_address call argument for reg parameter.
	(hexagon_tls_symbol, hexagon_tls_get_addr): Remove.
	(legitimize_tls_address): Remove reg parameter.  Correct type of
	variable model.  Remove outdated comments.  Handle non-PIC case for
	TLS_MODEL_GLOBAL_DYNAMIC and TLS_MODEL_LOCAL_DYNAMIC using
	_GLOBAL_OFFSET_TABLE_ reference.  Replace explicit calls to
	__tls_get_addr by calls to tls symbol.  Add REQ_EQUAL notes to calls.
	(hexagon_asm_external_libcall): New function.
	(TARGET_ASM_EXTERNAL_LIBCALL): Define to hexagon_asm_external_libcall.
	* config/hexagon/hexagon.md (UNSPEC_LD_TLS_INDEX): Define.
	(load_tls_hi, load_tls_lo): Use LDGOT for TLS_MODEL_LOCAL_DYNAMIC.
	(movesi, movsf): Remove legitimize_tls_address call argument for reg
	parameter.
	(long_call_value_pc_relative, call_value_pc_relative): Don't allow TLS
	references.
	(call_value_pc_relative_tls): New define_insn.
	* config/hexagon/hexagon-protos.h (legitimize_tls_address): Remove reg
	parameter from prototype.

2012-05-25  Sandra Loosemore <sandra@codesourcery.com>

	Issue #13455

	* release-notes-csl.xml (Duplicate .debug_line sections fixed):
	New note.

	gcc/
	* config/hexagon/linux.h (DWARF2_DEBUGGING_INFO): Don't define here.
	(DWARF2_ASM_LINE_DEBUG_INFO): Don't define here.
	(PREFERRED_DEBUGGING_TYPE): Don't define here.
	* config/hexagon/hexagon.h (DWARF2_ASM_LINE_DEBUG_INFO): Define here.
	(PREFERRED_DEBUGGING_TYPE): Define here.

2012-05-24  Tom de Vries  <tom@codesourcery.com>

	gcc/
	* config/hexagon/hexagon-protos.h (hexagon_trampoline_size): Declare.
	* config/hexagon/hexagon.c (hexagon_trampoline_template)
	(hexagon_initialize_trampoline, hexagon_trampoline_size): New function.
	(CXTSIZE, FUNSIZE, TRAMPOLINE_VAR_SIZE, TRAMPOLINE_CST_SIZE, CXTOFF)
	(FUNOFF): Define/undefine.
	(TARGET_TRAMPOLINE_INIT): Define as hexagon_initialize_trampoline.
	(TARGET_ASM_TRAMPOLINE_TEMPLATE) Define as hexagon_trampoline_template.
	(TARGET_ASM_FILE_END): Define as file_end_indicate_exec_stack.
	* config/hexagon/hexagon.h (EH_RETURN_STACKADJ_RTX): Define as r14.
	(STATIC_CHAIN_REGNUM): Define as r15.
	(TRAMPOLINE_SIZE): Set to hexagon_trampoline_size.
	* config/hexagon/hexagon.md (clean_cache): New insn.

	gcc/testsuite/
	* config/default.exp: Remove no_trampolines setting for hexagon target.

2012-05-23  Tom de Vries  <tom@codesourcery.com>

	gcc/
	* config/hexagon/lib1funcs.asm: Add GNU-stack note.

2012-05-21  Tom de Vries  <tom@codesourcery.com>

	gcc/
	* config.gcc (hexagon-*-linux*): Add t-slibgcc-libgcc to tmake_file.

2012-05-21  Tom de Vries  <tom@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.c (hexagon_array_alignment)
	(hexagon_constant_alignment): Don't decrease alignment.

2012-05-15  Joe Seymour  <jseymour@codesourcery.com>

	Revert:

	2012-05-15  Sandra Loosemore <sandra@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.c (hwloop_optimize): No scratch reg for
	out-of-range jump needed if TARGET_V4_FEATURES.  Don't emit
	unnecessary clobber in that case.
	* config/hexagon/hexagon.md (loop0, loop1): Restrict to pre-V4.
	(loop0_v4, loop1_v4): New patterns.
	(loop0_pic_v4, loop1_pic_v4): Remove clobber from pattern, and
	assert about requiring a scratch reg there.

2012-05-15  Joe Seymour  <jseymour@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.c (hexagon_expand_compare): Fix codes for
	LTGT.

2012-05-15  Sandra Loosemore <sandra@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.c (hwloop_optimize): No scratch reg for
	out-of-range jump needed if TARGET_V4_FEATURES.  Don't emit
	unnecessary clobber in that case.
	* config/hexagon/hexagon.md (loop0, loop1): Restrict to pre-V4.
	(loop0_v4, loop1_v4): New patterns.
	(loop0_pic_v4, loop1_pic_v4): Remove clobber from pattern, and
	assert about requiring a scratch reg there.

2012-05-15  Tom de Vries  <tom@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.c: Include gimple.h.
	(hexagon_frame_info): Remove static.
	(hexagon_setup_incoming_varargs): Add ATTRIBUTE_UNUSED to type and
	no_rtl parameters.
	(hexagon_gimplify_va_arg_expr): New function.
	(hexagon_function_arg_advance): Calculate named_arg_stack_words.
	(hexagon_setup_incoming_varargs): Do not save name arguments to stack.
	Set named_stack_words field.
	(hexagon_va_start): Set up va_list var with fields sav, sav_end and ovf.
	(hexagon_build_builtin_va_list): New function.
	(hexagon_expand_prologue): Save named args to stack, and guard with
	LINUX.
	(hexagon_expand_epilogue): Guard pretend_size handling with LINUX.
	(TARGET_GIMPLIFY_VA_ARG_EXPR): Define to hexagon_gimplify_va_arg_expr.
	(TARGET_BUILD_BUILTIN_VA_LIST): Define to hexagon_build_builtin_va_list.
	* config/hexagon/hexagon.h (hexagon_frame_info): Declare.
	(INIT_CUMULATIVE_ARGS): Set named_arg_stack_words field.
	(struct hexagon_frame_info): Add named_arg_stack_words and
	named_stack_words fields.

2012-05-15  Julian Brown  <julian@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.c (hexagon_option_default_params): Set
	max_completely_peeled_insns parameter.

2012-05-14  Sandra Loosemore <sandra@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.c (hexagon_dot_newify_gpr): Copy
	jump branch probability from original insn.
	(hexagon_dot_oldify_insn): Likewise.
	(hexagon_new_value_jump): Likewise.

2012-05-14  Joe Seymour  <jseymour@codesourcery.com>

	Issue #13231

	gcc/
	* release-notes-csl.xml (Compiler optimization improvements): Mention
	pow -> exp optimizations.

2012-05-14  Joe Seymour  <jseymour@codesourcery.com>

	Issue #13231

	gcc/
	* builtins.c (fold_builtin_pow): Optimize pow (2.0, x) and
	pow (10.0, x).
	(fold_builtin_exponent): Optimize calls to exp2 with integer arguments.
	* config/hexagon/dinkumware.h (TARGET_C99_FUNCTIONS): Define.
	* emit-rtl.c (dconst10): New real constant.
	* real.h (dconst10): New real constant.
	* target.def (TARGET_HAS_EXP10): New target hook.
	* doc/tm.texi (TARGET_HAS_EXP10): Document new hook.

	testsuite/
	* gcc.dg/torture/builtin-math-2.c: Change first argument of mpfr
	overflow tests to 3.0.
	* gcc.dg/torture/builtin-power-2.c: New test.
	
2012-05-11  Sandra Loosemore <sandra@codesourcery.com>

	* release-notes-csl.xml (Compiler optimization improvements): New.
	(Constant extenders): Merge into the new note.
	(FMA instructions): Likewise.
	(Comparison and loop improvements): Likewise.
	(Conditional sign extension): Likewise.
	(Addressing mode improvements): Likewise.
	(Memory operations): Likewise.

2012-05-11  Julian Brown  <julian@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.c (hexagon_expand_movmem_inline): Don't
	explicitly create hwloop RTXs.
	(hexagon_expand_setmem): Likewise.

2012-05-11  Julian Brown  <julian@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.md (addsi3_real_v4, subsi3_real_v4)
	(andsi3_real_v4, iorsi3_real_v4): Make conditional on TARGET_MEMOPS.
	(addsi3_nomemops_v4, subsi3_nomemops_v4, andsi3_nomemops_v4)
	(iorsi3_nomemops_v4): Add insn patterns.
	* config/hexagon/predicates.md (rmw_memory_operand): False when
	!TARGET_MEMOPS.

2012-05-04  Sandra Loosemore <sandra@codesourcery.com>

	Issue #13270

	* release-notes-csl.xml (Constant extenders): New note.

	gcc/
	* config/hexagon/hexagon.c (FAST_INSN_COST, SLOW_INSN_COST): New.
	(IMMED_CONSTANT_COST): New.
	(CONSTANT_EXTENDER_COST): New.
	(ADDRESS_CONSTANT_EXTENDER_COST): New.
	(MEMORY_COST): New.
	(LIBCALL_COST): New.
	(hexagon_free_immediate): Deleted.
	(hexagon_constant_cost): New.
	(hexagon_address_cost_internal): New.
	(hexagon_rtx_cost):  Use hexagon_constant_cost and
	hexagon_address_cost_internal instead of using fixed costs.
	Choose less random fixed cost factors elsewhere.  Better
	tune costs for SET.  Recognize some additional patterns implemented
	as single insns.
	(hexagon_address_cost): Just use hexagon_address_cost_internal.

	gcc/testsuite/
	* gcc.target/hexagon/addressing-modes-6.c: New test case.

2012-05-04  Joe Seymour  <jseymour@codesourcery.com>

	gcc/
	* config/hexagon/hexagon-protos.h (hexagon_expand_binary_operator):
	Fix type of predicate function poniter.
	* config/hexagon/hexagon.c (hexagon_expand_binary_operator):
	Fix type of predicate function poniter.

2012-05-03  Joe Seymour  <jseymour@codesourcery.com>

	Issue 13312

	gcc/
	* config/hexagon/hexagon.md (muladd<mode>3, mulsub<mode>3):
	Add -ffp-contract=fast condition.

2012-05-02  Tom de Vries  <tom@codesourcery.com>

	Merge from QuIC 5.0 branch

	2012-01-20  Joe Seymour  <jseymour@codesourcery.com>

	Issue #12711.

	gcc/
	* config/hexagon/linux-atomic.c (__kernel_cmpxchg): Set fail if compare
	fails.

	gcc/testsuite/
	* gcc.target/hexagon/cmpexchange.c: New test.

2012-05-02  Joe Seymour  <jseymour@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.md (FPM): New mode iterator.
	(mul<mode>3): New pattern.
	(mulsf3, muldf3): Replace with mul<mode>3.
	(muladd<mode>3, mulsub<mode>3): New patterns.

	gcc/testsuite
	* gcc.target/hexagon/fp-mul-1.c: New test.

2012-05-01  Tom de Vries  <tom@codesourcery.com>

	Merge from QuIC 5.0 branch

	2012-01-20  Joe Seymour  <jseymour@codesourcery.com>

	Issue #12708.

	gcc/
	* config/hexagon/linux-unwind.h (hexagon_fallback_frame_state):
	Don't expect return address to be on stack.

2012-04-30  Julian Brown  <julian@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.c (hexagon_split_subword_compare): New.
	* config/hexagon/hexagon-protos.h (hexagon_split_subword_compare):
	Add prototype.
	* config/hexagon/hexagon.md (*cmphi_helper, *cmpqi_helper): New
	insn_and_splits.
	* config/hexagon/predicates.md (subword_reg_compare_operator): New
	predicate.

2012-04-30  Julian Brown  <julian@codesourcery.com>

	Issue #13176

	* release-notes-csl.xml (Comparison and loop improvements): New
	note.

	gcc/
	* config/hexagon/hexagon.c (extract_subreg_for_comparison): New.
	(trunc_int_for_comparison): New.
	(hexagon_expand_compare): Add support for promoting QImode/HImode
	comparisons to SImode, when it is safe to do so. Handle changes to
	supported operands. Force out-of-range immediates to the correct
	register mode. Fix formatting.
	* config/hexagon/hexagon.md (REGCMP): Move definition. Add QImode
	and HImode.
	(cstore<mode>4): New expander for non-SImode cstore insns.
	(cbranch<mode>4): Add support for QImode, HImode comparisons on
	Hexagon >= V4.

	gcc/testsuite/
	* gcc.target/hexagon/subword-comparisons-1.c: New test.
	* gcc.target/hexagon/subword-comparisons-2.c: New test.

2012-04-25  Julian Brown  <julian@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.c (hexagon_expand_binary_operator):
	Tighten handling of memop immediates. Expand non-memop insns in
	SImode.
	* config/hexagon/hexagon-protos.h (hexagon_expand_binary_operator):
	Update prototype.
	* config/hexagon/hexagon.md (AQHM): New mode iterator.
	(const_letter): Remove mode attribute.
	(add<mode>3, sub<mode>3, and<mode>3, ior<mode>3): Add
	memop-immediate predicate to calls to
	hexagon_expand_binary_operator.
	(add<mode>3_real_v4, sub<mode>3_real_v4, and<mode>3_real_v4)
	(ior<mode>3_real_v4): Split into SImode and QImode/HImode versions.
	Remove non-memop alternatives from the latter, apart from those
	required by reload.
	(add<mode>3_real, sub<mode>3_real, and<mode>3_real,
	ior<mode>3_real): Remove. Replace with...
	(addsi3_real, subsi3_real, andsi3_real, iorsi3_real): These.
	* config/hexagon/predicates.md (rmw_memory_operand): New predicate.
	(gr_reg_or_rmw_mem_operand): Refactor in terms of above.
	(inv_power_of_two_operand, minus_31_to_31_operand, no_int_operand):
	New predicates.

2012-04-25  Joe Seymour  <jseymour@codesourcery.com>

	gcc/
	* release-notes-csl.xml (Conditional sign extension): New note.

2012-04-24  Tom de Vries  <tom@codesourcery.com>

	Issue #13226

	gcc/
	* config/hexagon/hexagon.c (hexagon_absolute_address_p): Return false
	for pic and tls addresses.

2012-04-23  Julian Brown  <julian@codesourcery.com>

	Revert:

	Issue #13176

	* release-notes-csl.xml (Comparison and loop improvements): New
	note.

	gcc/
	* config/hexagon/hexagon.md (REGCMP): Move definition. Add QImode
	and HImode.
	(cstore<mode>4): New expander for non-SImode cstore insns.
	(cbranch<mode>4): Add support for QImode, HImode comparisons on
	Hexagon >= V4.

2012-04-23  Joe Seymour  <jseymour@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.md (add<mode>3_real_v4)
	(sub<mode>3_real_v4, and<mode>3_real_v4, ior<mode>3_real_v4):
	Allow only one of operand 0/operand 1 to be a mem.

2012-04-20  Julian Brown  <julian@codesourcery.com>

	Issue #13176

	* release-notes-csl.xml (Comparison and loop improvements): New
	note.

	gcc/
	* config/hexagon/hexagon.md (REGCMP): Move definition. Add QImode
	and HImode.
	(cstore<mode>4): New expander for non-SImode cstore insns.
	(cbranch<mode>4): Add support for QImode, HImode comparisons on
	Hexagon >= V4.

2012-04-18  Sandra Loosemore <sandra@codesourcery.com>

	Issue #13243
	gcc/
	* config/hexagon/linux.h (LINK_SPEC): Don't use "-e _start".

2012-04-16  Julian Brown  <julian@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.md (add<mode>3_real_v4)
	(sub<mode>3_real_v4, and<mode>3_real_v4, ior<mode>3_real_v4): Don't
	allow only one of operand 0/operand 1 to be a mem.
	(*<code>hi3_ll_helper): Add insn_and_split.

2012-04-16  Joe Seymour  <jseymour@codesourcery.com>

	Issue #13110.

	gcc/
	* config/hexagon/hexagon.md (predicable, enabled): Define attrs.
	(define_cond_exec): New pattern.
	(ashlsi3_real_v4, ashlsi3_real, ashrsi3, extendqisi2, extendhisi2)
	(zero_extendqisi2, zero_extendhisi2): Set predicable.

	gcc/testsuite
	* gcc.target/hexagon/cond-exec-1.c: New test.

2012-04-16  Joe Seymour  <jseymour@codesourcery.com>

	Backport from upstream trunk:

	2011-06-21  Bernd Schmidt  <bernds@codesourcery.com>

	* gensupport.c (add_define_attr): New static function.
	(is_predicable): Allow multi-alternative lists for the "predicable"
	attribute.
	(modify_attr_enabled_ce, alter_attrs_for_insn): New static functions.
	(process_one_cond_exec): Call alter_attrs_for_insn.
	* doc/md.texi (Defining Attributes): Mention some standard names.
	(Conditional Execution): Update documentation for "predicable".

2012-04-16  Joe Seymour  <jseymour@codesourcery.com>

	Formatting cleanups.

	gcc/
	config/hexagon/hexagon.c (duplex_move_direction)
	(hexagon_duplex_register_p, hexagon_duplex_insn_p)
	(hexagon_move_insn_up_p, hexagon_move_insn_down_p)
	(hexagon_predicate_dot_newable_p): Cleanup formatting and comments.

2012-04-16  Joe Seymour  <jseymour@codesourcery.com>

	Issue #13194

	gcc/
	* config/hexagon/hexagon.c (hexagon_is_floating_point_p): Remove.
	(hexagon_predicate_dot_newable_p): Allow fp comparisons.

2012-04-14  Tom de Vries  <tom@codesourcery.com>

	Merge from QuIC 5.0 branch

	2012-01-20  Joe Seymour  <jseymour@codesourcery.com>

	Issue #12716.

	gcc/
	config/hexagon/linux-unwind.h (hexagon_fallback_frame_state): Update
	sc_regs field names.  Add p3_0 and gp fields.

2012-04-14  Tom de Vries  <tom@codesourcery.com>

	#Issue 13240

	gcc/
	* config/hexagon/linux.h (LINK_SPEC): Remove -z text.

2012-04-13  Sandra Loosemore <sandra@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.c (hexagon_rtx_costs): Use speed
	parameter instead of optimize_size to control speed/size
	tradeoffs.  Adjust costs of hard/soft float operations.  Fix
	bugs with incorrectly returning the cost.

2012-04-13  Julian Brown  <julian@codesourcery.com>

	Issue #13261

	* release-note-csl.xml (Addressing mode improvements): New note.

	gcc/
	* config/hexagon/hexagon.c (hexagon_post_modify_address_p): Don't
	restrict post-modify addresses to Hexagon v4+. Fix RTL recognition.
	(hexagon_cond_mem_operand): Permit base+reg as well as base+scaled
	reg addressing mode.
	(hexagon_expand_movmem): Fix typo.

	gcc/testsuite/
	* gcc.target/hexagon/addressing-modes-1.c: New test.
	* gcc.target/hexagon/addressing-modes-2.c: Ditto.
	* gcc.target/hexagon/addressing-modes-3.c: Ditto.
	* gcc.target/hexagon/addressing-modes-4.c: Ditto.
	* gcc.target/hexagon/addressing-modes-5.c: Ditto.

2012-04-12  Tom de Vries  <tom@codesourcery.com>

	gcc/
	* config.gcc (hexagon-*-linux*): Add gnu-user.h and glibc-stdint.h to
	tm_file.

2012-04-12  Tom de Vries  <tom@codesourcery.com>

	Merge from QuIC 5.0 branch

	2012-01-20  Joe Seymour  <jseymour@codesourcery.com>

	Issue #12713

	gcc/
	config.gcc (hexagon-*-linux*): Remove default_use_cxa_atexit=no.

2012-04-12  Julian Brown  <julian@codesourcery.com>

	Issue #13242

	gcc/
	* config/hexagon/hexagon.c (hexagon_falign_maybe_precedes_insn_p):
	New.
	(hwloop_optimize): Use above function to refine distance estimation.

2012-04-11  Tom de Vries  <tom@codesourcery.com>

	Issue 13235

	gcc/
	* config/hexagon/hexagon.c (hexagon_cannot_force_const_mem): New
	function.
	(TARGET_CANNOT_FORCE_CONST_MEM): Define to
	hexagon_cannot_force_const_mem.

2012-04-11  Tom de Vries  <tom@codesourcery.com>

	Issue #13234

	gcc/
	* config/hexagon/hexagon.c (hexagon_output_addr_const_extra): New
	function.
	(TARGET_ASM_OUTPUT_ADDR_CONST_EXTRA): Define to
	hexagon_output_addr_const_extra.

2012-04-05  Sandra Loosemore <sandra@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.md (type): Add "dcfetch".
	(prefix_real): Use it instead of "Store" type for dcfetch.
	* config/hexagon/hexagon-v2.md (v2_dcfetch): New.
	* config/hexagon/hexagon-v3.md (v3_dcfetch): New.
	* config/hexagon/hexagon-v4.md (v4_dcfetch): New.
	* config/hexagon/hexagon-v5.md (v5_dcfetch): New.

2012-04-04  Tom de Vries  <tom@codesourcery.com>

	gcc/testsuite/
	* config/default.exp: Set no_trampolines for target hexagon.

2012-04-03  Julian Brown  <julian@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.md (addaslmsi4): Add constraint for
	operand 2.
	* config/hexagon/constraints.md (Kp2): Define constraint.

2012-04-03  Julian Brown  <julian@codesourcery.com>

	Merge from QuIC 5.0 branch

	2012-02-01  Joe Seymour  <jseymour@codesourcery.com>

	Issue #12721.

	gcc/
	* config/hexagon/hexagon.md (parallel_combine_insn): Remove.

2012-04-03  Julian Brown  <julian@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.c
	(hexagon_absolute_with_scaled_reg_address): Accept all constant
	values for absolute part, not just CONST_INT.

2012-03-30  Nathan Sidwell  <nathan@codesourcery.com>

	Issue #13136
	gcc/
	* config/hexagon/dinkumware.h (LINK_GCC_C_SEQUENCE_SPEC): Remove
	finiS.o thinko.

2012-03-29  Julian Brown  <julian@codesourcery.com>
	    Joe Seymour  <jseymour@codesourcery.com>

	Issue #13003

	* release-notes-csl.xml (Memory operations): New note.

	gcc/
	* config/hexagon/predicates.md (gr_reg_or_rmw_mem_operand)
	(gr_reg_rmw_or_imm_operand): New predicates.
	* config/hexagon/hexagon.c (hexagon_rmw_mem_operand): Return false
	for !TARGET_V4_FEATURES.
	(hexagon_expand_binary_operator): New.
	(hexagon_print_operand): Add 'b' operand code.
	* config/hexagon/hexagon.md (AM, access_size, const_letter): New
	mode iterator and attributes.
	(addsi3, subsi3, andsi3, iorsi3): Replace with...
	(add<mode>3, sub<mode>3, and<mode>3, ior<mode>3): These. Use
	hexagon_expand_binary_operator.
	(addsi3_real_v4, subsi3_real_v4, andsi3_real_v4, iorsi3_real_v4):
	Replace insn_and_split with...
	(add<mode>3_real_v4, sub<mode>3_real_v4, and<mode>3_real_v4)
	(ior<mode>3_real_v4): These. Tweak operands, and support
	byte/halfword/word memops.
	(addsi3_real, subsi3_real, andsi3_real, iorsi3_real): Replace
	with...
	(add<mode>3_real, sub<mode>3_real, and<mode>3_real)
	(ior<mode>3_real): This.
	(addhi3_ll, addhi3_lh, subhi3_ll, subhi3_lh): Update RTL patterns.
	(addqi3_memop, addqi3_memop2, addhi3_memop, addhi3_memop2)
	(subqi3_memop, subhi3_memop, andqi3_memop, andqi3_memop2)
	(andhi3_memop, andhi3_memop2, iorqi3_memop, iorqi3_memop2)
	(iorhi3_memop, iorhi3_memop2): Remove insn_and_splits.
	* config/hexagon/hexagon-protos.h (hexagon_expand_binary_operator):
	Add prototype.

	gcc/testsuite/
	* gcc.target/hexagon/memop-1.c: Add test.

2012-03-23  Nathan Sidwell  <nathan@codesourcery.com>

	Issue #13136
	gcc/
	* config/hexagon/dinkumware.h (STARTFILE_SPEC, ENDFILE_SPEC,
	LINK_GCC_C_SEQUENCE_SPEC): Allow -shared.

	* release-notes-csl.xml: Add note.

2012-03-22  Tom de Vries  <tom@codesourcery.com>

	* gcc/config/hexagon/linux-unwind.h: Disable when inhibit_libc is
	defined.

2012-03-21  Joe Seymour  <jseymour@codesourcery.com>

	* release-notes-csl.xml: Fix typo.

2012-03-20  Julian Brown  <julian@codesourcery.com>

	Issue #13096

	* release-notes-csl.xml (Hardware Loops): Mention effect of fix for
	#13096 also.

	gcc/
	* config/hexagon/predicates.md (gr_reg_or_const_zero_operand):
	Rename to...
	(gr_reg_or_scratch_operand): This. Accept scratch operand instead
	of constant zero.
	* config/hexagon/hexagon.c (hwloop_optimize): Handle safe deletion
	of extraneous register-register moves before loop setup
	instruction. Use scratch instead of constant zero to indicate no
	scratch register needed.
	* config/hexagon/hexagon.md (loop0, loop0_pic, loop0_pic_v4, loop1)
	(loop1_pic, loop1_pic_v4): Use gr_reg_or_scratch_operand, *X
	constraint.

2012-03-20  Julian Brown  <julian@codesourcery.com>

	Issue #13059

	* release-notes-csl.xml (Hardware loops): Add note.

	gcc/config/hexagon/
	* hexagon.md (doloop_end): Allow potentially unsafe hardware loop
	iteration counts (locally for Mentor).

2012-03-16  Tom de Vries  <tom@codesourcery.com>

	gcc/
	* config/hexagon/linux.h (LINK_SPEC): Pass march=*.
	(SYSROOT_SUFFIX_SPEC): Map march=* onto path names.
	* config/hexagon/t-linux (MULTILIB_OPTIONS): Remove G0 and fpic.  Set to
	hexagonv3/v4/v5.
	(MULTILIB_DIRNAMES): Set to v3/v4/v5.
	(MULTILIB_MATCHES): Remove fpic=fPIC.

2012-03-15  Joe Seymour  <jseymour@codesourcery.com>

	gcc/
	* config/hexagon/predicates.md: Remove trailing whitespace.
	* config/hexagon/lib1funcs.asm: Remove trailing whitespace.
	* config/hexagon/hexagon.c: Remove trailing whitespace.
	* config/hexagon/hexagon.h: Remove trailing whitespace.
	* config/hexagon/crti.asm: Remove trailing whitespace.
	* config/hexagon/crtn.asm: Remove trailing whitespace.
	* config/hexagon/manual_builtins.md: Remove trailing whitespace.
	* config/hexagon/hexagon.md: Remove trailing whitespace.

2012-03-14  Joe Seymour  <jseymour@codesourcery.com>

	Issue #13056.

	* release-notes-csl.xml (New-value jumps): New note.

	gcc/
	* config/hexagon/hexagon.c (hexagon_nvj_maybe_convert_comparison):
	New function.
	(hexagon_nvj_query_compare): Call new function.

2012-03-12  Tom de Vries  <tom@codesourcery.com>

	Issue #13095.

	gcc/
	* config/hexagon/predicates.md (combine_imm_operand): Move up.
	(conditional_src_operand): Use combine_imm_operand.

2012-03-09  Joe Seymour  <jseymour@codesourcery.com>

	Issue #13079.

	* release-notes-csl.xml (Hexagon V5 intrinsics): New note.

	gcc/
	* config/hexagon/builtins.def: Apply patch from Qualcomm to
	fix types for hexagonv5.
	* config/hexagon/builtins.md: Apply patch from Qualcomm to
	fix types for hexagonv5 and: s/HEXAGON_HEXAGON/HEXAGON/g,
	s/of HEXAGON/of Q6/g, convert warning FIXMEs to comments.
	* config/hexagon/hexagon.c (hexagon_init_builtins): Add new
	ftypes: SF_ftype_DI, DF_ftype_DI, SI_ftype_SF, DI_ftype_SF,
	SI_ftype_DF, DI_ftype_DF

2012-03-07  Joe Seymour  <jseymour@codesourcery.com>

	Forward port Issue #12948 from QuIC 5.0.

	* release-notes-csl.xml (Long calls):
	New note.

	gcc/
	* config/hexagon/hexagon.c (hexagon_function_ok_for_sibcall):
	Change behaviour for long calls depending on architecture version.
	* config/hexagon/hexagon.md: Likewise.

2012-03-07  Joe Seymour  <jseymour@codesourcery.com>

	Forward port Issue #12714 from QuIC 5.0.

	* release-notes-csl.xml (Position-independent code): New note.

	gcc/
	* config/hexagon/elf.h (ASM_PREFERRED_EH_DATA_FORMAT): Make PIC
	aware.

2012-03-07  Joe Seymour  <jseymour@codesourcery.com>

	* release-notes-csl (Target prefix changed): New note.
	* config.sub (hexagon): Set default operating system to elf.

2012-03-06  Joe Seymour  <jseymour@codesourcery.com>

	* release-notes-csl.xml (Constant-extended conditional loads/stores):
	New note.

2012-03-06  Joe Seymour  <jseymour@codesourcery.com>

	* release-notes-csl.xml (Incorrect compilation bug fix): Set
	target to hexagon.

2012-03-06  Julian Brown  <julian@codesourcery.com>

	Issue #13061

	gcc/
	* config/hexagon/hexagon.c (hwloop_optimize): Remove extraneous
	loop end label.

2012-03-05  Joe Seymour  <jseymour@codesourcery.com>

	gcc/
	* testsuite/gcc.target/hexagon/sectoins-5.c: New test.

2012-03-05  Joe Seymour  <jseymour@codesourcery.com>

	Forward port from QuIC 5.0.

	Issue #12788.

	* release-notes-csl.xml (Incorrect compilation bug fix): New note.

	gcc/
	* config/hexagon/hexagon.c (hexagon_instructions_dependent):
	Check for writes to overlapping memory regions.

2012-03-05  Joe Seymour  <jseymour@codesourcery.com>

	Issue #12807.

	* release-notes-csl.xml (Some target preprocessor defines removed):
	New note.

2012-03-05  Joe Seymour  <jseymour@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.h: Change uses of builtin_define_std
	to builtin_define.
	* config/hexagon/qdsp6_compat.h: Delete.

2012-03-05  Joe Seymour  <jseymour@codesourcery.com>

	Issue #12807.

	gcc/
	* config/hexagon/hexagon.h (TARGET_CPU_CPP_BUILTINS): Don't
	define __hexagon, hexagon, __qdsp6, or qdsp6.

2012-03-05  Julian Brown  <julian@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.c (hexagon_option_default_params): Set
	PARAM_EARLY_INLINING_INSNS parameter.

2012-03-02  Joe Seymour  <jseymour@codesourcery.com>

	Issue #13002.

	gcc/
	* config/hexagon/hexagon.c (hexagon_cond_mem_operand): Add
	check for constant extended immediate value.

2012-02-29  Joe Seymour  <jseymour@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.c (hexagon_select_small_data_section):
	Add SECTION_SMALL to flags.
	* testsuite/gcc.target/hexagon/sections-1.c: Add 's' to section
	flags.
	* testsuite/gcc.target/hexagon/sections-2.c: Likewise.

2012-02-24  Julian Brown  <julian@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.md: Fix build breakage caused by cleanup
	patch.

2012-02-24  Julian Brown  <julian@codesourcery.com>

	* release-notes-csl.xml (GCC comparison improvements): Add note.

2012-02-24  Julian Brown  <julian@codesourcery.com>

	gcc/
	* config/hexagon/hexagon-v1.md: New.
	* config/hexagon/hexagon-v2.md: New.
	* config/hexagon/hexagon-v3.md: New.
	* config/hexagon/hexagon-v4.md: New.
	* config/hexagon/hexagon-v5.md: New.
	* config/hexagon/hexagon.md: Clean up formatting.
	* config/hexagon/t-hexagon (MD_INCLUDES): Set, adding
	hexagon-v{1,2,3,4,5}.md.

2012-02-22  Julian Brown  <julian@codesourcery.com>

	Issue #12995

	gcc/
	* config/hexagon/hexagon.c (hwloop_fail): Remove FIXME about
	comparison modes. Use VOIDmode for conditional branch comparison.
	(hexagon_expand_compare): Use VOIDmode for comparisons used in
	conditional branches and assignments.
	(hexagon_expand_movmem_inline): Use VOIDmode for comparison for
	conditional branch.
	(hexagon_predicable_p): Use VOIDmode for comparison in cond_exec.
	(hexagon_nvj_move_possible): Use VOIDmode for comparison.
	* config/hexagon/hexagon.md (cond_movqi, cond_movqi_new_value)
	(cond_movhi, cond_movhi_new_value, cond_movsi, cond_movsi_new_value)
	(cond_movdi, cond_movdi_new_mem, cond_movsf, cond_movsf_new_value)
	(cond_movdf, cond_movdf_new_mem, cond_addsi3, cond_subsi3)
	(cond_andsi3, cond_iorsi3, cond_xorsi3, cond_combinesi): Use
	VOIDmode for comparison.
	(movsicc): Remove pattern (seems to be unnecessary).
	(muxtsi_v4, muxfsi_v4, muxtsi, muxfsi): Use VOIDmode for comparison.
	(cstoresi4, hexagon_cstoresi): New.
	(seq, sne, slt, sle, sgt, sge, sltu, sleu, sgtu, sgeu, beq, bne)
	(blt, ble, bgt, bge, bltu, bleu, bgtu, bgeu): Remove obsolete
	insn patterns.
	(gpr_cond_jump, cond_jump, cond_jump_v4, new_value_jump_tstbit)
	(compare_and_jump_tstbit, new_value_jump1, compare_and_jump1)
	(new_value_jump2, compare_and_jump2, cond_return)
	(cond_dealloc_return, cond_jump_reg_indirect, splitter for last):
	Use VOIDmode for comparison in conditional jumps. Fix RTL as
	appropriate.
	(unspec_nop_move, splitters): Remove useless patterns.
	(bit_logic_op, and_ior): Add code iterators.
	(andttbisi3, andtfbisi3, andftbisi3, andffbisi3, iorttbisi3)
	(iortfbisi3, iorftbisi3, iorffbisi3, xorttbisi3, xortfbisi3)
	(xorftbisi3, xorffbisi3): Reimplement insns/splitters to match
	modified RTL.
	(define_peephole2s): Fix RTL comparison modes.

2012-02-22  Joe Seymour  <jseymour@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.c (TARGET_OPTION_DEFAULT_PARAMS):
	Define.
	(hexagon_option_default_params): New.
	(params.h): Include.

2012-02-21  Joe Seymour  <jseymour@codesourcery.com>

	gcc/
	* longlong.h (count_leading_zeroes, count_trailing_zeroes):
	Define for hexagon.

2012-02-21  Joe Seymour  <jseymour@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.c (hexagon_print_jump)
	(hexagon_print_transfer, hexagon_print_condition)
	(hexagon_print_address, hexagon_print_unary_op)
	(hexagon_print_binary_op, hexagon_print_swapped_binary_op)
	(hexagon_print_binary_op_with_option, hexagon_print_trinary_op)
	(hexagon_print_vecexp, hexagon_print_rtx)
	(hexagon_print_rtl_pseudo_asm, TARGET_PRINT_RTL_PSEUDO_ASM): Remove.

2012-02-17  Joe Seymour  <jseymour@codesourcery.com>

	gcc/
	* config/hexagon/hexagon-protos.h
	(sdata_symbolic_operand_smallest_accessable_size): Rename to
	sdata_symbolic_operand_size.
	* config/hexagon/hexagon.c
	(smallest_accessable_entity_in_declarataion): Make static.
	(sdata_symbolic_operand_smallest_accessable_size): Rename to
	sdata_symbolic_operand_size, and return total size of decl.
	(hexagon_in_small_data_p): Check for null TREE_TYPE.
	(has_this_tree_been_visited, remember_this_tree)
	(descent_smallest, MAX_DECLARE_RECURSION)
	(list_of_visited_declaration)
	(list_of_visited_declaration_counter): Remove.
	(smallest_access_size_in_type): New function.
	(smallest_accessable_entity_in_declaration): Replace body with
	call to smallest_access_size_in_type.
	(hexagon_asm_select_section): Move calls to
	smallest_accessable_entity_in_declaration into small data if
	statement.
	(hexagon_asm_named_section): Only output subsection info if
	dealing with small data.
	(hexagon_asm_output_aligned_decl_common): Add call to
	hexagon_in_small_data.
	* config/hexagon/predicate.md: Change
	sdata_symbolic_operand_smallest_accessable_size to
	sdata_symbolic_operand_size. Remove some deadcode.
	* config/hexagon/hexagon.h (DEFAULT_LARGEST_ALIGNMENT): Remove.
	* testsuite/gcc.target/hexagon/sections-2.c: Remove expectation
	of .subsection statement for non sdata decl.

2012-02-17  Joe Seymour  <jseymour@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.c (hexagon_override_options): Forbid
	the use of g_switch_value > 8.
	(hexagon_select_small_data_section): Add argument "align".
	Change type of "size" to unsigned int. Change section names to
	"<name>.<size>.<align>". Update callers. Update comment.
	(hexagon_asm_select_rtx_section): Add cast to g_switch_value.
	(hexagon_asm_unique_section): Use same section naming
	convention above.
	(descent_smallest): Change return type to unsigned int.
	(hexagon_asm_output_aligned_decl_common): Only output "access
	size" .comm argument when targeting section sorting and dealing
	with small data.
	* testsuite/gcc.target/hexagon/sections-1.c: Update for new
	section naming convention.
	* testsuite/gcc.target/hexagon/sections-2.c: Update for new
	section naming convention.
	* testsuite/gcc.target/hexagon/sections-4.c: Update for new
	section naming convention.
	* testsuite/gcc.target/hexagon/sections-1.c: Skip for -G0.

2012-02-17  Joe Seymour  <jseymour@codesourcery.com>

	gcc/
	* varasm.c (mergeable_string_section): Revert temporary
	patch that made mergeable_string_section non-static.

2012-02-17  Joe Seymour  <jseymour@codesourcery.com>

	gcc/
	* config/hexagon/hexagon-protos.h
	(hexagon_asm_output_aligned_decl_common): Add argument "local".
	(hexagon_asm_output_aligned_decl_local): Remote prototype.
	* config/hexagon/hexagon.c (hexagon_asm_select_rtx_section)
	(hexagon_in_small_data_p, hexagon_unique_section)
	(hexagon_select_section, hexagon_elf_asm_named_section)
	(hexagon_categorize_decl_for_section, hexagon_named_section_sbss)
	(get_named_section): Remove prototype.
	(default_unique_section_2, hexagon_unique_section): Remove function.
	(hexagon_section_types): New enum.
	(hexagon_select_small_data_section): New function.
	(hexagon_in_small_data_p): Formatting cleanups.
	(hexagon_asm_select_section): Factor into calls to
	default_elf_select_section and hexagon_select_small_data_section.
	(hexagon_asm_select_rtx_section): Move logic into
	hexagon_select_small_data_section.
	(hexagon_asm_unique_section): Adjust to call default_unique_section.
	Check to see if a small data section was chosen, and make
	appropriate changes if it was.
	(hexagon_asm_named_section): New function.
	(hexagon_elf_asm_named_section): Remove function.
	(hexagon_categorize_decl_for_section): Remove function.
	(bss_initializer_p): Remove function.
	(switch_to_section): Remove prototype.
	(mergeable_string_section): Remove prototype.
	(hexagon_asm_output_aligned_decl_common): Call
	hexagon_select_small_data_section instead of get_section.
	Add argument "local", and output ".lcomm" if true.
	(hexagon_asm_output_aligned_decl_local): Remove function.
	(TARGET_ASM_UNIQUE_SECTION): Define as
	 hexagon_asm_unique_section.
	(TARGET_HAVE_NAMED_SECTIONS): Set true.
	* config/hexagon/hexagon.h (ASM_OUTPUT_ALIGNED_DECL_LOCAL)
	(ASM_OUTPUT_ALIGNED_DECL_COMMON): Update calls to
	hexagon_asm_output_aligned_decl_common.
	* testsuite/gcc.target/hexagon/sections-1.c: New test.
	* testsuite/gcc.target/hexagon/sections-2.c: New test.
	* testsuite/gcc.target/hexagon/sections-3.c: New test.
	* testsuite/gcc.target/hexagon/sections-4.c: New test.
	
2012-02-17  Julian Brown  <julian@codesourcery.com>

	gcc/
	* config/hexagon/predicates.md (gr_reg_or_const_zero_operand): New.
	* config/hexagon/hexagon.md (setmemsi): Re-enable.
	(loop0, loop0_pic, loop0_pic_v4, loop1, loop1_pic, loop1_pic_v4):
	Tweak temporary-register clobber.
	* config/hexagon/hexagon.c
	(hexagon_loop_invalid_for_forced_unroll): Remove.
	(hexagon_cannot_copy_insn_p): New.
	(hexagon_loop0_insn): New.
	(hexagon_expand_movmem_inline, hexagon_expand_setmem): Re-enable.
	Tweak for changes to loop insn implementation.
	(hexagon_expand_movmem): Re-enable use of
	hexagon_expand_movmem_inline.
	(TARGET_LOOP_INVALID_FOR_FORCED_UNROLL): Remove dead code.
	(TARGET_CANNOT_COPY_INSN_P): Define hook.

2012-02-06  Julian Brown  <julian@codesourcery.com>

	gcc/
	* loop-doloop.c (doloop_condition_set, doloop_modify): Add support
	for GTU condition.
	* config/hexagon/hexagon.c (hw-doloop.h): Include.
	(hexagon_fixup_doloops): Remove prototype, function.
	(hexagon_duplicate_doloop_begin): Comment out prototype & function.
	(hexagon_override_options): Remove disabling of hardware loops.
	(hexagon_final_prescan_insn): Skip zero-length packets.
	(MAX_LOOP_SETUP_OFFSET, MAX_LOOP_DEPTH): Define macros.
	(hwloop_optimize, hwloop_fail, hwloop_pattern_reg): New.
	(hexagon_doloop_hooks): New.
	(hexagon_reorg_loops): New.
	(hexagon_machine_dependent_reorg): Use hexagon_reorg_loops instead
	of hexagon_fixup_doloops.
	(hexagon_invalid_within_doloop): Add FIXME comment.
	(hexagon_expand_movmem_inline, hexagon_expand_movmem)
	(hexagon_expand_setmem): Disable.
	* config/hexagon/hexagon.md (setmemsi): Disable, add FIXME.
	(doloop_end): Use semantically-correct RTL, and remove explicit
	RTL generation, DONE. Mark compiled function as PIC-requiring when
	necessary.
	(doloop_end0, doloop_end1, doloop_begin, doloop_begin0)
	(doloop_begin0_pic, doloop_begin1, doloop_begin1_pic): Remove.
	(doloop_end_internal): New.
	(splitter for above): New.
	(endloop0, endloop1): Use (gtu (...) 1) condition.
	(loop0, loop0_pic, loop0_pic_v4, loop1, loop1_pic, loop1_pic_v4):
	Fix constraints, allow for possibly-missing scratch. Add assertion
	checks.

	gcc/testsuite/
	* gcc.target/hexagon/hwloop1.c: New.
	* gcc.target/hexagon/hwloop2.c: New.
	* gcc.target/hexagon/hwloop3.c: New.
	* gcc.target/hexagon/hwloop4.c: New.
	* gcc.target/hexagon/hwloop5.c: New.
	* gcc.target/hexagon/hwloop6.c: New.

2012-02-06  Julian Brown  <julian@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.c (require_pic_register): Set
	cfun->machine->pic_reg to RTX representing PIC register.
	(hexagon_load_pic_register): Add use of pic register to prevent
	load being optimised away.
	* config/hexagon/hexagon.h (machine_function): Add pic_reg field.

2012-02-06  Julian Brown  <julian@codesourcery.com>

	Backport from FSF mainline:

	2011-09-30  Bernd Schmidt  <bernds@codesourcery.com>

	gcc/
	* hw-doloop.c (scan_loop): Compute register usage only for
	non-debug insns.

2012-02-06  Julian Brown  <julian@codesourcery.com>

	Backport from FSF mainline:

	2011-07-07  Bernd Schmidt  <bernds@codesourcery.com>

	gcc/
	* hw-doloop.c: New file.
	* hw-doloop.h: New file.
	* Makefile.in (OBJS): Add hw-doloop.o.
	(hw-doloop.o): New rule.
	($(obj_out_file)): Add hw-doloop.h dependency.
	* config/bfin/bfin.c: Include "hw-doloop.h".
	(loop_info, DEF_VEC_P for loop_info, loop_info_d): Remove.
	(bfin_dump_loops, bfin_bb_in_loop, bfin_scan_loop): Remove.
	(hwloop_optimize): Renamed from bfin_optimize_loop.  Argument
	type changed to hwloop_info.  Return bool, true if the loop was
	successfully optimized.  Remove code that was moved to
	hw-doloop.c, and adjust other parts.
	(hwloop_fail): New static function, containing parts that used
	to be in bfin_optimize_loop.
	(bfin_discover_loop, bfin_discover_loops, free_loops,
	bfin_reorder_loops): Remove.
	(hwloop_pattern_reg): New static function.
	(bfin_doloop_hooks): New variable.
	(bfin_reorg_loops): Remove most code, call reorg_loops.
	* config/bfin/bfin.md (doloop_end splitter): Also enable if
	loop counter is a memory_operand.

2012-02-03  Joe Seymour  <jseymour@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.md (loop0_pic_v4): Remove modes from
	pattern containing label_ref. Add default case to switch.
	(loop1_pic_v4): Remove modes from pattern containing label_ref.

2012-02-01  Joe Seymour  <jseymour@codesourcery.com>

	gcc/
	* config.gcc (hexagon): Remove g.opt.
	* config/hexagon/hexagon.h (CC1_SPEC, CC1PLUS_SPEC): Remove
	mbuilding-multilib and mG0lib.
	* config/hexagon/elf.h (ASM_SPEC, LINK_SPEC): Remove
	mbuilding-multilib and mG0lib.
	* config/hexagon/linux.h (LINK_SPEC): Remove mbuilding-multilib
	and mG0lib.
	* config/hexagon/hexagon.opt (mbuilding-multilib, mG0lib):
	Remove.
	(G): Add.
	* config/hexagon/t-hexagon (MULTILIB_OPTIONS): Change mG0lib to
	G0.
	(MULTILIB_EXTRA_OPTS): Remove mbuilding-multilib.
	* config/hexagon/t-linux (MULTILIB_OPTIONS): Change mG0lib to
	G0.
	(MULTILIB_EXTRA_OPTS): Remove mbuilding-multilib.

2012-02-01  Joe Seymour  <jseymour@codesourcery.com>

	gcc/
	* testsuite/gcc.target/hexagon/hexagon.exp: New file.

2012-01-26  Joe Seymour  <jseymour@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.c: Move target initialization to bottom.
	(default_unique_section_2, hexagon_categorize_decl_for_section)
	(hexagon_categorize_decl_for_section)
	(hexagon_categorize_decl_for_section, hexagon_expand_setmem):
	Temporarily replace targetm with TARGET_.

2012-01-23  Sandra Loosemore  <sandra@codesourcery.com>

	Revert:

	2011-12-14  Joe Seymour  <jseymour@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.h (ASM_OUTPUT_ALIGNED_DECL_LOCAL):
	Disable	definition.
	* config/hexagon/hexagon.c (TARGET_HAVE_SRODATA_SECTION):
	Define true.
	(hexagon_in_small_data_p): Disable checking g_switch_value.

2012-01-06  Joe Seymour  <jseymour@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.h (reg_class, REG_CLASS_NAMES)
	(REG_CLASS_CONTENTS, REGNO_REG_CLASS): New register class
	STACK_REGS.
	* config/hexagon/predicates.md:
	(u6_multiple_4_const_int_operand): Remove.
	* config/hexagon/hexagon.md
	(increment_stack_pointer_duplex): Remove.
	(addsi3_real_v4): Add alternative for
	increment_stack_pointer_duplex instruction.
	* config/hexagon/constraints.md (Rq): New constraint.

2012-01-06  Joe Seymour  <jseymour@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.h (TARGET_SOFT_FLOAT,
	TARGET_HARD_FLOAT): New macros.
	* hexagon.c (hexagon_init_libfuncs): Move if/else sections
	into table.
	(hexagon_fast_libfunc): New structure.
	(hexagon_fast_libfuncs): New table.
	(hexagon_fast_math_libfunc): Remove flag_fast_math2 case.
	* hexagon.opt (ffast-math2): Remove.
	* hexagon.md (call_value, sibcall_value): Remove test for
	flag_fast_math2.

2012-01-06  Julian Brown  <julian@codesourcery.com>

	gcc/
	* config/hexagon/dinkumware.h (SIZE_TYPE, PTRDIFF_TYPE, WCHAR_TYPE)
	(WINT_TYPE, INT8_TYPE, INT16_TYPE, INT32_TYPE, INT64_TYPE)
	(UINT8_TYPE, UINT16_TYPE, UINT32_TYPE, UINT64_TYPE, INT_LEAST8_TYPE)
	(INT_LEAST16_TYPE, INT_LEAST32_TYPE, INT_LEAST64_TYPE)
	(UINT_LEAST8_TYPE, UINT_LEAST16_TYPE, UINT_LEAST32_TYPE)
	(UINT_LEAST64_TYPE, INT_FAST8_TYPE, INT_FAST16_TYPE)
	(INT_FAST32_TYPE, INT_FAST64_TYPE, UINT_FAST8_TYPE)
	(UINT_FAST16_TYPE, UINT_FAST32_TYPE, UINT_FAST64_TYPE)
	(INTPTR_TYPE, UINTPTR_TYPE): Define macros.

2012-01-05  Julian Brown  <julian@codesourcery.com>

	gcc/
	* function.h (rtl_data): Remove combine_in_progress,
	combine_completed flags.
	* combine.c (rest_of_handle_combine): Don't set/clear
	combine_in_progress, combine_completed flags.
	* config/hexagon/hexagon.h (LEGITIMATE_CONSTANT_P): Don't permit
	TLS-referencing values as constant.
	* config/hexagon/hexagon.md (movqi_real_v4, cond_movsi)
	(movhi_real_v4, cond_movhi, cond_movsi, movsf_real_v4, cond_movsf)
	(addsi3_real_v4, cond_addsi3, subsi3_real_v4, mulsi3_real_v4)
	(andsi3_real_v4, iorsi3_real_v4, cmpsi_eq_v4, cmpsi_gt_v4)
	(cmpsi_gtu_v4, cmpsi_geu_v4, cmpsi_ne, cmpsi_le, cmpsi_lt_v4)
	(cmpsi_leu, cmpsi_ltu_v4, muxtsi_v4, muxfsi_v4)
	(compare_and_jump_tstbit, compare_and_jump1, compare_and_jump2):
	Remove FIXME comments, bad uses of condition field and uses of
	combine_in_progress, combine_completed.

2012-01-05  Joe Seymour  <jseymour@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.md (define_attr "type"): Add Eloop.
	(define_attr "length"): Add Eloop.
	(v4_Eloop, v5_Eloop): New reservations.
	(loop0_pic, loop1_pic): Pull v4 logic out into loopN_pic_v4.
	(loop0_pic_v4, loop1_pic_v4): New.
	
2012-01-04  Sandra Loosemore  <sandra@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.c (hexagon_can_eliminate): Fix warning.

2012-01-03  Joe Seymour  <jseymour@codesourcery.com>

	gcc/
	* config/hexagon/predicates.md
	(u6_multiple4_const_int_operand): New predicate.
	* config/hexagon/hexagon.md (increment_stack_pointer_duplex):
	Rearrange predicates/constraints/conditions.

2012-01-03  Joe Seymour  <jseymour@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.md (cmpsf_uo, cmpdf_uo): New insns.
	* config/hexagon/hexagon.c (hexagon_expand_compare): Handle
	unordered floating point comparisons.

2011-12-26  Sandra Loosemore  <sandra@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.c (hexagon_frame_pointer_required): Declare.
	(hexagon_can_eliminate): Declare.
	(TARGET_FRAME_POINTER_REQUIRED): Use hexagon_frame_pointer_required.
	(TARGET_CAN_ELIMINATE): Use hexagon_can_eliminate.
	(hexagon_frame_pointer_required): New function.
	(hexagon_can_eliminate): New function.

2011-12-22  Julian Brown  <julian@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.h (CC1_SPEC, CC1PLUS_SPEC): Remove
	-fsigned-bitfields. Remove comment.

	Revert:
	2011-12-14  Julian Brown  <julian@codesourcery.com>

	gcc/testsuite/
	* gcc.c-torture/execute/991118-1.x: New.
	* gcc.c-torture/execute/pr31448-2.x: New.
	* gcc.c-torture/execute/pr48973-1.x: New.
	* gcc.c-torture/execute/pr48973-2.x: New.
	* gcc.c-torture/execute/bitfld-4.x: Add -fsigned-bitfields for
	Hexagon targets.
	* gcc.c-torture/execute/pr19689.x: Likewise.
	* gcc.c-torture/execute/bf64-1.x: Likewise.

2011-12-21  Julian Brown  <julian@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.c (hexagon_elf_asm_named_section): Add
	FIXME. Merge condition from default version of function (varasm.c).

2011-12-21  Julian Brown  <julian@codesourcery.com>

	gcc/
	* config/hexagon/dinkumware.h (TARGET_OS_CPP_BUILTINS): Define.

	gcc/testsuite/
	* gcc.c-torture/execute/builtins/memmove-2-lib.c (lib/memcpy.c):
	Include, if using Dinkumware.
	* gcc.c-torture/execute/builtins/lib/memcpy.c: New.

2011-12-19  Julian Brown  <julian@codesourcery.com>

	gcc/
	* config/hexagon/linux.h (LINK_SPEC): Hard-wire cross-compile
	variant.
	* config/hexagon/elf.h (LINK_SPEC): Likewise.
	* config/hexagon/dinkumware.h (LIB_SPEC): Define.

2011-12-16  Joe Seymour  <jseymour@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.md (movmemsi): Fix typo.

2011-12-11  Julian Brown  <julian@codesourcery.com>
	    Joe Seymour  <jseymour@codesourcery.com>

	gcc/
	* config/hexagon/constraints.md (K83, K38, K13, K31): Add
	TARGET_V4_FEATURES constraint.

2011-12-15  Joe Seymour  <jseymour@codesourcery.com>

	gcc/testsuite/
	* gcc.dg/torture/pr37868.c: Skip for hexagon.

2011-12-14  Julian Brown  <julian@codesourcery.com>

	gcc/testsuite/
	* gcc.c-torture/execute/991118-1.x: New.
	* gcc.c-torture/execute/pr31448-2.x: New.
	* gcc.c-torture/execute/pr48973-1.x: New.
	* gcc.c-torture/execute/pr48973-2.x: New.
	* gcc.c-torture/execute/bitfld-4.x: Add -fsigned-bitfields for
	Hexagon targets.
	* gcc.c-torture/execute/pr19689.x: Likewise.
	* gcc.c-torture/execute/bf64-1.x: Likewise.

2011-12-14  Julian Brown  <julian@codesourcery.com>

	gcc/
	* config/hexagon/predicates.md (combine_imm_operand): New predicate.
	* config/hexagon/hexagon.md (movsi, movsf): Check we have a symbol
	ref (or an offset from a symbol ref) before checking for TLS
	references. Add assertions.
	(define_peephole2s for combine insns): Use combine_imm_operand
	instead of immediate_operand.
	(combinesi): Add !TARGET_V4_FEATURES.
	(combinesi_v4): Formatting fix.

2011-12-14  Joe Seymour  <jseymour@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.h (ASM_OUTPUT_ALIGNED_DECL_LOCAL):
	Disable	definition.
	* config/hexagon/hexagon.c (TARGET_HAVE_SRODATA_SECTION):
	Define true.
	(hexagon_in_small_data_p): Disable checking g_switch_value.

2011-12-13  Joe Seymour  <jseymour@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.md (movmemsi): Remove extra operand.
	Adjust call to hexagon_expand_movmem.
	* config/hexagon/hexagon-protos.h (hexagon_expand_movmem):
	Update prototype.
	* config/hexagon/hexagon.c (hexagon_expand_movmem): Change
	single operand array argument for explicit rtx arguments.
	(hexagon_expand_movmem_inline): Likewise.
	(hexagon_emit_special_case_memcpy_fn): Disable tailcall
	argument.

2011-12-13  Joe Seymour  <jseymour@codesourcery.com>

	gcc/
	* ifcvt.c (dead_or_predictable): Handle return inside parallel.

2011-12-07  Julian Brown  <julian@codesourcery.com>

	Issue #12581
	Apply patch from Qualcomm.
	gcc/
	* config/hexagon/hexagon.md (extendqidi2, extendhidi2,
	zero_extendqidi2, zero_extendhidi2, zero_extendsidi2): Use
	nonimmediate_operand_with_GP operand predicate.

2011-12-07  Julian Brown  <julian@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.md (movsi): Clarify logic.
	(movsi_real_v4): Remove comment and bad (commented-out) part of
	insn condition field. Reformat constraints so they're readable. Use
	general_operand instead of GP_or_reg_operand for operand 1.
	* config/hexagon/hexagon.c (hexagon_ind_with_offset_address_p):
	Formatting fix.
	(hexagon_storeimm_mem_operand): Strip off mem before testing
	address operand. Don't permit extension on offset.
	(hexagon_rmw_mem_operand, hexagon_subinst_mem_operand)
	(hexagon_subinst_stack_mem_operand): Strip off mem before testing
	address operand.

2011-12-06  Julian Brown  <julian@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.md (call, call_value): Handle absolute
	(non-symbolic) addresses properly.

2011-12-06  Julian Brown  <julian@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.c (hexagon_absolute_address_p): Add mode
	parameter. For const_int addresses, only permit natural alignment.
	(hexagon_absolute_with_scared_reg_address_p): Add mode
	parameter. Ensure that absolute part of address is naturally
	aligned.
	(hexagon_address_p): Add mode argument to calls to above two
	functions.

2011-12-05  Julian Brown  <julian@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.md (setmemsi): Check TARGET_HARDWARE_LOOPS.
	* config/hexagon/hexagon.c (hexagon_override_options): Disable
	hardware loops.
	(hexagon_machine_dependent_reorg): Check TARGET_HARDWARE_LOOPS
	before calling hexagon_fixup_doloops.

2011-12-05  Joe Seymour  <jseymour@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.c (hexagon_get_flags): Handle
	ASM_OPERANDS.
	(MAX_DECLARE_RECURSION): Increase to 10002.
	(hexagon_pack_insns): Handle empty basic blocks gracefully.

2011-12-01  Julian Brown  <julian@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.md (cbranch<mode>4): Split out cbranchsi4,
	merge cbranchdi4 with cbranch{sf,df}4. Use REGCMP iterator.
	(ICMP): Remove mode iterator.
	(FCMP): Rename to...
	(REGCMP): This, and add DI.

2011-12-01  Julian Brown  <julian@codesourcery.com>

	gcc/
	* config.gcc (need_64bit_hwint, extra_options): Define
	generically for all Hexagon targets.
	
	libcpp/
	* configure.ac ($target): Use 64-bit hwint for Hexagon.
	* configure: Regenerate.

2011-11-30  Joe Seymour  <jseymour@codesourcery.com>

	gcc/
	* config/hexagon/predicates.md (sdata_symbolic_operand): Remove
	cast from comparison with g_switch_value.
	* config/hexagon/hexagon.md (load_tls_hi, load_tls_lo): Add
	default case containing gcc_unreachable.
	(gpr_cond_jump, new_value_jump_tstbit)
	(compare_and_jump_tstbit): Remove unused variable.
	Pass result of hexagon_branch_hint through INTVAL.
	(new_value_jump, compare_and_jump1, new_value_jump2)
	(compare_and_jump2): Fix mixed declarations and code warnings.
	(cond_jump_reg_indirect): Add missing mode to pattern.
	(loop0, loop0_pic, loop1, loop1_pic): Remove modes from pattern
	containing label_ref.
	(cmpqi_gtu, cmphi_eq, gmphi_gtu): Fix mixed declarations and
	code warings.
	(compute_tls_base): Add mode to unspec_volatile.
	* config/hexagon/hexagon-protos.h
	(hexagon_legitimate_pic_operand_p): Add prototype.
	* config/hexagon/hexagon.c (hexagon_fast_math_libfunc): Fix
	possibly undefined variable warning. Add assertion that only
	called when flag_fast_math2 or flag_unsafe_math_optimizations
	is set.

2011-11-30  Julian Brown  <julian@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.h (hexagon_final_info): Remove
	compare_op0, compare_op1 fields.
	* config/hexagon/predicates.md (conditional_dest_operand)
	(conditional_src_operand): Pass TARGET_V4_FEATURES for extended
	parameter of hexagon_cond_mem_operand. Pass mem not address to the
	same function.
	* config/hexagon/hexagon.md (addsi3_real_v4, subsi3_real_v4)
	(andsi3_real_v4, iorsi3_real_v4, addqi3_memop, addqi3_memop2)
	(addhi3_memop, addhi3_memop2, subqi3_memop, subhi3_memop)
	(andqi3_memop, andqi3_memop2, andhi3_memop, andhi3_memop2)
	(iorqi3_memop, iorqi3_memop2, iorhi3_memop, iorhi3_memop2):
	Pass TARGET_V4_FEATURES for extended parameter of
	hexagon_rmw_mem_operand. Disable splitter.
	(cmpbi, cmpsi, cmpdi, movsicc, seq, sne, sle, slt, sgt, sge)
	(sltu, sleu, sgtu, sgeu, beq, bne, blt, ble, bgt, bge, bltu)
	(bleu, bgtu, bgeu, cmpsf, cmpdf): Comment out expanders.
	(cbranchbi4, cbranch<mode>4): New expanders.
	* config/hexagon/hexagon-protos.h (hexagon_expand_compare): Update
	prototype.
	* config/hexagon/hexagon.c (hexagon_expand_compare): Add op0, op1
	arguments. Replace SWAP_OPERANDS macro with new logic.
	(SET_CODES): Move macro definition inside above function, undefine
	at end.
	(SWAP_OPERANDS): Remove macro.

2011-11-29  Julian Brown  <julian@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.c (hexagon_legit_addr_const_p): Remove
	dead forward declaration.
	(hexagon_post_modify_address_p): Add missing return statement.
	(hexagon_address_p): Disallow calling with EXTENDED true on non-v4
	cores. Update comment.
	(hexagon_mem_operand): Rename to...
	(hexagon_noext_mem_operand): This. Remove extended argument.
	(hexagon_legitimate_address_p): Use extended immediate offsets on
	v4 cores only.
	* config/hexagon/constraints.md (Anx): Call
	hexagon_noext_mem_operand not hexagon_mem_operand. Tweak doc
	string.
	* config/hexagon/hexagon-protos.h (hexagon_mem_operand): Rename
	to...
	(hexagon_noext_mem_operand): This. Remove extended argument.

2011-11-28  Joe Seymour  <jseymour@codesourcery.com>

	gcc/
	* hooks.h (hook_int_const_tree_const_tree_0): Remove.
	(hook_int_tree_tree_int_0): New.
	* hooks.c: Likewise.
	* hexagon-protos.h (hexagon_print_operand): Remove const from
	operand definition.
	(hexagon_print_operand_address): Likewise.
	(hexagon_vectorize_preferred_simd_mode): Add prototype.
	(hexagon_optimization_options): Remove.
	* hexagon.c (hexagon_va_start, hexagon_setup_incoming_varargs):
	Compile only for LINUX.
	(TARGET_PREFERRED_SIMD_MODE): Change to
	TARGET_VECTORIZE_PREFERRED_SIMD_MODE.
	(hexagon_preferred_simd_mode):
	Change to hexagon_vectorize_preferred_simd_mode.
	(descent_smallest): Disable TYPE_VECTOR_SUBPARTS case.
	(is_restrict_qualified): Remove prototoype.
	(hexagon_sched_dependencies_eval): Disable variable definitions
	used only by is_restrict_qualified sections.
	(hexagon_preferred_simd_mode): Add prototype.
	(hexagon_secondary_reload): Change struct reg_class for
	reg_class_t
	(hexagon_print_jump, hexagon_print_transfer)
	(hexagon_print_address, hexagon_print_unary_op)
	(hexagon_print_binary_op, hexagon_print_swapped_binary_op)
	(hexagon_print_binary_op_with_option, hexagon_print_trinary_op)
	(hexagon_print_vecexp, hexagon_print_rtx)
	(hexagon_print_condition hexagon_print_rtl_pseudo_asm): Remove
	const from operand definition.
	(hexagon_in_small_data_p): Cast g_switch_value.
	(hexagon_print_rtl_pseudo_asm, hexagon_gen_hintjr):
	Add extra parentheses.
	(hexagon_local_combine_immeidiate_pass): Add cast to comparison.
	(hexagon_is_floating_point_p): Change return type to int.
	(endloop_in_packet, slot2_occupied_p, hexagon_gen_hintjr):
	Change loop counter type to signed.
	(slot2_occupied_p): Correct typo in definition.
	(TARGET_RETURN_POPS_ARGS): Set to hook_int_tree_tree_int.
	(hexagon_load_got_register): Remove.
	(get_usable_reg_num): Disable.

2011-11-28  Julian Brown  <julian@codesourcery.com>

	gcc/
	* config/hexagon/hexagon.h (CONSTRAINT_LEN_FOR_R)
	(CONSTRAINT_LEN_FOR_I, CONSTRAINT_LEN_FOR_J, HEXAGON_CONSTRAINT_P)
	(HEXAGON_CONSTRAINT_LEN, HEXAGON_KOOKY_KONSTANT_LENS)
	(CONSTRAINT_LEN_FOR_K, HEXAGON_MEM_TYPE_LENS, CONSTRAINT_LEN_FOR_A)
	(CONSTRAINT_LEN, REG_CLASS_FROM_CONSTRAINT)
	(CONST_OK_FOR_CONSTRAINT_P, CONST_DOUBLE_OK_FOR_G)
	(CONST_DOUBLE_OK_FOR_LETTER_P, EXTRA_CONSTRAINT_FOR_Q)
	(EXTRA_CONSTRAINT_FOR_A, EXTRA_CONSTRAINT_STR)
	(EXTRA_MEMORY_CONSTRAINT, REG_OK_STRICT_P, REG_OK_FOR_BASE_P)
	(REG_OK_FOR_INDEX_P): Remove.
	(REGNO_OK_FOR_INDEX_P): Fix definition for Hexagon v4.
	* config/hexagon/predicates.md (conditional_dest_operand): Use
	hexagon_cond_mem_operand instead of hexagon_legitimate_address_p.
	(conditional_src_operand): Likewise.
	* config/hexagon/builtins.md: (Throughout) replace uses of
	CONST_OK_FOR_CONSTRAINT_P with satisfies_constraint_<foo>.
	Use newly-named contraints where appropriate.
	* config/hexagon/hexagon.md: (Throughout) use renamed constraints
	where appropriate.
	(constraints.md): Include.
	(movqi, movhi, movsi, movsf): Use hexagon_storeimm_mem_operand
	instead of hexagon_legitimate_address_p.
	(movqi_real_v4, movhi_real_v4, movsi_real_v4, movsf_real_v4):
	Comment out bad use of condition field.
	(cond_movqi, cond_movhi, cond_movsi, cond_movsf): Likewise.
	(define_splits): Use satisfies_constraint_<foo> instead of
	CONST_OK_FOR_CONSTRAINT_P.
	(addsi3_real_v4, subsi3_real_v4, andsi3_real_v4, iorsi3_real_v4):
	Use hexagon_rmw_mem_operand instead of hexagon_legitimate_address_p.
	(addqi3_memop, addqi3_memop2, addhi3_memop, addhi3_memop2)
	(subqi3_memop, subhi3_memop, andqi3_memop, andqi3_memop2)
	(andhi3_memop, andhi3_memop2, iorqi3_memop, iorqi3_memop2)
	(iorhi3_memop, iorhi3_memop2): Use hexagon_rmw_mem_operand instead
	of hexagon_legitimate_address_p.
	* config/hexagon/hexagon-protos.h (const_ok_for_s8s8)
	(const_ok_for_s32s8, const_ok_for_s8s32, const_ok_for_s32s16)
	(const_ok_for_s16s32, const_ok_for_onehot, hexagon_mem_operand)
	(hexagon_cond_mem_operand, hexagon_storeimm_mem_operand)
	(hexagon_rmw_mem_operand, hexagon_subinst_mem_operand)
	(hexagon_subinst_stack_mem_operand): Add prototypes.
	(hexagon_legitimate_address_p): Update prototype.
	* config/hexagon/constraints.md: New.
	* config/hexagon/hexagon.c (hexagon_reg_ok_for_base_p)
	(hexagon_reg_ok_for_index_p, hexagon_const_ok_for_constraint_p):
	Remove.
	(const_ok_for_s32s8, const_ok_for_s8s32, const_ok_for_s32s16)
	(const_ok_for_s16s32, const_ok_for_onehot): New functions.
	(hexagon_address_register_p, hexagon_ind_with_offset_address_p)
	(hexagon_ind_with_reg_offset_address_p)
	(hexagon_ind_with_scaled_reg_offset_address_p)
	(hexagon_post_modify_address_p, hexagon_absolute_address_p)
	(hexagon_absolute_with_scaled_reg_address_p, hexagon_mem_operand)
	(hexagon_cond_mem_operand, hexagon_storeimm_mem_operand)
	(hexagon_rmw_mem_operand, hexagon_subinst_mem_operand)
	(hexagon_subinst_stack_mem_operand): New functions.
	(hexagon_legitimate_address_p): Reimplement (in terms of
	hexagon_mem_operand).

2011-11-23  Joe Seymour  <jseymour@codesourcery.com>

	gcc/config/hexagon
	* hexagon.opt (mv1, mv2, mv3, mv4, mv5): Correct Alias from
	"march" to "march=".

2011-11-23  Joe Seymour  <jseymour@codesourcery.com>

	gcc/config/hexagon
	* hexagon.md (gpr_cond_jump, new_value_jump_tstbit)
	(compare_and_jump_tstbit): Replace duplicated code with
	call to hexagon_branch_hint.

2011-11-23  Joe Seymour  <jseymour@codesourcery.com>

	gcc
	* hooks.c (hook_int_const_tree_const_tree_0): New.
	* hooks.h (hook_int_const_tree_const_tree_0): New.
	* config.gcc (extra_options): Append g.opt for hexagon-elf and
	hexagon-linux.

	gcc/config/hexagon
	* hexagon.h (TARGET_OPTION_TRANSLATE_TABLE): Change to option
	aliases.
	(OVERRIDE_OPTIONS, OPTIMIZATION_OPTIONS)
	(UNITS_PER_SIMD_WORD, CONDITIONAL_REGISTER_USAGE)
	(FRAME_POINTER_REQUIRED, CAN_ELIMINATE, RETURN_POPS_ARGS)
	(FUNCTION_ARG_BOUNDARY, LEGITIMIZE_ADDRESS): Remove -- replaced
	by target hooks in hexagon.c.
	(INITIALIZE_TRAMPOLINE): Remove.
	(GO_IF_LEGITIMATE_ADDRESS): Remove.
	(CAN_DEBUG_WITHOUT_FP): Move to into
	TARGET_OPTION_OPTIMIZATION_TABLE.
	(hexagon_frame_info, hexagon_final_info)
	(machine_function, hexagon_reg_access, hexagon_mem_access)
	(hexagon_insn_info, hexagon_packet_info, hexagon_dependence):
	Move GTY before struct name.
	* hexagon.opt (mv1, mv2, mv3, mv4, mv5): Add
	Alias(march,hexagonvN).
	* elf.h (SWITCH_TAKES_ARG): Remove.
	(ASM_SPEC): Remove redundant %{v}.
	* hexagon.c (hexagon_falign): Change initialization value to
	HEXAGON_FALIGN_UNSPECIFIED.
	(TARGET_OPTION_OVERRIDE, TARGET_OPTION_OPTIMIZATION_TABLE)
	(TARGET_PREFERRED_SIMD_MODE, TARGET_CONDITIONAL_REGISTER_USAGE)
	(TARGET_FRAME_POINTER_REQUIRED, TARGET_CAN_ELIMINATE)
	(TARGET_RETURN_POPS_ARGS, TARGET_FUNCTION_ARG_BOUNDARY)
	(TARGET_LEGITIMATE_ADDRESS_P, TARGET_LEGITIMIZE_ADDRESS): Define
	target hooks.
	(hexagon_optimization_options): Change to struct
	default_options hexagon_option_optimization_table.
	(hexagon_preferred_simd_mode): New.
	(hexagon_function_arg_boundary): New.

2011-11-23  Julian Brown  <julian@codesourcery.com>

	* configure.ac: Add hexagon support.
	* configure: Regenerate.

	gcc/
	* configure.ac: Add hexagon support.
	* configure: Regenerate.
	* function.h (struct rtl_data): Add combine_in_progress,
	combine_completed fields, with suitable fixme.
	* combine.c (rest_of_handle_combine): Set above fields at
	appropriate times.

	libstdc++-v3/
	* configure.host: Add hexagon support.

	libiberty/
	* configure.ac: Add hexagon support.
	* configure: Regenerate.

	libgcc/
	* config.host: Add hexagon support.

2011-11-22  Joe Seymour  <jseymour@codesourcery.com>

	gcc
	* config.gcc: Add hexagon.

	gcc/config
	* hexagon: New Directory.
	* hexagon/hexagon.h: New.
	* hexagon/crti.asm: New.
	* hexagon/predicates.md: New.
	* hexagon/manual_builtins.def: New.
	* hexagon/manual_builtins.md: New.
	* hexagon/linux.h: New.
	* hexagon/crtn.asm: New.
	* hexagon/builtins.def: New.
	* hexagon/qdsp6_compat.h: New.
	* hexagon/linux-unwind.h: New.
	* hexagon/hexagon.md: New.
	* hexagon/builtins.md: New.
	* hexagon/t-hexagon: New.
	* hexagon/hexagon.opt: New.
	* hexagon/linux-atomic.c: New.
	* hexagon/hexagon-modes.def: New.
	* hexagon/libgcc-glibc.ver: New.
	* hexagon/elf.h: New.
	* hexagon/dinkumware.h: New.
	* hexagon/t-linux: New.
	* hexagon/vector.md: New.
	* hexagon/hexagon-protos.h: New.
	* hexagon/lib1funcs.asm: New.
	* hexagon/newlib.h: New.
	* hexagon/t-elf: New.
	* hexagon/hexagon.c: New.

2011-11-21  Joe Seymour  <jseymour@codesourcery.com>

	* config.guess: Update from upstream config.git
	(commit: 386c7218162c145f5f9e1ff7f558a3fbb66c37c5)
	* config.sub: Likewise.

2011-11-18  Nathan Sidwell  <nathan@codesourcery.com>

	gcc/
	* config/t-slibgcc-symbian (SHLIB_MAPFILES): Use libgcc_objdir.

2011-11-16  Tom de Vries  <tom@codesourcery.com>

	Issue #12387

	gcc/
	* ee.c (remove_redundant_extensions): Save max_reg_num () in n_regs.
	Use n_regs.

2011-11-15  Maxim Kuvyrkov  <maxim@codesourcery.com>

	gcc/
	* config/mips/netlogic.h (DRIVER_SELF_SPECS): Enable -msym32 for
	-mabi=64 by default.

2011-11-15  Joseph Myers  <joseph@codesourcery.com>

	gcc/
	* config/i386/i386elf.h (PREFERRED_DEBUGGING_TYPE): Remove.

2011-11-14  Tom de Vries  <tom@codesourcery.com>

	Issue #12436

	gcc/
	* config/mips/mips.c (mips16_check_branches): Set JUMP_LABEL of new_jump
	to label1.

2011-11-10  Sandra Loosemore  <sandra@codesourcery.com>

	* release-notes-csl.xml: Fix "FreeScale" typos in release notes.

2011-11-07  Meador Inge  <meadori@codesourcery.com>

	Issue #12323

	* release-notes-csl.xml: New note.

	Backport from FSF:

	gcc/
	2011-04-20  Easwaran Raman  <eraman@google.com>

	* cfgexpand.c (add_alias_set_conflicts): Add conflicts with a variable
	containing union type only with -fstrict-aliasing.

	gcc/testsuite/
	2011-04-20  Easwaran Raman  <eraman@google.com>

	* gcc.dg/stack-layout-1.c: New test.

2011-11-07  Kwok Cheung Yeung  <kcy@codesourcery.com>

	* release-notes-csl.xml: Use ColdFire+ name consistently.

2011-11-03  Julian Brown  <julian@codesourcery.com>

	Issue #12388

	Backport from FSF mainline:

	2011-09-07  Richard Sandiford  <richard.sandiford@linaro.org>

	PR target/49030
	gcc/
	* config/arm/arm-protos.h (maybe_get_arm_condition_code): Declare.
	* config/arm/arm.c (maybe_get_arm_condition_code): New function,
	reusing the old code from get_arm_condition_code.  Return ARM_NV
	for invalid comparison codes.
	(get_arm_condition_code): Redefine in terms of
	maybe_get_arm_condition_code.
	* config/arm/predicates.md (arm_comparison_operator): Use
	maybe_get_arm_condition_code.

	gcc/testsuite/
	* gcc.dg/torture/pr49030.c: New test.

	2011-09-09  Georg-Johann Lay  <avr@gjlay.de>

	PR target/49030
	gcc/testsuite/
	* gcc.dg/torture/pr49030.c: Run only if target int32plus.

	2011-09-22  Richard Sandiford  <richard.sandiford@linaro.org>

	gcc/
	* config/arm/predicates.md (expandable_comparison_operator): New
	predicate, extracted from...
	(arm_comparison_operator): ...here.
	* config/arm/arm.md (cbranchsi4, cbranchsf4, cbranchdf4, cbranchdi4)
	(cstoresi4, cstoresf4, cstoredf4, cstoredi4, movsicc, movsfcc)
	(movdfcc): Use expandable_comparison_operator.

	gcc/testsuite/
	* gcc.target/arm/cmp-1.c: New test.
	* gcc.target/arm/cmp-2.c: Likewise.

2011-11-02  Julian Brown  <julian@codesourcery.com>

	Issue #10896

	gcc/testsuite/
	* lib/target-supports.exp (add_options_for_large_stack): New.
	* gcc.dg/graphite/interchange-7.c: Use large_stack dg option.

	libstdc++/testsuite/
	* 25_algorithms/random_shuffle/moveable.cc: Use large_stack dg
	option.

2011-11-02  Julian Brown  <julian@codesourcery.com>

	gcc/testsuite/
	* gcc.c-torture/execute/20101011-1.c: Skip on bare-metal m68k.

2011-11-02  Julian Brown  <julian@codesourcery.com>

	gcc/
	* config/m68k/m68k.c (TARGET_OVERRIDE_OPTIONS_AFTER_CHANGE): Define.

2011-10-31  Paul Brook  <paul@codesourcery.com>

	Backport from FSF
	gcc/
	* cgraphunit.c: Don't mark clones as static constructors.

	gcc/testsuite/
	* gcc.dg/constructor-1.c: New test.

2011-10-26  Joseph Myers  <joseph@codesourcery.com>

	Backport from FSF:

	gcc/testsuite/
	2011-10-26  Joseph Myers  <joseph@codesourcery.com>

	* gcc.dg/graphite/run-id-1.c: Pass -Wl,--stack,12582912 option for
	Windows targets.

	2011-10-26  Joseph Myers  <joseph@codesourcery.com>

	* gcc.dg/tls/thr-cse-1.c: For i?86-*-mingw*, check for multiple
	calls.

2011-10-26  Joseph Myers  <joseph@codesourcery.com>

	Backport from FSF:

	gcc/testsuite/
	2011-10-26  Joseph Myers  <joseph@codesourcery.com>

	* gcc.target/i386/pad-4.c: Skip for Windows targets.

	2011-10-26  Joseph Myers  <joseph@codesourcery.com>

	* gcc.target/i386/pr37843-4.c: Allow for leading underscores on
	symbol names.

2011-10-25  Joseph Myers  <joseph@codesourcery.com>

	Backport from FSF:

	gcc/testsuite/
	2011-10-25  Joseph Myers  <joseph@codesourcery.com>

	* gcc.dg/format/ms_c90-printf-1.c, gcc.dg/format/ms_c90-scanf-1.c:
	Update expected messages.

2011-10-25  Kwok Cheung Yeung  <kcy@codesourcery.com>

	Issue #12354

	gcc/
	* config/m68k/m68k-devices.def: Add 51jg.
	* doc/invoke.texi (M680x0 Options): Document.

	* release-notes-csl.xml: Add note.

2011-10-21  Joseph Myers  <joseph@codesourcery.com>

	gcc/
	* config/sh/cs-sgxxlite-linux.h (SUBTARGET_OVERRIDE_OPTIONS): Test
	OPTION_UCLIBC not linux_uclibc.

2011-10-20  Joseph Myers  <joseph@codesourcery.com>

	Backport from FSF:

	gcc/testsuite/
	2011-10-20  Joseph Myers  <joseph@codesourcery.com>

	* gcc.dg/lto/pr46940_0.c (ASMNAME, ASMNAME2, STRING): Define.
	(_moz_foo, EXT__foo): Use ASMNAME.

2011-10-20  Joseph Myers  <joseph@codesourcery.com>

	Backport from FSF:

	gcc/testsuite/
	2011-10-20  Joseph Myers  <joseph@codesourcery.com>

	* lib/lto.exp (lto-execute): Use .exe suffix for test executable
	names.

2011-10-20  Joseph Myers  <joseph@codesourcery.com>

	Backport from FSF:

	gcc/testsuite/
	2011-10-20  Joseph Myers  <joseph@codesourcery.com>

	* gcc.dg/tree-prof/val-prof-7.c: Declare bzero instead of
	including <strings.h>.

	2011-10-20  Joseph Myers  <joseph@codesourcery.com>

	* gcc.target/i386/pr40906-1.c, gcc.target/i386/pr40906-2.c,
	gcc.target/i386/pr46226.c: Do not use
	-mno-accumulate-outgoing-args.

2011-10-19  Joseph Myers  <joseph@codesourcery.com>

	Backport from FSF:

	gcc/testsuite/
	2011-10-19  Joseph Myers  <joseph@codesourcery.com>

	* g++.dg/compat/struct-layout-1_generate.c: Also pass -mno-mmx
	-Wno-abi for i?86-*-mingw32* x86_64-*-mingw32* i?86-*-cygwin*.

2011-10-19  Joseph Myers  <joseph@codesourcery.com>

	Backport from FSF:

	gcc/testsuite/
	2011-10-06  Joern Rennecke <joern.rennecke@embecosm.com>

	* gcc.dg/pr47276.c (ASMNAME, ASMNAME2, STRING): Define.
	(__EI___vsyslog_chk, __EI_syslog, __EI_vsyslog): Use ASMNAME.  
	(syslog, vsyslog, __vsyslog_chk): Likewise.

	* gcc.dg/lto/20081222_1.c (ASMNAME, ASMNAME2, STRING): Define.
	(x, EXT_x): Use ASMNAME.

	* gcc.dg/torture/pr48044.c (ASMNAME, ASMNAME2, STRING): Define.
	(a, c): Use ASMNAME.

2011-10-19  Maxim Kuvyrkov  <maxim@codesourcery.com>

	gcc/
	* config.gcc (mips64*-*-linux*): Use N32 ABI by default for NetLogic
	toolchain.
	(mips64-netlogic-linux-gnu): Rename to mips64-nlm-linux-gnu.
	* config/mips/netlogic.h: Use N32 ABI by default.
	* config/mips/t-netlogic: Use default multilib configuration from
	t-linux64.

2011-10-18  Chung-Lin Tang  <cltang@codesourcery.com>

	Issue #12100
	* release-notes-csl.xml (Internal compiler error with NEON intrinsics):
	New note.

	Backport from mainline:

	gcc/
	2011-04-17  Chung-Lin Tang  <cltang@codesourcery.com>

	* config/arm/arm.c (neon_struct_mem_operand): Support POST_INC/PRE_DEC
	memory operands.

2011-10-17  Janis Johnson  <janisjo@codesourcery.com>

	gcc/testsuite/
	* gcc.target/powerpc/ppc-fpconv-3.c: Fix typo.
	* gcc.target/powerpc/ppc-fpconv-7.c: Likewise.
	* gcc.target/powerpc/ppc-fpconv-8.c: Likewise.

2011-10-17  Janis Johnson  <janisjo@codesourcery.com>

	Backport from FSF:

	2011-10-12  Janis Johnson  <janisjo@codesourcery.com>

	gcc/testsuite/
	* gcc.target/powerpc/warn-1.c: Skip if not powerpc_vsx_ok.
	* gcc.target/powerpc/warn-2.c: Ditto.

2011-10-17  Janis Johnson  <janisjo@codesourcery.com>

	Backport from FSF:

	2011-10-12  Janis Johnson  <janisjo@codesourcery.com>

	gcc/testsuite/
	* gcc.target/powerpc/ppc-fma-3.c: Require hard_float.
	* gcc.target/powerpc/ppc-fma-4.c: Likewise.
	* gcc.target/powerpc/ppc-fma-5.c: Likewise.
	* gcc.target/powerpc/ppc-fma-7.c: Likewise.
	* gcc.target/powerpc/ppc-fpconv-11.c: Likewise.
	* gcc.target/powerpc/ppc-fpconv-3.c: Likewise.
	* gcc.target/powerpc/ppc-fpconv-7.c: Likewise.
	* gcc.target/powerpc/ppc-fpconv-8.c: Likewise.
	* gcc.target/powerpc/ppc-pow.c: Likewise.
	* gcc.target/powerpc/recip-1.c: Likewise.
	* gcc.target/powerpc/recip-2.c: Likewise.
	* gcc.target/powerpc/recip-3.c: Likewise.
	* gcc.target/powerpc/recip-4.c: Likewise.
	* gcc.target/powerpc/recip-5.c: Likewise.


2011-10-17  Janis Johnson  <janisjo@codesourcery.com>

	Backport from FSF:
	gcc/testsuite/

	2011-09-29  Jiangning Liu  <jiangning.liu@arm.com>

	* gcc/testsuite/gcc.dg/tree-ssa/predcom-1.c: Explicitly turn on
	loop unroll and set max unroll times to 8.
	* gcc/testsuite/gcc.dg/tree-ssa/predcom-2.c: Likewise.
	* gcc/testsuite/gcc.dg/tree-ssa/predcom-3.c: Likewise.
	* gcc/testsuite/gcc.dg/tree-ssa/predcom-4.c: Likewise.
	* gcc/testsuite/gcc.dg/tree-ssa/predcom-5.c: Likewise.

	2011-09-21  Terry Guo  <terry.guo@arm.com>

	* gcc.target/arm/neon-thumb2-move.c: Skip the warning message
	on arch conflict when testing case on targets other than armv7-a.

	2011-09-19  Ian Bolton  <ian.bolton@arm.com>

	* gcc.dg/20100906-1.c: Use -fno-short-enums option for
	"target arm_eabi".

	2011-09-16  Terry Guo  <terry.guo@arm.com>

	* gcc.dg/tree-ssa/foldconst-3.c: Don't use short enums.

	2011-08-04  Ian Bolton  <ian.bolton@arm.com>

	* gcc.target/arm/vfp-1.c: no large negative offsets on Thumb2.

2011-10-13  Chung-Lin Tang  <cltang@codesourcery.com>

	Issue #11339
	Issue #12112
	* release-notes-csl.xml (ARM VFP9-S errata workaround): New note.

	gcc/
	* config/arm/arm.md (arch): Add vfp9, notvfp9 values. Add comments
	explaining use.
	(arch_enabled): Add cases for vfp9, notvfp9.
	* config/arm/vfp.md (divsf3_vfp,divdf3_vfp,sqrtsf2_vfp,sqrtdf2_vfp):
	Add alternative with early clobber destination, enabled by vfp9/notvfp9.

2011-10-12  Julian Brown  <julian@codesourcery.com>

	gcc/testsuite/
	* gcc.dg/torture/stackalign/builtin-apply-2.c: Skip for hard-float
	ARM.

2011-10-10  Janis Johnson  <janisjo@codesourcery.com>

	Backport from FSF:

	gcc/testsuite/
	2011-07-27  Ulrich Weigand  <Ulrich.Weigand@de.ibm.com>

	* lib/target-supports.exp (check_effective_target_mmap): Use
	check_function_available.

2011-10-10  Janis Johnson  <janisjo@codesourcery.com>

	Backport from FSF:

	2011-07-25  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>

	gcc/
	* doc/sourcebuild.texi (Effective-Target Keywords, Environment
	attributes): Document mmap.

	gcc/testsuite/
	* lib/target-supports.exp (check_effective_target_mmap): New proc.

	* gcc.c-torture/execute/loop-2f.c: Remove #ifdef __unix__.
	* gcc.c-torture/execute/loop-2g.c: Likewise.
	* gcc.c-torture/execute/loop-2f.x: Load target-supports.exp.
	Require mmap support.
	* gcc.c-torture/execute/loop-2g.x: Likewise.
	* gcc.dg/20030711-1.c: Replace dg-do target list by mmap.
	(MAP_ANON): Provide default.
	* gcc.dg/20050826-1.c: Likewise.
	* gcc.target/i386/pr36533.c: Likewise.
	* gcc.dg/vect/pr49038.c: Use dg-require-effective-target mmap.

2011-10-10  Janis Johnson  <janisjo@codesourcery.com>

	Backport from FSF:

	gcc/testuite/
	2011-09-06  Michael Meissner  <meissner@linux.vnet.ibm.com>

	* g++.dg/ext/altivec-17.C: Fix dg-error to match current compiler.

2011-10-10  Janis Johnson  <janisjo@codesourcery.com>

	Backport from FSF:

	gcc/testsuite
	2011-10-10  Janis Johnson  <janisjo@codesourcery.com>

	* gcc.dg/graphite/id-pr46845.c: Include powerpc for warning options.

2011-10-10  Janis Johnson  <janisjo@codesourcery.com>

	Backport from FSF:

	gcc/testsuite/
	2011-05-11  Alan Modra  <amodra@gmail.com>

	PR target/47755
	* gcc.target/powerpc/pr47755-2.c: Require vsx_hw.

2011-10-10  Julian Brown  <julian@codesourcery.com>

	gcc/
	* calls.c (emit_library_call_value_1): Pass a tree not an int for
	fourth argument of expand_shift.

2011-10-07  Kwok Cheung Yeung  <kcy@codesourcery.com>

	Issue #11914
	Issue #12259

	gcc/
	* config/m68k/m68k-devices.def: Add 51jf and 51qm.
	* doc/invoke.texi (M680x0 Options): Document.

	* release-notes-csl.xml: Add note.

2011-10-07  Julian Brown  <julian@codesourcery.com>

	Issue #12169

	* release-notes-csl.xml (ColdFire comparison fix): New note.

	gcc/
	* config/m68k/m68k.c (notice_update_cc): Tighten condition for
	setting CC_REVERSED for FP comparisons.

2011-10-04  Janis Johnson  <janisjo@codesourcery.com>

	Backport from FSF GCC 4.6:

	2011-07-14  Janis Johnson  <janisjo@codesourcery.com>

	gcc/testsuite
	* gcc.target/arm/pr40657-2.c: Remove -march.
	* gcc.target/arm/pr42235.c: Likewise.
	* gcc.target/arm/pr42495.c: Likewise.
	* gcc.target/arm/pr42574.c: Likewise.
	* gcc.target/arm/pr40956.c: Remove target-specific options.
	* gcc.target/arm/pr42505.c: Likewise.

	* lib/target-supports.exp (check_effective_target_arm_thumb1): New.
	* gcc.target/arm/mla-1.c: Skip for arm_thumb1, don't specify -march.

	* gcc.target/arm/pr42093.c: Use "-fno-reorder-blocks".

	* gcc.target/arm/pr39839.c: Don't specify -march, require thumb.
	* gcc.target/arm/thumb-branch1.c: Likewise.

	* gcc.target/arm/pr45701-1.c: Don't specify -march, require thumb.
	* gcc.target/arm/pr45701-2.c: Likewise.

	* gcc.target/arm/vfp-ldmdbs.c: Skip for soft float.
	* gcc.target/arm/vfp-ldmias.c: Likewise.
	* gcc.target/arm/vfp-ldmdbd.c: Likewise.
	* gcc.target/arm/vfp-stmdbs.c: Likewise.
	* gcc.target/arm/vfp-ldmiad.c: Likewise.
	* gcc.target/arm/vfp-stmias.c: Likewise.
	* gcc.target/arm/vfp-stmdbd.c: Likewise.
	* gcc.target/arm/vfp-stmiad.c: Likewise.

	* gcc.c-torture/compile/pr41679.c: Move from gcc.target/arm.
	* gcc.c-torture/compile/pr46883.c: Likewise.

	* gcc.target/arm/pr41679.c: Remove test directives in preparation
	for move to ../../gcc.c-torture/compile.
	* gcc.target/arm/pr46883.c: Likewise.

	* lib/target-supports.exp (check_effective_target_arm_dsp): New.
	* gcc.target/arm/wmul-1.c: Use it instead of specific -march.
	* gcc.target/arm/wmul-2.c: Likewise.
	* gcc.target/arm/wmul-3.c: Likewise.
	* gcc.target/arm/wmul-4.c: Likewise.

	2011-07-05  Janis Johnson  <janisjo@codesourcery.com>

	* gcc.target/arm/20031108-1.c: Require thumb1 or thumb2.
	* gcc.target/arm/pr40482.c: Likewise.
	* gcc.target/arm/stack-corruption.c: Likewise.

	* gcc.target/arm/ctz.c: Don't specify -march, require thumb2.
	* gcc.target/arm/pr42879.c: Likewise.
	* gcc.target/arm/pr45701-3.c: Likewise.

	* gcc.target/arm/thumb-bitfld1.c: Don't specify -march, require thumb1.

	* gcc.target/arm/scd42-3.c: Allow -march-xscale; skip if -mcpu
	is not xscale.

	* lib/target-supports-dg.exp (dg-require-effective-target): Return
	early if the test is already being skipped.

	* lib/target-supports.exp (add_options_for_arm_fp16): Renamed
	from add_options_for_arm_neon_fp16.
	(check_effective_target_arm_fp16_ok_nocache): Renamed from
	check_effective_target_arm_neon_fp16_ok_nocache.
	Check -mfpu and -mfloat-abi options from current multilib.
	Do not require neon support.
	(check_effective_target_arm_fp16_ok): Renamed from
	check_effecitve_target_arm_neon_fp16_ok.
	* g++.dg/ext/arm-fp16/arm-fp16-ops-5.C: Use new names for
	arm_neon_fp16_ok and arm_fp16.
	* g++.dg/ext/arm-fp16/arm-fp16-ops-6.C: Likewise.
	* gcc.dg/torture/arm-fp16-ops-5.c: Likewise.
	* gcc.dg/torture/arm-fp16-ops-6.c: Likewise.
	* gcc.target/arm/fp16-compile-vcvt.c: Likewise.

	* lib/scandump.exp (scan-dump, scan-dump-times, scan-dump-not,
	scan-dump-dem, scan-dump-dem-not): Treat a missing dump file as
	unresolved and report the reason to the log file.

	* lib/scanasm.exp (dg-scan, scan-assembler-times, scan-assembler-dem,
	scan-assembler-dem-not): For missing file, report unresolved with
	same message as for pass/fail, with reason reported in log file.

2011-10-03  Julian Brown  <julian@codesourcery.com>

	Issue #12170 (revised patch)

	gcc/
	* reload1.c (set_label_offsets): Force initial_p for labels
	receiving non-local gotos.

2011-10-04  Joseph Myers  <joseph@codesourcery.com>

	Backport from FSF:

	gcc/
	2011-10-04  Joseph Myers  <joseph@codesourcery.com>

	* config.gcc (i[34567]86-*-elf*, x86_64-*-elf*): Use
	i386/t-crtstuff.

2011-10-03  Janis Johnson  <janisjo@codesourcery.com>

	Issue #12254
	Revert:

	Issue #12170

	gcc/
	* reload1.c (set_label_offsets): Force initial_p for labels
	receiving non-local gotos.

2011-10-03  Julian Brown  <julian@codesourcery.com>

	Issue #12170

	gcc/
	* reload1.c (set_label_offsets): Force initial_p for labels
	receiving non-local gotos.

2011-10-03  Julian Brown  <julian@codesourcery.com>

	Backport from FSF:

	gcc/
	2011-03-15  Xinliang David Li  <davidxl@google.com>
	PR c/47837
	* tree-ssa-uninit.c (pred_chain_length_cmp): New function.
	(normalize_preds): New function.
	(is_use_properly_guarded): Normalize def predicates.

	gcc/testsuite/
	2011-03-15  Xinliang David Li  <davidxl@google.com>
	PR c/47837
	* gcc.dg/uninit-pred-7_d.c: New test.
	* gcc.dg/uninit-pred-8_d.c: New test.

2011-10-02  Tom de Vries  <tom@codesourcery.com>

	Issue #12157

	gcc/
	* reorg.c (redundant_insn): Handle label in delay slot.

2011-09-29  Catherine Moore  <clm@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2011-09-28  Catherine Moore  <clm@codesourcery.com>
	Issue #12036
	gcc/
	* config/mips/mips.c (WALK_INSNS): New macro.
	(OK_FOR_MIPS16_BRANCH_OFFSET): New macro.
	(mips16_count_matching_branches): New function.
	(walk_insns_forward): New function.
	(walk_insns_reverse): New function.
	(mips16_update_branch_info): New function.
	(mips16_zero_branch_info): New function.
	(mips16_check_branches): New function.
	(mips_reorg_process_instructions): Call mips16_check_branches.
	* config/mips.h (mips16_branch_info_t): New typedef.

	* release-notes-csl.xml: Document.

2011-09-22  Joseph Myers  <joseph@codesourcery.com>

	Backport from FSF:

	gcc/testsuite/
	2011-09-22  Joseph Myers  <joseph@codesourcery.com>

	* gcc.target/i386/pad-2.c, gcc.target/i386/pad-3.c,
	gcc.target/i386/pad-4.c, gcc.target/i386/pad-5a.c,
	gcc.target/i386/pad-5b.c, gcc.target/i386/pad-6a.c,
	gcc.target/i386/pad-6b.c, gcc.target/i386/pad-7.c,
	gcc.target/i386/pad-8.c, gcc.target/i386/pad-9.c,
	gcc.target/i386/pad-10.cm gcc.target/i386/vect-double-1.c: Skip if
	multilib options contain different -march= from dg-options.

2011-09-21  Joseph Myers  <joseph@codesourcery.com>

	Backport from FSF:

	libquadmath/
	2011-09-21  Joseph Myers  <joseph@codesourcery.com>

	* Makefile.am (FLAGS_TO_PASS): Define.
	* Makefile.in: Regenerate.

2011-09-19  Bernd Schmidt  <bernds@codesourcery.com>

	Merge from sg++ 4.5
	gcc/
	* opts.c (default_options_table): Remove -fshrink-wrap from -O1.
	* doc/invoke.texi (-fshrink-wrap): Not enabled by -O anymore.

	Merge from sg++ 4.5
	Issue #11469

	gcc/
	* regcprop.c (early_copyprop_hardreg_forward): Call
	split_all_insns.

	Merge from sg++ 4.5
	Issue #11372

	gcc/
	* passes.c (init_optimization_passes): Move the first
	pass_cprop_hardreg before split_after_reload.

2011-09-19  Paul Brook  <paul@codesourcery.com>

	Merge from sg++ 4.5
	Issue #11876

	gcc/
	* config/arm/predicates.md (shift_amount_operand): Check constant
	shift count is in range.
	(const_shift_operand): Remove.

2011-09-15  Joe Seymour  <jseymour@codesourcery.com>

	gcc/testsuite/
	* gcc.dg/vect/pr48172.c: Remove dg-do run.
	* gcc.dg/vect/pr48377.c: Likewise.

2011-09-12  Joe Seymour  <jseymour@codesourcery.com>

	Issue #11875

	Merge from Sourcery G++ 4.5:

	2009-08-26  Daniel Jacobowitz  <dan@codesourcery.com>

	       Issue #6131 - Enable additional optimizations by default in Lite
	       gcc/
	       (arm_optimization_options): Enable flag_promote_loop_indices.

2011-09-12  Zoran Jovanovic  <zoran.jovanovic@rt-rk.com>

	gcc/
	* common.opt (fuse-caller-save): New option.
	* final.c (collect_fn_hard_reg_usage, fn_hard_reg_usage_hash)
	(fn_hard_reg_usage_eq, get_fn_reg_set_usage, get_call_fndecl_rec)
	(get_call_fndecl, get_call_reg_set_usage): New function.
	(compute_alignments): Use collect_fn_hard_reg_usage.
	(struct fn_hard_reg_usage): New struct.
	(fn_hard_reg_usage_htab): New variable.
	* regs.h (get_call_reg_set_usage): Declare.
	* df-scan.c (df_get_call_refs): Use get_call_reg_set_usage.
	* caller-save.c (setup_save_areas, save_call_clobbered_regs): Use
	get_call_reg_set_usage.
	* resource.c (mark_set_resources, mark_target_live_regs): Use
	get_call_reg_set_usage.
	* ira-int.h (struct ira_allocno): Add crossed_calls_clobbered_regs
	field.
	(ALLOCNO_CROSSED_CALLS_CLOBBERED_REGS): Define.
	* ira-lives.c (process_bb_node_lives): Use get_call_reg_set_usage.
	Calculate ALLOCNO_CROSSED_CALLS_CLOBBERED_REGS.
	* ira-build.c (ira_create_allocno): Init
	ALLOCNO_CROSSED_CALLS_CLOBBERED_REGS.
	(create_cap_allocno, propagate_allocno_info)
	(propagate_some_info_from_allocno)
	(copy_info_to_removed_store_destinations): Handle
	ALLOCNO_CROSSED_CALLS_CLOBBERED_REGS.
	* ira-costs.c (ira_tune_allocno_costs_and_cover_classes): Use
	ALLOCNO_CROSSED_CALLS_CLOBBERED_REGS to adjust costs.
	* Makefile.in (GTFILES): add final.c.

2011-09-12  Julian Brown  <julian@codesourcery.com>

	gcc/testsuite/
	* gcc.c-torture/execute/20101011-1.c: Skip test on ARM if we have
	hardware division instructions.

2011-09-12  Paul Brook  <paul@codesourcery.com>

	Merge from SG++4.5
	2011-06-03  Paul Brook  <paul@codesourcery.com>
	gcc/
	* expmed.c (store_bit_field_1, store_bit_field): Add packedp argument.
	(warn_misaligned_bitfield): New function.
	(store_fixed_bit_field): Fix misaligned bitfields on and
	-fstrict-volatile-bitfields.
	(store_split_bit_field): Pass new argument.
	(extract_fixed_bit_field): Use warn_misaligned_bitfield.
	* calls.c (store_unaligned_arguments_into_pseudos): Pass new argument.
	* expr.c (store_field): Add packedp argument.
	(emit_group_store, copy_blkmode_from_reg, write_complex_part, 
	store_constructor_field, expand_expr_real_2): Pass new argument.
	(expand_assignment): Identify accesses to packed structures.
	* expr.h (store_bit_field): Update prototype.
	* ifcvt.c (noce_emit_move_insn): Pass new argument.
	* stmt.c (expand_return): Pass new argument.

2011-09-12  Nathan Sidwell  <nathan@codesourcery.com>

	Revert 2009-04-04  Sandra Loosemore  <sandra@codesourcery.com>
	it is no longer necessary.

	gcc/
	* tree-ssa-sink.c (sink_code_in_bb): Remove lexical block check code.

2011-09-12  Joe Seymour  <jseymour@codesourcery.com>

	Issue #11875
	
	Merge from Sourcery G++ 4.5:

	2009-03-09  Nathan Froyd  <froydnj@codesourcery.com>
	gcc/
	* tree-ssa-loop-promote.c: New file.
	* common.opt (fpromote-loop-indices): New option.
	* timevar.def (TV_TREE_LOOP_PROMOTE): New timevar.
	* Makefile.in (tree-ssa-loop-promote.o): New rule.
	(OBJS-comon): Include it.
	* tree-pass.h (pass_promote_short_indices): Declare.
	* passes.c (init_optimization_passes): Add it.
	* pointer-set.h (pointer_set_n_elements,
	pointer_set_clear,
	pointer_map_n_elements, pointer_map_clear): Declare.
	* pointer-set.c (pointer_set_n_elements,
	pointer_set_clear,
	pointer_map_n_elements, pointer_map_clear): Define.

	gcc/doc/
	* invoke.texi (-fpromote-loop-indices): New entry.

	gcc/testsuite/
	* gcc.dg/promote-short-1.c: New file.
	* gcc.dg/promote-short-2.c: New file.
	* gcc.dg/promote-short-3.c: New file.
	* gcc.dg/promote-short-4.c: New file.
	* gcc.dg/promote-short-5.c: New file.
	* gcc.dg/promote-short-6.c: New file.
	* gcc.dg/promote-short-7.c: New file.
	* gcc.dg/promote-short-8.c: New file.

	2009-03-31  Daniel Jacobowitz  <dan@codesourcery.com>
	gcc/
	* common.opt (fpromote-loop-indices): Add Optimization
	keyword.

	2009-04-08  Nathan Froyd  <froydnj@codesourcery.com>
	gcc/
	* tree-ssa-loop-promote.c
	(collection_promotion_candidates):
	Delay allocation and initialization of new promote_info
	until we know we have a candidate loop index.

	2009-04-09  Nathan Froyd  <froydnj@codesourcery.com>
	gcc/
	* tree-ssa-loop-promote.c (rebuild_with_promotion_1): Load
	a memory reference prior to promoting it.

	gcc/testsuite/
	* gcc.dg/promote-short-9.c: New test.

	2009-04-09  Nathan Froyd  <froydnj@codesourcery.com>
	gcc/testsuite/
	* gcc.dg/promote-short-3.c: XFAIL test for x86, m68k, sh,
	and mips.

	2009-04-13  Kazu Hirata  <kazu@codesourcery.com>
	gcc/testsuite/
	* gcc.dg/promote-short-3.c: XFAIL on fido.

	2010-08-25  Jie Zhang  <jie@codesourcery.com>

	Issue #9156

	gcc/
	* tree-ssa-loop-promote.c (insert_along_edge): Use
	gimple_stmt_iterator to add statement to basic block.

	gcc/testsuite/
	* gcc.dg/promote-short-13.c: New test.

2011-09-12  Joe Seymour  <jseymour@codesourcery.com>

	Issue #11868

	Merge from Sourcery G++ 4.5:

	2009-09-08  Paul Brook  <paul@codesourcery.com>
		    Daniel Jacobowitz  <dan@codesourcery.com>

	Issue #6027

	Merge submitted patches:
	http://gcc.gnu.org/ml/gcc-patches/2009-03/msg00250.html

	2009-02-02  J"orn Rennecke <amylaar@spamcop.net>

	gcc/
	* tree-ssa-pre.c (ppre_n_insert_for_speed_p): New function.
	* (do_partial_partial_insertion): Use it to throttle
	insert_into_preds_of_block calls.
	* common.opt (-ftree-pre-partial-partial-obliviously): New option.

	2009-01-15  J"orn Rennecke  <joern.rennecke@arc.com>

	gcc/
	* common.opt (ftree-pre-partial-partial): New option.
	* opts.c (decode_options): Initialize flag_tree_pre_partial_partial.
	* tree-ssa-pre.c (execute_pre): Use flag_tree_pre_partial_partial.

2011-09-12  Tom de Vries  <tom@codesourcery.com>

	gcc/
	* final.c (shorten_branches): Handle deleted label in delay slot.
	* emit-rtl.c (verify_rtl_sharing): Same.
	* cfglayout.c (reemit_insn_block_notes): Same.
	* reorg.c (try_merge_delay_insns): Same.
	(redundant_insn): Handle (deleted) label in delay slot.
	(first_real_insn_in_seq): New function.
	(relax_delay_slots): Use first_insn.
	* rtl.h (DELETED_NOTE_P): Define.

2011-09-10  Tom de Vries  <tom@codesourcery.com>

	Issue #12030

	gcc/
	* stmt.c (emit_case_bit_tests): Calculate total_prob.  Scale label
	probabilities to total_prob.  Don't set jump probabilities if profile
	absent.

2011-09-08  Julian Brown  <julian@codesourcery.com>

	Backport from FSF GCC 4.6 branch:

	PR c++/49260

	2011-08-02  Jason Merrill  <jason@redhat.com>

	gcc/
	* g++.dg/cpp0x/lambda/lambda-eh2.C: Change options.

	gcc/cp/
	* call.c (build_call_a): Set cp_function_chain->can_throw here.
	(build_cxx_call): Not here.

2011-09-08  Julian Brown  <julian@codesourcery.com>

	gcc/testsuite/
	* gcc.c-torture/execute/20101011-1.c (__aeabi_idiv0): New, for ARM
	EABI.

2011-09-08  Bernd Schmidt  <bernds@codesourcery.com>

	Issue #12105
	Backport from mainline:

	2011-05-25  Bernd Schmidt  <bernds@codesourcery.com>

	PR bootstrap/49160
	* libgcc2.h (__powisf2, __powidf2, __powitf2, __powixf2,
	__mulsc3, __muldc3, __mulxc3, __multc3, __divsc3, __divdc3,
	__divxc3, __divtc3): Wrap definitions in #ifndef.

2011-09-06  Bernd Schmidt  <bernds@codesourcery.com>

	Issue #12073

	gcc/
	* cfgcleanup.c (try_head_merge_bb): If get_condition returns
	NULL for a jump that is a cc0 insn, pick the previous insn for
	move_before.

	gcc/testsuite/
	* gcc.c-torture/compile/20110907.c: New file.

2011-09-06  Julian Brown  <julian@codesourcery.com>

	Issue #11871

	Merge from Sourcery G++ 4.5:

	gcc/
	* config/arm/arm.c (arm_option_optimization_table): Turn on
	unrolling by default at -O2+.
	(arm_slowmul_tune, arm_fastmul_tune, arm_strongarm_tune)
	(arm_xscale_tune, arm_9e_tune, arm_v6t2_tune, arm_cortex_tune)
	(arm_cortex_a5_tune, arm_cortex_a9_tune, arm_fa726te_tune):
	Initialise aggressive_unrolling field.
	(arm_option_override): Limit maximum unrolling level, or disable
	default unrolling if not desired for current tuning setting.
	* config/arm/arm-protos.h (tune_params): Add aggressive_unrolling
	parameter.

2011-09-06  Tom de Vries  <tom@codesourcery.com>

	Issue #11755

	gcc/
	* reorg.c (steal_delay_list_from_target): Fix handling
	of annullable insns.

2011-09-02  Julian Brown  <julian@codesourcery.com>

	Issue #11884

	Backport from FSF mainline:

	gcc/
	* config/arm/arm.c (arm_block_move_unaligned_straight)
	(arm_adjust_block_mem, arm_block_move_unaligned_loop)
	(arm_movmemqi_unaligned): New.
	(arm_gen_movmemqi): Support unaligned block copies.

2011-09-02  Julian Brown  <julian@codesourcery.com>

	Issue #11884

	Backport from FSF mainline:

	gcc/
	* config/arm/arm.c (arm_override_options): Add unaligned_access
	support.
	(arm_file_start): Emit attribute for unaligned access as
	appropriate.
	* config/arm/arm.md (UNSPEC_UNALIGNED_LOAD)
	(UNSPEC_UNALIGNED_STORE): Add constants for unspecs.
	(insv, extzv): Add unaligned-access support.
	(extv): Change to expander. Likewise.
	(extzv_t1, extv_regsi): Add helpers.
	(unaligned_loadsi, unaligned_loadhis, unaligned_loadhiu)
	(unaligned_storesi, unaligned_storehi): New.
	(*extv_reg): New (previous extv implementation).
	* config/arm/arm.opt (munaligned_access): Add option.
	* config/arm/constraints.md (Uw): New constraint.
	* expmed.c (store_bit_field_1): Adjust bitfield numbering according
	to size of access, not size of unit, when BITS_BIG_ENDIAN !=
	BYTES_BIG_ENDIAN. Don't use bitfield accesses for
	volatile accesses when -fstrict-volatile-bitfields is in effect.
	(extract_bit_field_1): Likewise.

2011-09-02  Julian Brown  <julian@codesourcery.com>

	Issue #11870

	Backport from FSF mainline:

	2011-03-22  Bernd Schmidt  <bernds@codesourcery.com>
		    Andrew Stubbs  <ams@codesourcery.com>

	gcc/
	* config/arm/vfp.md (arm_movdi_vfp): Enable only when not tuning
	for Cortex-A8.
	(arm_movdi_vfp_cortexa8): New pattern.
	* config/arm/neon.md (adddi3_neon, subdi3_neon, anddi3_neon,
	iordi3_neon, xordi3_neon): Add alternatives to discourage Neon
	instructions when tuning for Cortex-A8.  Set attribute "arch".
	* config/arm/arm.md: Move include arm-tune.md up a bit.
	(define_attr "arch"): Add "onlya8" and "nota8" values.
	(define_attr "arch_enabled"): Handle "onlya8" and "nota8".

2011-09-01  Julian Brown  <julian@codesourcery.com>

	Backport from FSF mainline (candidate patch):

	Richard Sandiford  <richard.sandiford@linaro.org>
	
	gcc/
	* calls.c (emit_library_call_value_1): Pad according to
	BLOCK_REG_PADDING rather than FUNCTION_ARG_PADDING.
	* config/arm/ar.c (arm_pad_arg_upwards): Remove special
	handling for HFmode libcall arguments.
	(arm_pad_reg_upwards): Use mode to determine padding when type
	is not available.

2011-09-01  Julian Brown  <julian@codesourcery.com>

	Backport from FSF mainline:

	2011-08-01  Julian Brown  <julian@codesourcery.com>

	gcc/
	* configure.ac (fixed-point): Add ARM support.
	* configure: Regenerate.
	* config/arm/arm.c (arm_fixed_mode_set): New struct.
	(arm_set_fixed_optab_libfunc): New.
	(arm_set_fixed_conv_libfunc): New.
	(arm_init_libfuncs): Initialise fixed-point helper libfuncs with
	ARM-specific names.
	(aapcs_libcall_value): Return sub-word-size fixed-point libcall
	return values in SImode.
	(arm_return_in_msb): Return fixed-point types in the msb.
	(arm_pad_reg_upwards, arm_pad_arg_upwards): Pad fixed-point
	types upwards.
	(arm_scalar_mode_supported_p): Support fixed-point modes.
	(arm_vector_mode_supported_p): Support vector fixed-point modes.
	* config/arm/arm.h (SHORT_FRACT_TYPE_SIZE, FRACT_TYPE_SIZE)
	(LONG_FRACT_TYPE_SIZE, LONG_LONG_FRACT_TYPE_SIZE)
	(SHORT_ACCUM_TYPE_SIZE, ACCUM_TYPE_SIZE, LONG_ACCUM_TYPE_SIZE)
	(LONG_LONG_ACCUM_TYPE_SIZE, MAX_FIXED_MODE_SIZE): Define.
	* config/arm/iterators.md (FIXED, ADDSUB, UQADDSUB, QADDSUB,
	QMUL): New mode iterators.
	(qaddsub_suf): New mode attribute.
	* config/arm/arm-modes.def (FRACT, UFRACT, ACCUM, UACCUM):
	Declare vector modes.
	* config/arm/predicates.md (sat_shift_operator): New predicate.
	* config/arm/arm-fixed.md: New.
	* config/arm/arm.md: Include arm-fixed.md.
	* config/arm/t-arm (MD_INCLUDES): Add arm-fixed.md.

	libgcc/
	* config.host (arm*-*-linux*, arm*-*-uclinux*, arm*-*-eabi*)
	(arm*-*-symbianelf*): Add t-fixedpoint-gnu-prefix makefile
	fragment.
	* config/arm/bpabi-lib.h (LIBGCC2_FIXEDBIT_GNU_PREFIX): Define.

	gcc/testsuite/
	* gcc.target/arm/fixed-point-exec.c: New test.

2011-09-01  Julian Brown  <julian@codesourcery.com>

	Backport from FSF mainline:

	2011-05-04  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	gcc/
	* calls.c (emit_library_call_value_1): Invoke
	promote_function_mode hook on libcall arguments.
	* explow.c (promote_function_mode, promote_mode): Handle TYPE
	argument being NULL.
	* targhooks.c (default_promote_function_mode): Lisewise.
	* config/s390/s390.c (s390_promote_function_mode): Likewise.
	* config/sparc/sparc.c (sparc_promote_function_mode): Likewise.

	* doc/tm.texi: Document that TYPE argument might be NULL.

2011-09-01  Julian Brown  <julian@codesourcery.com>

	Backport from FSF mainline:
	
	2011-08-01  H.J. Lu  <hongjiu.lu@intel.com>

	* calls.c (emit_library_call_value_1): Declare size only if
	BLOCK_REG_PADDING is defined.

2011-09-01  Julian Brown  <julian@codesourcery.com>

	Backport from FSF mainline:

	2011-08-01  Julian Brown  <julian@codesourcery.com>

	* calls.c (emit_library_call_value_1): Support padding for
	libcall arguments and return values.
	* config/arm/arm.c (arm_pad_arg_upward): Pad half-float values
	downwards in big-endian mode.

2011-09-01  Julian Brown  <julian@codesourcery.com>

	Backport from FSF mainline:

	2011-08-01  Julian Brown  <julian@codesourcery.com>

	* Makefile.in (LIBGCC_VER_FIXEDPOINT_GNU_PREFIX): New.
	(libgcc-std.ver.in): Use above.
	* fixed-bit.h (LIBGCC2_FIXEDBIT_GNU_PREFIX): Define, if
	LIBGCC2_GNU_PREFIX is defined.  Use instead of
	  LIBGCC2_GNU_PREFIX throughout file.
	* config/t-fixedpoint-gnu-prefix: New file.
	* config/t-gnu-prefix (LIBGCC_VER_FIXEDPOINT_GNU_PREFIX): Set.
	* libgcc-std.ver.in (fixed-point routines): Use __FIXPTPFX__
	instead of __PFX__.

2011-09-01  Julian Brown  <julian@codesourcery.com>

	Backport from FSF mainline:

	2011-05-27  Bernd Schmidt  <bernds@codesourcery.com>

	PR bootstrap/49173
	libgcc/
	* config/t-slibgcc-darwin (SHLIB_MAPFILES): Look for
	libgcc-std.ver in the build directory.
	* config/s390/t-linux (SHLIB_MAPFILES): Likewise.
	* config/sh/t-linux (SHLIB_MAPFILES): Likewise.

2011-09-01  Julian Brown  <julian@codesourcery.com>

	Backport from FSF mainline:

	2011-05-26  Bernd Schmidt  <bernds@codesourcery.com>

	gcc/
	* Makefile.in (srcdirify): Change order so that libgcc_objdir is
	substituted first.

2011-09-01  Julian Brown  <julian@codesourcery.com>

	Backport from FSF mainline:

	2011-05-25  Bernd Schmidt  <bernds@codesourcery.com>

	gcc/
	* libgcc2.h (__NW, __NDW): Define using a __gnu_ prefix if
	LIBGCC2_GNU_PREFIX is defined.
	(__N): New macro.
	(__powisf2, __powidf2, __powitf2, __powixf2, __bswapsi2,
	__bswapdi2, __mulsc3, __muldc3, __mulxc3, __multc3, __divsc3,
	__divdc3, __divxc3, __divtc3, __udiv_w_sdiv, __clear_cache,
	__enable_execute_stack, __clz_tab): Define using __N.
	(__absvsi2, __negvsi2, __addvsi3, __subvsi3, __mulvsi3):
	Likewise if COMPAT_SIMODE_TRAPPING_ARITHMETIC.
	* target.def (libfunc_gnu_prefix): New hook.
	* doc/tm.texi.in (LIBGCC2_GNU_PREFIX): Document.
	(TARGET_LIBFUNC_GNU_PREFIX): Add hook.
	* doc/tm.texi: Regenerate.
	* system.h (LIBGCC2_GNU_PREFIX): Poison.
	* optabs.c (gen_libfunc): Take the libfunc_gnu_prefix hook into
	account.
	(gen_interclass_conv_libfunc, gen_intraclass_conv_libfunc):
	Likewise. (init_optabs): Likewise for the bswap libfuncs.
	* tree.c (build_common_builtin_nodes): Likewise for complex
	multiply and divide.
	* config/t-slibgcc-elf-ver (SHLIB_MAPFILES): Use
	$$(libgcc_objdir).
	* config/t-slibgcc-sld (SHLIB_MAPFILES): Likewise.
	* libgcc-std.ver: Remove.
	* Makefile.in (srcdirify): Handle $$(libgcc_objdir).
	* config/frv/t-linux (SHLIB_MAPFILES): Use $$(libgcc_objdir) for
	libgcc-std.ver.
	* config/i386/t-linux (SHLIB_MAPFILES): Likewise.
	* config/mips/t-slibgcc-irix (SHLIB_MAPFILES): Likewise.
	* config/rs6000/t-aix43 (SHLIB_MAPFILES): Likewise.
	* config/rs6000/t-aix52 (SHLIB_MAPFILES): Likewise.
	* config/sparc/t-linux (SHLIB_MAPFILES): Likewise.
	* config/i386/t-linux (SHLIB_MAPFILES): Likewise.
	* config/i386/t-linux (SHLIB_MAPFILES): Likewise.
	* config/fixed-bit.h (FIXED_OP): Define differently depending on
	LIBGCC2_GNU_PREFIX. All uses changed not to pass leading
	underscores. (FIXED_CONVERT_OP, FIXED_CONVERT_OP2): Likewise.

	libgcc/
	* libgcc-std.ver.in: New file.
	* Makefile.in (LIBGCC_VER_GNU_PREFIX,
	LIBGCC_VER_SYMBOLS_PREFIX): New variables.
	(libgcc-std.ver): New rule.
	* config/t-gnu-prefix: New file.

2011-09-01  Julian Brown  <julian@codesourcery.com>

	Backport from FSF mainline:

	2011-08-01  Julian Brown  <julian@codesourcery.com>

	gcc/
	* tree-ssa-sccvn.c (copy_reference_ops_from_ref): Support
	FIXED_CST.

2011-09-01  Julian Brown  <julian@codesourcery.com>

	Backport from FSF mainline:

	2011-08-01  Julian Brown  <julian@codesourcery.com>

	gcc/
	* final.c (output_addr_const): Print fixed-point constants as
	decimal not hex (avoiding an assembler overflow warning for
	negative byte constants).

2011-09-01  Julian Brown  <julian@codesourcery.com>

	Backport from FSF mainline:

	2011-08-01  Julian Brown  <julian@codesourcery.com>

	gcc/
	* optabs.c (prepare_cmp_insn): Use correct biasing for
	fixed-point comparison helpers.

2011-09-01  Julian Brown  <julian@codesourcery.com>

	Issue #11863

	gcc/testsuite/
	* gcc.target/arm/div64-unwinding.c: New test.

2011-09-01  Nathan Sidwell  <nathan@codesourcery.com>

	Port from sgxx 4.5:

	2011-07-08  Kwok Cheung Yeung  <kcy@codesourcery.com>
	Issue #6223
	Issue #6234
	Issue #9116

	gcc/
	* config/m68k/m68k-devices.def: Add 51ag, 51je and 51mm.
	* doc/invoke.texi (M680x0 Options): Document.

2011-08-31  Maxim Kuvyrkov  <maxim@codesourcery.com>

	Merge from netlogic-4_6 branch:

	2011-01-03  Bernd Schmidt  <bernds@codesourcery.com>
	gcc/
	* reorg.c
	(steal_delay_list_from_target): Check JUMP_LABELs for returns.
	Use simplejump_or_return_p.
	(fill_simple_delay_slots): Likewise.

2011-08-31  Maxim Kuvyrkov  <maxim@codesourcery.com>

	Merge from netlogic-4_6 branch:

	2011-05-18  Bernd Schmidt  <bernds@codesourcery.com>
	gcc/
	* tree-pass.h (pass_cprop_hardreg2): Declare.
	* passes.c (init_optimization_passes): Move first cprop pass before
	thread_prologue_and_epilogue_insns, add the second in the original
	place of the first.
	* regcprop.c: Include "dce.h".
	(gate_handle_cprop): Allow only if HAVE_simple_return.
	(gate_handle_cprop2): New function.
	(early_cprop_hardregs_forward): New function.
	(pass_cprop_hardreg2): New.
	* function.c (prepare_shrink_wrap): Also stop search when we see
	another set of the destination reg.
	* Makefile.in (regcprop.o): Update dependencies.

2011-08-31  Maxim Kuvyrkov  <maxim@codesourcery.com>

	Merge from netlogic-4_6 branch:

	2011-05-18  Bernd Schmidt  <bernds@codesourcery.com>
	gcc/
	* function.c (prepare_shrink_wrap): Also stop search when we see
	another set of the destination reg.

2011-08-31  Maxim Kuvyrkov  <maxim@codesourcery.com>

	Merge from netlogic-4_6 branch:

	2010-01-26  Tom de Vries  <tom@codesourcery.com>
	gcc/
	* reorg.c (update_label_uses): Handle case that JUMP_LABEL (insn) is not
	a label.

2011-08-31  Maxim Kuvyrkov  <maxim@codesourcery.com>

	Merge from netlogic-4_6 branch:

	2011-05-16  Maxim Kuvyrkov  <maxim@codesourcery.com>
	gcc/
	* config/mips/xlp.md: New pipeline description (from NetLogic).
	* config/mips/mips.md (processor): Add "xlp".
	(include "xlp.md"): New include.
	* config/mips/mips.c (mips_cpu_info_table, mips_rtx_cost_data):
	Add entries for NetLogic XLP.
	* config/mips/mips.h (MIPS_ISA_LEVEL_SPEC): Handle XLP.

	2011-08-02  Maxim Kuvyrkov  <maxim@codesourcery.com>
	XLP tuning from NetLogic.
	gcc/
	* config/mips/mips.c (mips_cpu_info, mips_rtx_cost_data): Update.
	(mips_issue_rate, mips_multipass_dfa_lookahead): Handle XLP.
	* config/mips/mips.h (TUNE_XLP): Define.
	(MIPS_ISA_LEVEL_OPTION_SPEC): Update.

2011-08-31  Maxim Kuvyrkov  <maxim@codesourcery.com>

	Merge from CodeBench 4.5 / netlogic-4_6 branch:

	2011-xx-xx  Bernd Scmidt  <bernds@codesourcery.com>
	gcc/
	* function.c (record_hard_reg_uses, record_hard_reg_uses_1): New static
	functions.
	(requires_stack_frame_p): New arg prologue_used.
	(thread_prologue_and_epilogue_insns): Compute the set of registers
	used in the prologue, and pass it to requires_stack_frame_p.

	gcc/
	* function.c (thread_prologue_and_epilogue_insns): Emit information
	about shrink wrapping in the dump file.

	gcc/testsuite/
	* gcc.target/i386/sw-1.c: New test.

	gcc/
	* function.c (record_hard_reg_uses_1, requires_stack_frame_p)
	(thread_prologue_and_epilogue_insns): Correct previous commit.

2011-08-31  Maxim Kuvyrkov  <maxim@codesourcery.com>

	Merge from CodeBench 4.5 / netlogic-4_6 branch:

	2011-xx-xx  Bernd Scmidt  <bernds@codesourcery.com>
	gcc/
	(bb_active_p): New function.
	* function.c (prepare_shrink_wrap): New function.
	(thread_prologue_and_epilogue_insns): Call prepare_shrink_wrap, and
	use bb_active_p to recompute the last_bb_active flag.

2011-08-31  Maxim Kuvyrkov  <maxim@codesourcery.com>

	Merge from CodeBench 4.5 / netlogic-4_6 branch:

	2011-xx-xx  Bernd Scmidt  <bernds@codesourcery.com>
	gcc/
	* doc/tm.texi (RETURN_ADDR_REGNUM): Document.
	* doc/md.texi (simple_return): Document pattern.
	(return): Add a sentence to clarify.
	* doc/rtl.texi (simple_return): Document.
	* doc/invoke.texi (Optimize Options): Document -fshrink-wrap.
	* common.opt (fshrink-wrap): New.
	* opts.c (default_options_table): Enable it for -O1 and above.
	* gengenrtl.c (special_rtx): SIMPLE_RETURN is special.
	* rtl.h (ANY_RETURN_P): New macro.
	(global_rtl_index): Add GR_SIMPLE_RETURN.
	(simple_return_rtx): New macro.
	* genemit.c (gen_exp): SIMPLE_RETURN has a unique rtx.
	(gen_expand, gen_split): Use ANY_RETURN_P.
	* rtl.c (copy_rtx): SIMPLE_RETURN is shared.
	* emit-rtl.c (verify_rtx_sharing): Likewise.
	(skip_consecutive_labels): Return the argument if it is a return rtx.
	(classify_insn): Handle both kinds of return.
	(init_emit_regs): Create global rtl for ret_rtx and simple_return_rtx.
	* df-scan.c (df_uses_record): Handle SIMPLE_RETURN.
	* rtl.def (SIMPLE_RETURN): New.
	* rtlanal.c (tablejump_p): Check JUMP_LABEL for returns.
	* final.c (final_scan_insn): Recognize both kinds of return.
	* reorg.c (function_return_label, function_simple_return_label): New
	static variables.
	(end_of_function_label): Remove.
	(simplejump_or_return_p): New static function.
	(find_end_label): Add a new arg, KIND.  All callers changed.
	Depending on KIND, look for a label suitable for return or
	simple_return.
	(make_return_insns): Make corresponding changes.
	(get_jump_flags): Check JUMP_LABELs for returns.
	(follow_jumps): Likewise.
	(get_branch_condition): Check target for return patterns rather
	than NULL.
	(own_thread_p): Likewise for thread.
	(steal_delay_list_from_target): Check JUMP_LABELs for returns.
	Use simplejump_or_return_p.
	(fill_simple_delay_slots): Likewise.
	(optimize_skip): Likewise.
	(fill_slots_from_thread): Likewise.
	(relax_delay_slots): Likewise.
	(dbr_schedule): Adjust handling of end_of_function_label for the
	two new variables.
	* ifcvt.c (find_if_case_1): Take care when redirecting jumps to the
	exit block.
	(dead_or_predicable): Change NEW_DEST arg to DEST_EDGE.  All callers
	changed.  Ensure that the right label is passed to redirect_jump.
	* jump.c (condjump_p, condjump_in_parallel_p, any_condjump_p,
	returnjump_p): Handle SIMPLE_RETURNs.
	(delete_related_insns): Check JUMP_LABEL for returns.
	(redirect_target): New static function.
	(redirect_exp_1): Use it.  Handle any kind of return rtx as a label
	rather than interpreting NULL as a return.
	(redirect_jump_1): Assert that nlabel is not NULL.
	(redirect_jump): Likewise.
	(redirect_jump_2): Handle any kind of return rtx as a label rather
	than interpreting NULL as a return.
	* dwarf2out.c (compute_barrier_args_size_1): Check JUMP_LABEL for
	returns.
	* function.c (emit_return_into_block): Remove useless declaration.
	(record_hard_reg_sets, frame_required_for_rtx, gen_return_pattern,
	requires_stack_frame_p): New static functions.
	(emit_return_into_block): New arg SIMPLE_P.  All callers changed.
	Generate either kind of return pattern and update the JUMP_LABEL.
	(thread_prologue_and_epilogue_insns): Implement a form of
	shrink-wrapping.  Ensure JUMP_LABELs for return insns are set.
	* print-rtl.c (print_rtx): Handle returns in JUMP_LABELs.
	* cfglayout.c (fixup_reorder_chain): Ensure JUMP_LABELs for returns
	remain correct.
	* resource.c (find_dead_or_set_registers): Check JUMP_LABELs for
	returns.
	(mark_target_live_regs): Don't pass a return rtx to next_active_insn.
	* basic-block.h (force_nonfallthru_and_redirect): Declare.
	* sched-vis.c (print_pattern): Add case for SIMPLE_RETURN.
	* cfgrtl.c (force_nonfallthru_and_redirect): No longer static.  New arg
	JUMP_LABEL.  All callers changed.  Use the label when generating
	return insns.

	* config/i386/i386.md (returns, return_str, return_cond): New
	code_iterator and corresponding code_attrs.
	(<return_str>return): Renamed from return and adapted.
	(<return_str>return_internal): Likewise for return_internal.
	(<return_str>return_internal_long): Likewise for return_internal_long.
	(<return_str>return_pop_internal): Likewise for return_pop_internal.
	(<return_str>return_indirect_internal): Likewise for
	return_indirect_internal.
	* config/i386/i386.c (ix86_expand_epilogue): Expand a simple_return as
	the last insn.
	(ix86_pad_returns): Handle both kinds of return rtx.
	* config/arm/arm.c (use_simple_return_p): new function.
	(is_jump_table): Handle returns in JUMP_LABELs.
	(output_return_instruction): New arg SIMPLE.  All callers changed.
	Use it to determine which kind of return to generate.
	(arm_final_prescan_insn): Handle both kinds of return.
	* config/arm/arm.md (returns, return_str, return_simple_p,
	return_cond): New code_iterator and corresponding code_attrs.
	(<return_str>return): Renamed from return and adapted.
	(arm_<return_str>return): Renamed from arm_return and adapted.
	(cond_<return_str>return): Renamed from cond_return and adapted.
	(cond_<return_str>return_inverted): Renamed from cond_return_inverted
	and adapted.
	* config/arm/thumb2.md (thumb2_<return_str>return): Renamed from
	thumb2_return and adapted.
	* config/arm/arm.h (RETURN_ADDR_REGNUM): Define.
	* config/arm/arm-protos.h (use_simple_return_p): Declare.
	(output_return_instruction): Adjust declaration.
	* config/mips/mips.c (mips_expand_epilogue): Generate a simple_return
	as final insn.
	* config/mips/mips.md (simple_return): New expander.
	(*simple_return, simple_return_internal): New patterns.
	* config/sh/sh.c (barrier_align): Handle return in a JUMP_LABEL.
	(split_branches): Don't pass a null label to redirect_jump.

2011-08-31  Maxim Kuvyrkov  <maxim@codesourcery.com>

	Merge from CodeBench 4.5 / netlogic-4_6 branch:

	2011-xx-xx  Bernd Scmidt  <bernds@codesourcery.com>
	gcc/
	* gengenrtl.c (special_rtx): PC, CC0 and RETURN are special.
	* genemit.c (gen_exp): Handle RETURN.
	* emit-rtl.c (verify_rtx_sharing): Likewise.
	(init_emit_regs): Create pc_rtx, ret_rtx and cc0_rtx specially.
	* rtl.c (copy_rtx): RETURN is shared.
	* rtl.h (enum global_rtl_index): Add GR_RETURN.
	(ret_rtx): New.
	* jump.c (redirect_exp_1): Don't use gen_rtx_RETURN.
	* config/s390/s390.c (s390_emit_epilogue): Likewise.
	* config/rx/rx.c (gen_rx_rtsd_vector): Likewise.
	* config/cris/cris.c (cris_expand_return): Likewise.
	* config/m68k/m68k.c (m68k_expand_epilogue): Likewise.
	* config/rs6000/rs6000.c (rs6000_make_savres_rtx,
	rs6000_emit_epilogue, rs6000_output_mi_thunk): Likewise.
	* config/picochip/picochip.c (picochip_expand_epilogue): Likewise.
	* config/h8300/h8300.c (h8300_push_pop, h8300_expand_epilogue):
	Likewise.
	* config/v850/v850.c (expand_epilogue): Likewise.
	* config/bfin/bfin.c (bfin_expand_call): Likewise.
	* config/arm/arm.md (epilogue): Likewise.
	* config/sparc/sparc.c (sparc_struct_value_rtx): Rename ret_rtx
	variable to ret_reg.

2011-08-31  Maxim Kuvyrkov  <maxim@codesourcery.com>

	Merge from CodeBench 4.5 / netlogic-4_6 branch:

	2011-05-16  Bernd Schmidt  <bernds@codesourcery.com>
	gcc/
	* ifcvt.c (cond_exec_process_insns): Disallow converting a block
	that contains the prologue.
	gcc/testsuite/
	* gcc.c-torture/compile/20110322-1.c: New test.

2011-08-31  Maxim Kuvyrkov  <maxim@codesourcery.com>

	Update merged patch to what checked in upstream and merge
	the following follow up patch.

	2011-04-25  Maxim Kuvyrkov  <maxim@codesourcery.com>
 		Eric Botcazou <ebotcazou@adacore.com>

	* combine.c (combine_simplify_rtx): Avoid mis-simplifying conditionals
	for STORE_FLAG_VALUE==-1 case.

2011-08-31  Sandra Loosemore  <sandra@codesourcery.com>

	Merge from SG++ 4.5/backport from mainline:

	2011-07-13  Sandra Loosemore  <sandra@codesourcery.com>

	Issue #11564

	* release-notes-csl.xml (Map file name demangling bug fix):
	New note.

	gcc/
	* configure.ac (demangler_in_ld): Default to yes.
	* configure: Regenerated.
	* collect2.c (main): When HAVE_LD_DEMANGLE is defined, don't mess with
	COLLECT_NO_DEMANGLE, and just pass --demangle and --no-demangle options
	straight through to ld.  When HAVE_LD_DEMANGLE is not defined, set
	COLLECT_NO_DEMANGLE in a way that has the intended effect on Windows.

	2011-07-24  Sandra Loosemore  <sandra@codesourcery.com>

	gcc/
	Backport from mainline:

	2011-07-24  H.J. Lu  <hongjiu.lu@intel.com>

	PR bootstrap/49835
	* collect2.c (demangle_flag): Removed.

2011-08-31  Meador Inge  <meadori@codesourcery.com>

	Issue #12083 - Merge from Sourcery G++ 4.5

	gcc/
	* config/rs6000/t-cs-eabi
	(MULTILIB_OPTIONS): Add 'mno-powerpc-gfxopt'.
	(MULTILIB_DIRNAMES): Add 'nogfxopt'.
	(MULTILIB_EXCEPTIONS): Add new exceptions for 'mno-power-gfxopt'.
	(MULTILIB_MATCHES): Added 'mcpu=' matches for CPUs that do *not*
	support the PowerPC Graphics instructions.
	* config/rs6000/t-cs-eabi-lite
	(MULTILIB_OPTIONS): Add 'mno-powerpc-gfxopt'.
	(MULTILIB_DIRNAMES): Add 'nogfxopt'.
	(MULTILIB_EXCEPTIONS): Add new exceptions for 'mno-power-gfxopt'.
	(MULTILIB_MATCHES): Added 'mcpu=' matches for CPUs that do *not*
	support the PowerPC Graphics instructions.

2011-08-31  Nathan Sidwell  <nathan@codesourcery.com>

	Merge from Sourcery G++ 4.5:
 
	2009-10-06  Paul Brook  <paul@codesourcery.com>
	Issue #3869
        gcc/
	* target.def (TARGET_WARN_FUNC_RESULT): Define hook.
	* doc/tm.texi.in (TARGET_WARN_FUNC_RESULT): New hook.
	* doc/tm.texi: Rebuilt.
	* tree-cfg.h (execute_warn_function_return): Use
	targetm.warn_func_result.
	* config/arm/arm.c (TARGET_WARN_FUNC_RESULT): Define hook.
	(arm_warn_func_result): New function.

	gcc/testsuite/
	 * gcc.target/arm/naked-3.c: New test.

2011-08-31  Nathan Sidwell  <nathan@codesourcery.com>

	# Issue 10472
	gcc/testsuite/
	* gcc.target/arm/tlscall.c: New.

2011-08-31  Bernd Schmidt  <bernds@codesourcery.com>

	Issue #12073

	Backport from mainline:
	2011-05-04  Bernd Schmidt  <bernds@codesourcery.com>

	PR rtl-optimization/47612
	* df-problems.c (can_move_insns_across): Don't pick a cc0 setter
	as the last insn of the sequence to be moved.

2011-08-30  Joseph Myers  <joseph@codesourcery.com>

	Issue #11864

	Merge from SG++ 4.5:

	2009-07-01  Joseph Myers  <joseph@codesourcery.com>

	Issue #4168

	gcc/
	* gcc.c (using_libgcc, executing_linker): New.
	(execute): Check that libgcc.a exists in the multilib directory
	when linking.
	(process_command): Set using_libgcc to 0 for -nodefaultlibs,
	-nostdlib and -B options.
	(main): Set executing_linker when processing spec that may run the
	linker.

2011-08-30  Joseph Myers  <joseph@codesourcery.com>

	Issue #11859

	gcc/
	* gcc.c (do_self_spec): Don't set license_checked here.
	(driver_handle_option): Set it here for TARGET_FLEXLM instead.

2011-08-29  Maxim Kuvyrkov  <maxim@codesourcery.com>

	Port delay slot improvements from Sourcery CodeBench GCC 4.5:

	2010-11-20  Tom de Vries  <tom@codesourcery.com>
	gcc/
        * reorg.c (has_opposite_duplicate): New function.
	* reorg.c (steal_delay_list_from_target, fill_slots_from_thread): Use
        new function.
	* reorg.c (steal_delay_list_from_target): Allow stealing from delay slot
        of return jump.
	* reorg.c (steal_delay_list_from_target): Add other_thread and
        own_opposite_thread function parameters.
        * reorg.c (fill_slots_from_thread): Additional function arguments for
        steal_delay_list_from_target.
        * reorg.c (fill_slots_from_thread): Add own_opposite_thread function
        parameter.
        * reorg.c (fill_simple_delay_slots, fill_eager_delay_slots): Additional
        function argument for fill_slots_from_thread.

	2010-11-25  Tom de Vries  <tom@codesourcery.com>
	* release-notes-csl.xml: Add delay slot filling release note.

	2010-12-13  Tom de Vries  <tom@codesourcery.com>
	gcc/
	* hooks.c (hook_int_void_0): New function.
	* target.h (struct gcc_target): New substruct target_align with field
	align_insns.
	* final.c (shorten_branches, final_scan_insn): Handle label in delay
	slot.
	* reorg.c (emit_delay_sequence, delete_from_delay_slot)
	(try_merge_delay_insns, fill_simple_delay_slots, fill_eager_delay_slots)
	* reorg.c (delay_list_has_label): New function.
	* reorg.c (fill_slots_from_thread): Detect when label in delay slot is
	safe and insert it.
	* reorg.c (relax_delay_slots): Remove unused labels in delay slots.
	* emit-rtl.c (verify_rtl_sharing): Handle label in delay slot.
	* cfglayout.c (reemit_insn_block_notes): Handle label in delay slot.
	* target-def.h (TARGET_ALIGN_INSNS, TARGET_ALIGN_HOOKS): Add define.
	* target-def.h (TARGET_INITIALIZER): Use TARGET_ALIGN_HOOKS.
	* config/mips/mips.md (define_peephole2): Add peephole to convert
	zero_extend into and.
	* config/mips/mips.c (mips_align_insns): New function.
	* config/mips/mips.c (TARGET_ALIGN_INSNS): Redefine as mips_align_insns.
	* doc/tm.texi (TARGET_ALIGN_INSNS): Add deftypefn.

	gcc/
	* hooks.h (hook_int_void_0): Add prototype.

	2010-12-15  Tom de Vries  <tom@codesourcery.com>
	gcc/
	* reorg.c (fill_eager_delay_slots): Recompute own_target,
	fallthrough_insn and own_fallthrough when required.

	2011-01-12  Tom de Vries  <tom@codesourcery.com
	gcc/
	* reorg.c (fill_slots_from_thread): Fix handling of
	targetm.target_align.align_insns == 0.

	2011-01-12  Tom de Vries  <tom@codesourcery.com
	Issue #10308
	gcc/
	* config/mips/mips.c (mips_align_insns): Disable label in delay slot.

	2011-02-15  Tom de Vries  <tom@codesourcery.com>
	gcc/
	* resource.c (struct target_info): Add label field.
	* resource.c (find_basic_block): New parameter label.
	* resource.c (find_basic_block): Set label.
	* resource.c (get_block): New function.
	* resource.c (mark_target_live_regs): Use get_block.
	* resource.c (mark_target_live_regs, clear_hashed_info_for_insn): Pass
	extra argument to find_basic_block.
	* resource.c (mark_target_live_regs): Set label field.

	2011-02-15  Tom de Vries  <tom@codesourcery.com>
	gcc/
	* reorg.c (redundant_insn): Add missing incr_ticks_for_insn.

	2011-02-15  Tom de Vries  <tom@codesourcery.com>
	gcc/
	* reorg.c (update_label_uses): New function.

	2011-02-15  Tom de Vries  <tom@codesourcery.com>
	gcc/
	* reorg.c (fill_slots_from_thread): Add update_block call for
	duplicate.
	* reorg.c (fill_slots_from_thread): Add update_label_uses calls around
	delete_related_insns call.
	* reorg.c (fill_slots_from_thread): Replace delete_related_insns (label)
	with remove_insn and setting of INSN_DELETED_P.
	* reorg.c (fill_slots_from_thread): Use duplicate rather than trial in
	delay slot.
	* reorg.c (fill_slots_from_thread): Remove ineffective copy of label.

	2011-02-15  Tom de Vries  <tom@codesourcery.com>
	gcc/
	* config/mips/mips.c (mips_align_insns): Re-enable label in delay slot.

2011-08-28  Maxim Kuvyrkov  <maxim@codesourcery.com>

	Merge MODE_INDEX_REG_CLASS from Sourcery CodeBench 4.5:

	2007-02-16  Richard Sandiford  <richard@codesourcery.com>
	gcc/
	* Makefile.in (postreload.o): Depend on addresses.h.
	* addresses.h (index_reg_class, ok_for_index_p_1): New functions.
	(regno_ok_for_index_p): New function.
	* postreload.c: Include addresses.h.
	(reload_combine): Use index_reg_class instead of INDEX_REG_CLASS.
	* ira-costs.c (ok_for_index_p_nonstrict): Add a mode argument.
	Use ok_for_index_p_1 instead of REGNO_OK_FOR_INDEX_P.
	(record_address_regs): Use index_reg_class instead of INDEX_REG_CLASS.
	Update calls to ok_for_index_p_nonstrict.
	* regrename.c (scan_rtx_address): Use regno_ok_for_index_p instead of
	REGNO_OK_FOR_INDEX_P and index_reg_class instead of INDEX_REG_CLASS.
	(replace_oldest_value_addr): Likewise.
	* reload.c (find_reloads_address): Use index_reg_class instead
	of INDEX_REG_CLASS.  Do not push an index register reload if
	index_reg_class returns NO_REGS.
	(find_reloads_address_1): Use index_reg_class instead
	of INDEX_REG_CLASS and regno_ok_for_index_p instead of
	REGNO_OK_FOR_INDEX_P.
	* doc/tm.texi (MODE_INDEX_REG_CLASS): Document new macro.
	(REGNO_MODE_OK_FOR_INDEX_P): Likewise.

	2010-07-23  Maxim Kuvyrkov  <maxim@codesourcery.com>
	gcc/
	* regcprop.c (replace_oldest_value_addr): Use regno_ok_for_index_p.

	2011-08-29  Maxim Kuvyrkov  <maxim@codesourcery.com>
	gcc/
	* doc/tm.texi.in: Update.

2011-08-28  Maxim Kuvyrkov  <maxim@codesourcery.com>

	Enable ColdFire multilibs for GNU/Linux

	gcc/
	* config/m68k/t-linux (M68K_MLIB_CPU): Add ColdFire CPUs.

2011-08-27  Tom de Vries  <tom@codesourcery.com>

	gcc/
	Port from NetLogic branch:
	2011-05-16  Maxim Kuvyrkov  <maxim@codesourcery.com>
	Port from Sourcery CodeBench GCC 4.5:

	2011-02-25  Tom de Vries  <tom@codesourcery.com>
	gcc/
	* tree-ssa-loop-ivopts.c (may_eliminate_iv): Fix boundary checks.
	* testsuite/gcc.dg/tree-ssa/ivopts-max.c: New test.

	2011-02-25  Tom de Vries  <tom@codesourcery.com>
	gcc/
	* tree-ssa-loop-ivopts.c (struct cost_pair): Add comp field.
	(set_use_iv_cost): Add comp parameter.
	(set_use_iv_cost): Use comp parameter to init comp field.
	(determine_use_iv_cost_generic, determine_use_iv_cost_address)
	(determine_use_iv_cost_condition): Add comp argument to set_use_iv_cost
	call.
	(may_eliminate_iv): Add comp parameter and set.
	(determine_use_iv_cost_condition): Add comp argument to may_eliminate_iv
	call.
	(determine_use_iv_cost_condition): Reset comp if too expensive.
	(rewrite_use_compare): Use compare from comp field of cp.

	2011-02-25  Tom de Vries  <tom@codesourcery.com>
	gcc/
	* tree-ssa-loop-ivopts.c (fold_build_plus): New function factored out of
	add_autoinc_candidates.
	(add_autoinc_candidates): Use fold_build_plus.

	2011-02-25  Tom de Vries  <tom@codesourcery.com>
	gcc/
	* tree-ssa-loop-ivopts.c (niter_for_exit): Return COND_EXPR if
	!integer_zerop (desc->may_be_zero).
	(cand_valid_pointer_at_use_p, get_lt_bound, iv_elimination_compare_lt):
	New function.
	(may_eliminate_iv): Use iv_elimination_compare_lt.

	2011-03-25  Tom de Vries  <tom@codesourcery.com>
	* release-notes-csl.xml (Improved loop optimizer): New note.
	gcc/
	* tree-ssa-loop-ivopts.c (struct ivopts_data): New field
	loop_single_exit_p.
	(robust_plus, fold_plus, fold_diff_to_ssa_name): New function.
	(fold_build_plus): Use robust_plus.
	(cand_valid_pointer_at_use_p, get_lt_bound): Remove function.
	(get_use_lt_bound): New function.
	(iv_elimination_compare_lt): Use get_use_lt_bound.  Use
	fold_diff_to_ssa_name.  Add detailed comment.  Handle loop test that
	exits loop if true.  Fix incorrect handling of positive and negative
	step.  Allow only equal step to be handled.  Handle LE_EXPR exit tests.
	Only allow source level pointer iterator.  Check if loop bound is
	reached.
	(may_eliminate_iv): Remove superfluous tests for TYPE_OVERFLOW_WRAPS.
	(may_eliminate_iv): Restructure code realted to call to
	iv_elimination_compare_lt and add comment.
	(tree_ssa_iv_optimize_loop): Always compute single_dom_exit (loop).
	Init data->loop_single_exit_p.

2011-08-25  Julian Brown  <julian@codesourcery.com>

	Issue #11885, #10448

	Merge from Linaro GCC 4.5:

	Chung-Lin Tang  <cltang@codesourcery.com>

	gcc/
	* emit-rtl.c (immed_double_const): Allow wider than
	2*HOST_BITS_PER_WIDE_INT mode constants when they are
	representable as a single const_int RTX.

	gcc/testsuite/
	* gcc.target/arm/pr48183.c: New test.

2011-08-23  Bernd Schmidt  <bernds@codesourcery.com>

	gcc/
	* config/mips/linux.h (SUBTARGET_OVERRODE_OPTIONS):
	Correct merge error; use OPTION_UCLIBC rather than linux_uclibc.

	gcc/
	Port from Netlogic branch:
	2011-05-19  Tom de Vries  <tom@codesourcery.com>
	Port from Sourcery CodeBench GCC 4.5:

	2010-10-20  Tom de Vries  <tom@codesourcery.com>
	gcc/
	* config/mips/constraints.md (YE): New constraint.
	* config/mips/mips-ftypes.def (MIPS_SI_FTYPE_VPOINTER_SI)
	(MIPS_DI_FTYPE_VPOINTER_DI, MIPS_SI_FTYPE_VPOINTER_SI_SI)
	(MIPS_DI_FTYPE_VPOINTER_DI_DI):	New function type.
	* config/mips/mips.md (UNSPEC_COMPARE_AND_SWAP_ACQ)
	(UNSPEC_COMPARE_AND_SWAP_REL, UNSPEC_SWAP_ACQ, UNSPEC_SWAP_REL): New
        UNSPEC constant.
        * config/mips/mips.md (sync_cmp, sync_acquire_barrier)
        (sync_atomic_insn): New attribute.
        * config/mips/mips.md (sync_insn1): Add new value 'neg' to attribute.
	* config/mips/sync.md (sync_add<mode>, sync_sub<mode>)
	(sync_old_add<mode>, sync_old_sub<mode>, sync_new_add<mode>)
	(sync_new_sub<mode>, sync_lock_test_and_set<mode>):
	Change define_insn into define_expand.
	* config/mips/sync.md (sync_add_ll_sc<mode>, sync_add_ldadd<mode>)
	(sync_sub_ll_sc<mode>, sync_sub_ldadd<mode>, sync_old_add_ll_sc<mode>)
	(sync_old_add_ldadd<mode>, sync_old_sub_ll_sc<mode>)
	(sync_old_sub_ldadd<mode>, sync_new_add_ll_sc, gen_sync_new_sub_ll_sc)
	(mips_swap_ll_sc<mode>, mips_swap<mode>)
        (mips_val_compare_and_swap<d>_acq, mips_val_compare_and_swap<d>_rel)
        (mips_bool_compare_and_swap<d>_acq, mips_bool_compare_and_swap<d>_rel)
        (mips_swap<d>_acq, (mips_swap<d>_rel): New define_insn.
	* config/mips/mips-protos.h (mips_output_atomic): New prototype.
	* config/mips/mips.c (MIPS_BUILTIN_ATOMIC): New	builtin type.
	* config/mips/mips.c (mips_print_operand): New format identifier 'b'.
        * config/mips/mips.c (mips_sync_insn1_template): Handle neg.
        * config/mips/mips.c (mips_process_sync_loop): Handle sync_cmp, don't
        emit sync for xlp.
        * config/mips/mips.c (mips_sync_loop_insns): Handle atomic insns.
	* config/mips/mips.c (mips_builtin_avail_swap)
	(mips_builtin_avail_swapd, mips_builtin_avail_ll_sc)
	(mips_builtin_avail_lld_scd): New function.
	* config/mips/mips.c (ATOMIC_BUILTIN): New define.
	* config/mips/mips.c (__builtin_mips_swap_acq)
	(__builtin_mips_swap_rel, __builtin_mips_swapd_acq)
	(__builtin_mips_swapd_rel, __builtin_mips_val_compare_and_swap_acq)
	(__builtin_mips_val_compare_and_swap_rel)
	(__builtin_mips_val_compare_and_swapd_acq)
	(__builtin_mips_val_compare_and_swapd_rel)
	(__builtin_mips_bool_compare_and_swap_acq)
	(__builtin_mips_bool_compare_and_swap_rel)
	(__builtin_mips_bool_compare_and_swapd_acq)
	(__builtin_mips_bool_compare_and_swapd_rel): Declare builtin.
	* config/mips/mips.c (mips_build_vpointer_type): New function.
	* config/mips/mips.c (MIPS_ATYPE_VPOINTER): New define.
	* config/mips/mips.c (mips_expand_builtin_atomic): New function.
	* config/mips/mips.c (mips_expand_builtin): Handle
	MIPS_BUILTIN_ATOMIC using mips_expand_builtin_atomic.
	* config/mips/mips.c (mips_process_atomic, mips_output_atomic): New
	function.
	* config/mips/mips.h (TARGET_XLR, TARGET_XLP, GENERATE_SWAP)
        (GENERATE_LDADD): New define.
	* testsuite/gcc.target/mips/sync.c: New file.

	* config/mips/mips.md (enum "processor"): Add xlp.

2011-08-23  Julian Brown  <julian@codesourcery.com>

	* gcc/config/arm/nocrt0.h: Add missing file (from ARM multilib
	settings).

2011-08-04  Julian Brown  <julian@codesourcery.com>

	Revert:

	Merge from Sourcery G++ 4.5:

	Mark Mitchell  <mark@codesourcery.com>
	Joseph Myers  <joseph@codesourcery.com>
	Mark Shinwell  <shinwell@codesourcery.com>
	Vladimir Prus  <vladimir@codesourcery.com>
	Paul Brook  <paul@codesourcery.com>

	gcc/
	* config.gcc (arm-wrs-linux-gnueabi, i586-wrs-linux-gnu,
	mips-wrs-linux-gnu, powerpc-wrs-linux-gnu):
	Handle new targets.
	* config/arm/t-wrs-linux, config/arm/wrs-linux.h,
	config/i386/t-wrs-linux, config/i386/wrs-linux.h,
	config/i386/wrs-linux.opt, config/mips/t-wrs-linux,
	config/mips/wrs-linux.h, config/rs6000/t-wrs-linux,
	config/rs6000/wrs-linux.h: New.
	* config/mips/t-octeon-elf (MULTILIB_OPTIONS, MULTILIB_DIRNAMES,
	MULTILIB_EXCEPTIONS): Add Octeon II multilibs.

2011-08-04  Julian Brown  <julian@codesourcery.com>

	Revert:

	Merge from Sourcery G++ 4.5:	

	2009-05-15  Joseph Myers  <joseph@codesourcery.com>
	Merge from Sourcery G++ 4.3:
	NOT ASSIGNED TO FSF
	COPYRIGHT CAVIUM
	gcc/
	* config/mips/octeon-elf-unwind.h, config/mips/octeon-elf.h,
	config/mips/octeon.h, config/mips/t-octeon-elf: New.
	* config.gcc: Handle mips64octeon*-wrs-elf*.
	(mips-wrs-linux-gnu): Use mips/octeon.h.
	* config/mips/mips-protos.h (octeon_output_shared_variable): New.
	* config/mips/mips.c (octeon_handle_cvmx_shared_attribute,
	octeon_select_section, octeon_unique_section,
	octeon_output_shared_variable): New.
	(mips_attribute_table): Add cvmx_shared.
	(mips_in_small_data_p): Check for cvmx_shared attribute.
	libgcc/
	* config.host: Handle mips64octeon*-wrs-elf*.

2011-08-04  Julian Brown  <julian@codesourcery.com>

	Revert:

	Merge from Sourcery G++ 4.5:

	Kazu Hirata  <kazu@codesourcery.com>

	gcc/
	* config.gcc (arm*-*-linux*): Handle enable_extra_asa_multilibs.
	* config/arm/t-asa: New.

2011-08-04  Nathan Sidwell  <nathan@codesourcery.com>

	Merge from Sourcery G++ 4.5
	
	Issue #8915, 10472
	gcc/
	* doc/invoke.texi (ARM Options): Document -mtls-dialect option.
	* doc/install.texi (with-tls): Document.
	* config.gcc (arm*-*-linux*): Default with_tls.
	(with_tls): New.
	* config/arm/arm.c (target_tls_dialect): New.
	(enum tls_reloc): Add TLS_DESCSEQ.
	(arm_override_options): Process target_tls_dialect_switch value.
	(arm_call_tls_get_addr): Clean up.
	(arm_cannot_copy_insn_p): Check for tlscall.
	(arm_tls_descseq_addr): New.
	(legitimize_tls_address): Add tlsdesc support.
	(arm_emit_tls_decoration): Likewise.
	* config/arm/arm.h (TARGET_ARM_TLS, TARGET_GNU_TLS): New.
	(enum arm_tls_type): New.
	(target_tls_dialect): New.
	(OPTION_DEFAULT_SPECS): Add tls-dialect.
	* config/arm/arm.opt (mtls-dialect): New switch.
	* config/arm/arm.md (R1_REGNUM): New.
	(tlscall): New.

	gcc/testsuite/
	* gcc.target/arm/tlscall.c: New.

2011-08-02  Nathan Sidwell  <nathan@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2010-07-09  Sandra Loosemore  <sandra@codesourcery.com>
		    Mark Shinwell  <shinwell@codesourcery.com>
		    Joseph Myers  <joseph@codesourcery.com>

	gcc/
	* doc/invoke.texi (-falign-arrays): Document.
	* function.h (alignment_for_aligned_arrays): Declare.
	* function.c (get_stack_local_alignment): Use it.
	(alignment_for_aligned_arrays): Define.
	* cfgexpand.c (get_decl_align_unit): Use it here, too.
	* common.opt (-falign-arrays): New.
	* varasm.c (assemble_variable): Use alignment_for_aligned_arrays,
	and use it irrespective of whether DATA_ALIGNMENT is defined.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:
	
	2010-06-12  Jie Zhang  <jie@codesourcery.com>

	gcc/
	* config/arm/vfp.md (arm_movsi_vfp): Set neon_type correctly
	for neon_ldr and neon_str instructions.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	Jie Zhang  <jie@codesourcery.com>

	Issue #7122

	gcc/
	* config/arm/vfp.md (movdf_vfp): Add load double 0.0 case.
	(thumb2_movdf_vfp): Likewise. Require that one of the operands be a
	register.
	* config/arm/constraints.md (D0): New constraint.
	
	gcc/testsuite/
	* gcc.target/arm/neon-load-df0.c: New test.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:
	
	Mark Shinwell  <shinwell@codesourcery.com>

	gcc/
	* config/arm/vfp.md (*arm_movsi_vfp, *thumb2_movsi_vfp)
	(*arm_movdi_vfp, *thumb2_movdi_vfp, *movsf_vfp, *thumb2_movsf_vfp)
	(*movdf_vfp, *thumb2_movdf_vfp, *movsfcc_vfp, *thumb2_movsfcc_vfp)
	(*movdfcc_vfp, *thumb2_movdfcc_vfp): Add neon_type.
	* config/arm/arm.md (neon_type): Update comment.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2008-03-25  Maxim Kuvyrkov  <maxim@codesourcery.com>
		    Julian Brown  <julian@codesourcery.com>

	Merge from MIPS:

	gcc/
	* config/mips/mips-protos.h (mips_dspalu_bypass_p): Add prototype.
	* config/mips/mips.c (dspalu_bypass_table): New.
	(mips_dspalu_bypass_p): New.
	* config/mips/mips.md (dspmac, dspmacsat, accext, accmod, dspalu)
	(dspalusat): Add insn types.
	* config/mips/mips-dsp.md (add<DSPV:mode>3)
	(mips_add<DSP:dspfmt1>_s_<DSP:dspfmt2>)
	(sub<DSPV:mode>3, mips_sub<DSP:dspfmt1>_s_<DSP:dspfmt2>, mips_addsc)
	(mips_addwc, mips_modsub, mips_raddu_w_qb, mips_absq_s_<DSPQ:dspfmt2>)
	(mips_precrq_qb_ph, mips_precrq_ph_w, mips_precrq_rs_ph_w)
	(mips_precrqu_s_qb_ph, mips_preceq_w_phl, mips_preceq_w_phr)
	(mips_precequ_ph_qbl, mips_precequ_ph_qbr, mips_precequ_ph_qbla)
	(mips_precequ_ph_qbra, mips_preceu_ph_qbl, mips_preceu_ph_qbr)
	(mips_preceu_ph_qbla, mips_preceu_ph_qbra, mips_shll_<DSPV:dspfmt2>)
	(mips_shll_s_<DSPQ:dspfmt2>, mips_shll_s_<DSPQ:dspfmt2>, mips_shrl_qb)
	(mips_shra_ph, mips_shra_r_<DSPQ:dspfmt2>, mips_bitrev, mips_insv)
	(mips_repl_qb, mips_repl_ph, mips_cmp<DSPV:dspfmt1_1>_eq_<DSPV:dspfmt2>)
	(mips_cmp<DSPV:dspfmt1_1>_lt_<DSPV:dspfmt2>)
	(mips_cmp<DSPV:dspfmt1_1>_le_<DSPV:dspfmt2>, mips_cmpgu_eq_qb)
	(mips_cmpgu_lt_qb, mips_cmpgu_le_qb, mips_pick_<DSPV:dspfmt2>)
	(mips_packrl_ph, mips_wrdsp, mips_rddsp): Change type to dspalu.
	(mips_dpau_h_qbl, mips_dpau_h_qbr, mips_dpsu_h_qbl, mips_dpsu_h_qbr)
	(mips_dpaq_s_w_ph, mips_dpsq_s_w_ph, mips_mulsaq_s_w_ph)
	(mips_maq_s_w_phl, mips_maq_s_w_phr, mips_maq_sa_w_phr): Set type to
	dspmac.
	(mips_dpaq_sa_l_w, mips_dpsq_sa_l_w, mips_maq_sa_w_phl): Set type to
	dspmacsat.
	(mips_extr_w, mips_extr_r_w, mips_extr_rs_w, mips_extp, mips_extpdp):
	Set type to accext.
	(mips_shilo, mips_mthlip): Set type to accmod.
	* config/mips/mips-dspr2.md (mips_absq_s_qb, mips_addu_s_ph)
	(mips_adduh_r_qb): Set type to dspalusat.
	(mips_addu_ph, mips_adduh_qb, mips_append, mips_balign)
	(mips_cmpgdu_eq_qb, mips_cmpgdu_lt_qb, mips_cmpgdu_le_qb)
	(mips_precr_qb_ph, mips_precr_sra_ph_w, mips_precr_sra_r_ph_w)
	(mips_prepend, mips_shra_qb, mips_shra_r_qb, mips_shrl_ph)
	(mips_subu_ph, mips_subuh_qb, mips_subuh_r_qb, mips_addqh_ph)
	(mips_addqh_r_ph, mips_addqh_w, mips_addqh_r_w, mips_subqh_ph)
	(mips_subqh_r_ph, mips_subqh_w, mips_subqh_r_w): Set type to dspalu.
	(mips_dpa_w_ph, mips_dps_w_ph, mips_mulsa_w_ph, mips_dpax_w_ph)
	(mips_dpsx_w_ph, mips_dpaqx_s_w_ph, mips_dpsqx_s_w_ph): Set type to
	dspmac.
	(mips_subu_s_ph): Set type to dspalusat.
	(mips_dpaqx_sa_w_ph, mips_dpsqx_sa_w_ph): Set type to dspmacsat.

	Merge from MIPS:

	2007-11-06  David Ung  <davidu@mips.com>

	gcc/
	* config/mips/mips.h (AC1HI_REGNUM, AC1LO_REGNUM, AC2HI_REGNUM)
	(AC2LO_REGNUM, AC3HI_REGNUM, AC3LO_REGNUM): Define constants.

	2008-03-25  Maxim Kuvyrkov  <maxim@codesourcery.com>
		    Julian Brown  <julian@codesourcery.com>

	gcc/
	* config/mips/74k.md: (r74k_dsp_alu, r74k_dsp_alu_sat, r74k_dsp_mac)
	(r74k_dsp_mac_sat, r74k_dsp_acc_ext, r74k_dsp_acc_mod): New insn
	reservations.
	(r74k_dsp_mac, r74k_dsp_mac_sat, r74k_int_mult, r74k_int_mul3)
	(r74k_dsp_mac, r74k_dsp_mac_sat): New bypasses.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:
	
	Julian Brown  <julian@codesourcery.com>

	Issue #11669

	gcc/
	* config/mips/mips.md (MIPS16_T_REGNUM): New constant.
	(tablejump): Don't use for MIPS16_SHORT_JUMP_TABLES.
	(casesi): New.
	(casesi_internal_mips16): New.
	* config/mips/mips.h (TARGET_MIPS16_SHORT_JUMP_TABLES): Update
	comment.
	(CASE_VECTOR_MODE): Use ptr_mode unconditionally.
	(CASE_VECTOR_SHORTEN_MODE): Define.
	(ASM_OUTPUT_ADDR_DIFF_ELT): Output word-sized addr_diff_elts when
	necessary for MIPS16_SHORT_JUMP_TABLES.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2011-06-27  Paul Brook  <paul@codesourcery.com>

	gcc/
	* except.c (switch_to_exception_section): Place tables for
	DECL_ONE_ONLY functions in comdat groups.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	Joseph Myers  <joseph@codesourcery.com>

	gcc/
	* config.gcc (arm*-*-eabi* | arm*-*-nucleuseabi* |
	arm*-*-symbianelf*): Handle --enable-extra-brewmp-multilibs.
	* config/arm/t-brewmp-eabi: New.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2011-06-16  Catherine Moore  <clm@codesourcery.com>

	Issue #11516

	gcc/
	* config/mips/mips.h (BASE_DRIVER_SELF_SPECS): -m14ke*
	implies -mdspr2.
	* config/mips/mips.c (mips_cpu_info_table): Add m14ke and -m14kec.
	* doc/invoke.texi: Document.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:
	
	Maciej W. Rozycki  <macro@codesourcery.com>
	Julian Brown  <julian@codesourcery.com>

	Issue #10390

	gcc/
	* config/mips/mips.c (mips16_local_function_p): Also reject weak
	and linkonce definitions.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	Maciej W. Rozycki  <macro@codesourcery.com>
	Julian Brown  <julian@codesourcery.com>

	Issue #10390

	gcc/
	* config/mips/mips.c (mips16_local_alias): Use
	LOCAL_LABEL_PREFIX for the symbol generated.
	(mips16_build_function_stub): Declare stub once-only if target
	function is likewise.
	(mips16_build_call_stub): Likewise.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2011-05-23  Mark Mitchell <mark@codesourcery.com>

	Issue #10390

	gcc/
	* config/mips/mips.c (mips16_build_function_stub): New argument alias.
	(mips16_build_function_stub_and_local_alias): New function.
	(mips_output_function_prologue):  Call
	mips16_build_function_stub_and_local_alias if TARGET_HARD_FLOAT_ABI
	and either a floating-point return value or floating-pointe arguments.

	gcc/testsuite/
	* gcc.target/mips/mips.exp: Add interlink-mips16 to mips_option_groups.
	* gcc.target/mips/mips16-fn-local.c: New test.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2011-04-05  Paul Brook  <paul@cpodesourcery.com>

	gcc/
	* config/arm/arm-cores.def: Add cortex-r5.
	* config/arm/arm-tune.md: Regenerate.
	* config/arm/arm.c (FL_DIV): Rename...
	(FL_THUMB_DIV): ... to this.
	(FL_ARM_DIV): Define.
	(FL_FOR_ARCH7R, FL_FOR_ARCH7M): Use FL_THUMB_DIV.
	(arm_arch_hwdiv): Remove.
	(arm_arch_thumb_hwdiv, arm_arch_arm_hwdiv): New variables.
	(arm_option_override): Set arm_arch_thumb_hwdiv, arm_arch_arm_hwdiv
	instead of arm_arch_hwdiv.
	(thumb2_size_rtx_costs): Use TARGET_IDIV.
	(arm_issue_rate): Add cortexr5.
	* config/arm/arm.h (TARGET_CPU_CPP_BUILTINS): Set
	__ARM_ARCH_EXT_IDIV__.
	(TARGET_IDIV): Define.
	(arm_arch_hwdiv): Remove.
	(arm_arch_arm_hwdiv, arm_arch_thumb_hwdiv): New prototypes.
	* config/arm/arm.md (tune_cortexr4): Add cortexr5.
	(divsi3, udivsi3): New patterns.
	* config/arm/thumb2.md (divsi3, udivsi3): Remove.
	* doc/invoke.texi: Document ARM -mcpu=cortex-r5

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2011-03-28  Paul Brook  <paul@codesourcery.com>
		    Daniel Jacobowitz  <dan@codesourcery.com>

	Issue #3772
	gcc/
	* final.c (notice_source_line): Ignore zero length instructions.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:
	
	Nathan Sidwell  <nathan@codesourcery.com>

	Issue #10413
	gcc/
	* config/rs6000/rs6000.h (EXTRA_SPECS): Add cc1_float.
	(host_detect_local_float): Declare.
	(EXTRA_SPEC_FUNCTIONS): Add local_float_detect.
	(HAVE_LOCAL_FLOAT_DETECT): Define as necessary.
	(CC1_FLOAT_SPEC): Define.
	* config/rs6000/driver-rs6000.c: #include asm/cputable.h.
	(platform, hard_float, auxv_read): New static vars.
	(elf_auxv): New.  Cache auxv values.
	(elf_platform): Use elf_auxv.
	(elf_float): New.
	(host_detect_local_float): New.
	* config/rs6000/sysv4.h (CC1_SPEC): Add cc1_float.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:
	
	Nathan Sidwell  <nathan@codesourcery.com>

	Issue #10459
	gcc/
	* config.gcc (powerpc-*): Allow native for with-cpu.
	* config/rs6000/apm-linux.h (DRIVER_SELF_SPECS): Set for native builds.

	Issue #10413
	gcc/
	* config/rs6000/apm-linux.h (DRIVER_SELF_SPECS): Remove.
	* config/rs6000/rs6000.c (rs6000_option_override_internal)
	(rs6000_file_start): Ignore "native" default cpu.
	* config/rs6000/driver-rs6000.c (elf_platform): Strip leading
	'ppc' from cpu name.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	Bernd Schmidt  <bernds@codesourcery.com>
	Nathan Sidwell  <nathan@codesourcery.com>

	gcc/
	* config.gcc (powerpc-apm-linux): New sub-target.
	* config/rs6000/apm-linux.h: New.
	* config/rs6000/t-apm-linux: New.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:
	
	Mark Mitchell  <mark@codesourcery.com>

	Issue #7581
	libstdc++-v3/
	* acinclude.m4 (GLIBCXX_WITH_CSLIBC): Define it.
	* configure.ac (GLIBCXX_WITH_CSLIBC): Use it.
	* configure: Regenerated.
	* libsupcc+/Makefile.am (sources): Do not add pure.cc if building
	for CSLIBC.
	* libsupc++/Makefile.in: Regenerated.

        Issue #9394
	libstdc++-v3/
	* acinclude.m4 (GLIBCXX_WITH_CSLIBC): Define _GLIBCXX_CSLIBC in
	config.h.
	* configure: Regenerated.
	* config.h.in: Likewise.
	* libsupc++/Makefile.am (sources): Add recursive_init_error.cc.
	* libsupc++/Makefile.in: Regenerated.
	* libsupc++/guard.cc (throw_recursive_init_exception): Do not throw an
	exception when building for CSLIBC.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	Nathan Froyd  <froydnj@codesourcery.com>
	Tom de Vries  <tom@codesourcery.com>

	Issue #8708

	gcc/
	* config/rs6000/rs6000-protos.h (altivec_resolve_overloaded_builtin):
	Delete.
	(rs6000_resolve_overloaded_builtin): Declare.
	* config/rs6000/rs6000-c.c (altivec_resolve_overloaded_builtin): Make
	static.
	(isel_arguments_valid): New function.
	(rs6000_resolve_isel_builtin): New function.
	(rs6000_resolve_overloaded_builtin): New function.
	* config/rs6000/rs6000-builtin.def: Declare isel builtins.
	* config/rs6000/rs6000.h (struct isel_builtin_desc): Declare.
	(builtin_iselw, builtin_iseld): Likewise.
	* config/rs6000/rs6000.c (rs6000_init_builtins): Initialize isel
	builtins.
	(rs6000_expand_builtins): Try to expand isel builtins.
	(ISEL_Pmode): Define.
	(ISEL_BASE, ISEL_P_RESULT, ISEL_S_RESULT, ISEL_U_RESULT): Define.
	(ISEL_EXPAND_ARG, ISEL_PTR_ARG, ISEL_SIGNED_ARG, ISEL_UNSIGNED_ARG):
	Define.
	(ISEL_EQ, ISEL_LT, ISEL_GT, ISEL_LTU, ISEL_GTU): Define.
	(builtin_iselw, builtin_iseld): Define.
	(isel_cmp_mode, isel_sel_mode, isel_argtype): New functions.
	(isel_strdesc): New function.
	(rs6000_init_isel_builtins): New function.
	(rs6000_expand_isel_builtin): New function.
	* doc/extend.texi (PowerPC AltiVec/VSX Builtin-in Functions): Document
	__builtin_isel functions.

	gcc/testsuite/
	* gcc.target/powerpc/builtin-isel.h: New file.
	* gcc.target/powerpc/builtin-isel.c: New test.
	* gcc.target/powerpc/builtin-isel-errors.c: New test.
	* gcc.target/powerpc/builtin-isel64.c: New test.
	* gcc.target/powerpc/builtin-isel64-errors.c: New test.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	Tom de Vries  <tom@codesourcery.com>

	gcc/
	* ee.c: New file.
	* tree-pass.h (pass_ee): Declare.
	* opts.c (default_options_table): Turn on extension elimination at -O2.
	* timevar.def (TV_EE): New timevar.
	* common.opt (fextension-elimination): New option.
	* Makefile.in (OBJS-common): Add ee.o.
	(ee.o): New rule.
	* passes.c (pass_ee): Add it.
	
	gcc/testsuite/
	* gcc.dg/extend-1.c: New test.
	* gcc.dg/extend-2.c: New test.
	* gcc.dg/extend-2-64.c: New test.
	* gcc.dg/extend-3.c: New test.
	* gcc.dg/extend-4.c: New test.
	* gcc.target/mips/octeon-bbit-2.c: Make test more robust.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2010-09-08  Tom de Vries  <tom@codesourcery.com>

	gcc/
	* emit-rtl.c (set_mem_attributes_minus_bitpos): Set MEM_READONLY_P
	for static const strings.
	
	gcc/testsuite/
	* gcc.dg/memcpy-3.c: New test.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2010-06-15  Maxim Kuvyrkov  <maxim@codesourcery.com>
	gcc/
	* config/mips/t-netlogic: Define NetLogic multilibs.
	* config.gcc (mips64-nelogic-linux-gnu): New target.

	2010-07-20  Maxim Kuvyrkov  <maxim@codesourcery.com>
	gcc/
	* config.gcc (mips64*-*-linux*): Make O32 the default ABI for NetLogic
	target.
	* config/mips/netlogic.h: New file, make O32 the default ABI for
	NetLogic target.
	* config/mips/t-netlogic: Update.

	2010-08-17 Catherine Moore  <clm@codesourcery.com>
        gcc/
        * config/mips/netlogic.h (SUBTARGET_CC1_SPEC): New.

	2010-09-01  Tom de Vries  <tom@codesourcery.com>
	Issue #9098
	gcc/
	* config/mips/netlogic.h: Set -funwind-tables by default.
	* config/mips/t-netlogic: Set -fno-unwind-tables for CRTSTUFF.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:
	
	Julian Brown  <julian@codesourcery.com>

	gcc/
	* config/arm/neon-testgen.ml (regexps): Allow any characters
	in comments after assembly instructions.

	gcc/testsuite/
	* gcc.target/arm/neon/vfp-shift-a2t2.c: Allow any characters in
	comments after assembly instructions.
	* gcc.target/arm/neon/v*.c: Regenerate.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:
	
	Julian Brown  <julian@codesourcery.com>

	libstdc++-v3/
	* python/Makefile.am (install-data-local): Only define rule if
	GLIBCXX_HOSTED.
	* python/Makefile.in: Regenerate.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:
	
	Julian Brown  <julian@codesourcery.com>

	gcc/testsuite/
	* gcc.dg/Warray-bounds-3.c: Add -fno-unroll-loops for ARM.
	* lib/target-supports.exp (check_vect_support_and_set_flags):
	Likewise, for all vect tests.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:
	
	Julian Brown  <julian@codesourcery.com>

	Issue #6223

	gcc/
	* config/arm/arm.c (arm_vector_alignment_reachable): Don't use
	peeling for alignment for NEON.

	gcc/testsuite/
	* lib/target-supports.exp
	(check_effective_target_vector_alignment_reachable): Not true for
	ARM NEON.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2011-05-11  Chung-Lin Tang  <cltang@codesourcery.com>

	gcc/
	* cfgrtl.c (try_redirect_by_replacing_jump): Treat EXIT_BLOCK_PTR case
	separately before call to redirect_jump(). Add assertion.
	(patch_jump_insn): Same.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2010-01-25  Tom de Vries  <tom@codesourcery.com>

	gcc/
	* config/mips/mips.md (define_peephole2): Add 2 new peepholes.
	
	gcc/testsuite/
	* gcc.target/mips/switch-peephole2.c: Add test.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2010-12-13  Tom de Vries  <tom@codesourcery.com>

	gcc/
	* tree-if-switch-conversion.c: New pass.
	* tree-pass.h (pass_if_to_switch): Declare.
	* common.opt (ftree-if-to-switch-conversion): New switch.
	* opts.c (decode_options): Set flag_tree_if_to_switch_conversion at -O2
	and higher.
	* passes.c (init_optimization_passes): Use new pass.
	* params.def (PARAM_IF_TO_SWITCH_THRESHOLD): New param.
	* doc/invoke.texi (-ftree-if-to-switch-conversion)
	(if-to-switch-threshold): New item.
	(Optimization Options, option -O2): Add -ftree-if-to-switch-conversion.
	* Makefile.in (OBJS-common): Add tree-if-switch-conversion.o.
	(tree-if-switch-conversion.o): New rule.
	* stmt.c (emit_case_bit_tests): Change prototype.
	(struct  case_bit_test): 
	(struct case_bit_test): Add rev_hi, rev_lo and prob fields.
	(emit_case_bit_test_jump): New function.
	(rtx_seq_cost): New function.
	(choose_case_bit_test_expand_method): New function.
	(get_label_prob): New function.
	(set_jump_prob): New function.
	(set_bit): New function.
	(emit_case_bit_tests): Use get_label_prob. Set and update rev_hi and
	rev_lo fields. Set prob field. Use set_bit. Use set_jump_prob. Use
	choose_case_bit_test_expand_method. Use emit_case_bit_test_jump.
	(expand_case): Add new args to emit_case_bit_tests invocation.
	
	gcc/testsuite/
	* gcc.dg/switch-bittest.c: New test.
	* gcc.dg/switch-prob.c: Add test.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	Nathan Froyd  <froydnj@codesourcery.com>

	gcc/
	* libfuncs.h (enum libfunc_index): Add LTO_profile_call_entry,
	LTI_profile_call_inside, LTI_profile_call_exit.
	(profile_call_entry_libfunc, profile_call_inside_libfunc): Define.
	(profile_call_exit_libfunc): Define.
	* optabs.c (init_optabs): Initialize them.
	* builtins.c (is_inexpensive_builtin): Add BUILT_IN_VA_START.
	* builtins.def (BUILT_IN_PROFILE_CALL_ENTER): Define.
	(BUILT_IN_PROFILE_CALL_INSIDE, BUILT_IN_PROFILE_CALL_EXIT): Define.
	* gimplify.c (fndecl_for_call_instrumentation): New function.
	(maybe_add_profile_call): New function.
	(replace_body_for_instrumentation): New function.
	(gimplify_call_expr): Call maybe_add_profile_call.
	(gimplify_modify_expr): Likewise.
	(gimplify_function_tree): Likewise.
	* common.opt (finstrument-function-calls): New option.
	* doc/invoke.texi: Document it.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2011-04-21  Catherine Moore  <clm@codesourcery.com>

	Issue #10594
 
	* config/mips/mips.opt (mfix-24k): New.
	* config/mips/mips.h (ASM_SPEC): Handle -mfix-24k.
	* config/mips/mips.md (length): Increase by 4 for stores if
	fixing 24K errata.
	* config/mips/mips.c (mips_reorg_process_insns): Do not allow
	all noreorder if fixing 24K errata.
	* doc/invoke.texi: Document mfix-24k.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2011-04-19  Catherine Moore  <clm@codesourcery.com>

	Issue #10598

	gcc/
	* config/mips/mips.h (ADJUST_REG_ALLOC_ORDER): Delete.
	* config/mips/mips.c (mips_order_regs_for_local_alloc): Delete.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2011-04-04  Paul Brook  <paul@codesourcery.com>

	gcc/
	* config/arm/arm-cores.def (cortex-m0, cortex-m1): Change arch to 6SM.
	* config/arm/arm-t-softfp (softfp_wrap_start): Include ARMv6S-M.
	* config/arm/elf.h: Ditto.
	* config/arm/libunwind.S: Ditto.
	* config/arm/lib1funcs.asm: Ditto.
	(__thumb1_only): Define and use.
	* config/arm/arm.c (FL_FOR_ARCH6SM): Define.
	(all_architectures): Add armv6s-m.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:
	
	Janis Johnson  <janisjo@codesourcery.com>

	gcc/testsuite/
	* gcc.target/arm/pr43698.c: Remove -march option.
	* gcc.target/arm/sync-1.c: Limit to sync_int_long, do not use
	-march option.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Backport from mainline:

	2011-03-23  Chung-Lin Tang  <cltang@codesourcery.com>

	PR target/46934
	gcc/
	* config/arm/arm.md (casesi): Use the gen_int_mode() function
	to subtract lower bound instead of GEN_INT().

	gcc/testsuite/
	* gcc.target/arm/pr46934.c: New.

	2011-03-17  Chung-Lin Tang  <cltang@codesourcery.com>

	PR target/43872
	gcc/
	* config/arm/arm.c (arm_get_frame_offsets): Adjust early
	return condition with !cfun->calls_alloca.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Backport from mainline:

	Issue #10917

	gcc/
	* expr.c (expand_expr_real_1): Only use BLKmode for volatile
	accesses which are not naturally aligned.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2011-04-11  Chung-Lin Tang  <cltang@codesourcery.com>

	Issue #9845
	* release-notes-csl.xml (Internal compiler error with pointer casting):
	New note.

	gcc/
	* config/arm/arm.h (ARM_LEGITIMIZE_RELOAD_ADDRESS): Do not handle
	when DImode address has unaligned index under TARGET_NEON.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:
	
	Maxim Kuvyrkov  <maxim@codesourcery.com>

	gcc/testsuite/
	* gcc/testsuite/gcc.dg/lto/20090210_0.c: Require tls_runtime target.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2011-01-27  Pat Wellander  <pwelland@codesourcery.com>

	Issue #9850

	gcc/
	* config/rs6000/rs6000.h (LOCAL_ALIGNMENT): Altivec local
	arrays >= 16 bytes are now aligned to at least 16 bytes.

	gcc/testsuite/
	* gcc.target/powerpc/altivec-34.c: New test.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2011-04-06  Chung-Lin Tang  <cltang@codesourcery.com>

	Issue #10935
	PR target/44557

	gcc/
	* config/arm/arm.h (PREFERRED_RELOAD_CLASS): Add CORE_REGS to
	Thumb-1 return LO_REGS case.
	* config/arm/arm.md (reload_inhi): Change scratch constraint
	from 'r' to 'l'.

	gcc/testsuite/
	* gcc.target/arm/pr44557.c: New.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	Nathan Sidwell  <nathan@codesourcery.com>

	libgcc/
	* config.host (powerpc-*-elf): Add t-ppccomm & t-spe-fprules, if
	necessary.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:
	
	Maciej W. Rozycki  <macro@codesourcery.com>

	gcc/
	* config/mips/mips16.S (DELAYf): Alias to DELAYt for the MIPS IV
	ISA and up.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	Maciej W. Rozycki  <macro@codesourcery.com>

	gcc/
	* config/mips/mips.h (ISA_HAS_FP4): Don't restrict ISA_MIPS32R2
	to TARGET_FLOAT64.
	(ISA_HAS_NMADD4_NMSUB4): Remove the MODE argument; don't restrict
	ISA_MIPS32R2.
	(ISA_HAS_NMADD3_NMSUB3): Remove the MODE argument.
	* config/mips/mips.c (mips_rtx_costs): Update according to
	changes to ISA_HAS_NMADD4_NMSUB4 and ISA_HAS_NMADD3_NMSUB3.
	* config/mips/mips.md (nmadd4<mode>, nmadd3<mode>): Likewise.
	(nmadd4<mode>_fastmath, nmadd3<mode>_fastmath): Likewise.
	(nmsub4<mode>, nmsub3<mode>): Likewise.
	(nmsub4<mode>_fastmath, nmsub3<mode>_fastmath): Likewise.
	* doc/invoke.texi (MIPS Options): Update documentation of the
	floating-point multiply-accumulate instruction restrictions.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	Nathan Sidwell  <nathan@codesourcery.com>

	Issue #10861

	gcc/
	* config/rs6000/e500mc.h (SETUP_FRAME_ADDRESSES): Remove, in line
	with merged fix for upstream PR target/45807.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	Maxim Kuvyrkov  <maxim@codesourcery.com>

	Issue #10166

	gcc/
	* config/mips/linux64.h (LINK_SPEC): Use compatible linker emulation
	for -mabi=64 -msym32.

	gcc/testsuite/
	* gcc.target/mips/mips-nonpic/main-msym32-mplt-1.c: New test.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	Issue #10483

	gcc/
	Backport from mainline:

	2011-03-22  Eric Botcazou  <ebotcazou@adacore.com>

        * combine.c (simplify_set): Try harder to find the best CC mode when
        simplifying a nested COMPARE on the RHS.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	Janis Johnson  <janisjo@codesourcery.com>

	gcc/testsuite/
	* gcc.dg/tree-ssa/20040204-1.c: Add arm*-*-* to targets expected
	not to fail scan.
	* gcc.dg/vect/vect-16.c: Do not expect arm*-*-* to fail scan.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:
	
	Nathan Sidwell  <nathan@codesourcery.com>

	Issue #10762
	gcc/
	* config/mips/cs-sgxxlite-linux.h (SUBTARGET_CC1_SPEC): Override.
	* config/mips/cs-sgxx-linux.h (SUBTARGET_CC1_SPEC): Likewise.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Backport from mainline:

	2011-06-03  Julian Brown  <julian@codesourcery.com>

	* config/arm/arm-cores.def (strongarm, strongarm110, strongarm1100)
	(strongarm1110): Use strongarm tuning.
	* config/arm/arm-protos.h (tune_params): Add max_insns_skipped field.
	* config/arm/arm.c (arm_strongarm_tune): New.
	(arm_slowmul_tune, arm_fastmul_tune, arm_xscale_tune, arm_9e_tune)
	(arm_v6t2_tune, arm_cortex_tune, arm_cortex_a5_tune)
	(arm_cortex_a9_tune, arm_fa726te_tune): Add max_insns_skipped field
	setting, using previous defaults or 1 for Cortex-A5.
	(arm_option_override): Set max_insns_skipped from current tuning.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Backport from mainline:

	2011-06-02  Julian Brown  <julian@codesourcery.com>

	* config/arm/arm-cores.def (cortex-a5): Use cortex_a5 tuning.
	* config/arm/arm.c (arm_cortex_a5_branch_cost): New.
	(arm_cortex_a5_tune): New.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Backport from mainline:

	2011-06-02  Julian Brown  <julian@codesourcery.com>

	* config/arm/arm-protos.h (tune_params): Add branch_cost hook.
	* config/arm/arm.c (arm_default_branch_cost): New.
	(arm_slowmul_tune, arm_fastmul_tune, arm_xscale_tune, arm_9e_tune)
	(arm_v6t2_tune, arm_cortex_tune, arm_cortex_a9_tune)
	(arm_fa726_tune): Set branch_cost field using
	arm_default_branch_cost.
	* config/arm/arm.h (BRANCH_COST): Use branch_cost hook from
	current_tune structure.
	* dojump.c (tm_p.h): Include file.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Backport from mainline:

	2011-06-02  Julian Brown  <julian@codesourcery.com>

	* config/arm/arm-cores.def (arm1156t2-s, arm1156t2f-s): Use v6t2
	tuning.
	(cortex-a5, cortex-a8, cortex-a15, cortex-r4, cortex-r4f, cortex-m4)
	(cortex-m3, cortex-m1, cortex-m0): Use cortex tuning.
	* config/arm/arm-protos.h (tune_params): Add prefer_constant_pool
	field.
	* config/arm/arm.c (arm_slowmul_tune, arm_fastmul_tune)
	(arm_xscale_tune, arm_9e_tune, arm_cortex_a9_tune)
	(arm_fa726te_tune): Add prefer_constant_pool setting.
	(arm_v6t2_tune, arm_cortex_tune): New.
	* config/arm/arm.h (TARGET_USE_MOVT): Make dependent on
	prefer_constant_pool setting.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:
	
	Nathan Sidwell  <nathan@codesourcery.com>

	Issue #10439
	gcc/
	* config/arm/unwind-arm.c (enum __cxa_type_match_result): New.
	(cxa_type_match): Correct declaration.
	(__gnu_unwind_pr_common): Reconstruct
	additional indirection when __cxa_type_match returns
	succeeded_with_ptr_to_base.

	libstdc++/
	* libsupc++/eh_arm.c (__cxa_type_match): Construct address of
	thrown object here.  Return succeded_with_ptr_to_base for all
	pointer cases.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:
	
	Maciej W. Rozycki  <macro@codesourcery.com>

	gcc/testsuite/
	* gcc.target/mips/call-1.c: Accept JALRS too where JALR would do.
	* gcc.target/mips/call-2.c: Likewise.
	* gcc.target/mips/call-3.c: Likewise.
	* gcc.target/mips/lazy-binding-1.c: Likewise.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	Nathan Sidwell  <nathan@codesourcery.com>

	Issue #10377

	gcc/
	* config/sh/sh.c (expand_cbranchdi4): Preserve copied op2h for
	reuse.

	testsuite/
	* gcc.target/sh/crash-1.c: New.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	Nathan Sidwell  <nathan@codesourcery.com>

	Issue #10339

	gcc/
	* config/sparc/sparc.c (sparc_struct_value_rtx): Rename ret_rtx to
	ret_reg to avoid collision with new macro.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	Bernd Schmidt  <bernd@codesourcery.com>

	Issue #10089

	gcc/
	* expr.c (store_field): Avoid a direct store if the mode is larger
	than the size of the bit field.
	* stor-layout.c (layout_decl): If flag_strict_volatile_bitfields,
	treat non-volatile bit fields like volatile ones.
	* toplev.c (process_options): Disallow combination of
	-fstrict-volatile-bitfields and ABI versions less than 2.
	* config/arm/arm.c (arm_option_override): Don't enable
	flag_strict_volatile_bitfields if the ABI version is less than 2.
	* config/h8300/h8300.c (h8300_option_override): Likewise.
	* config/rx/rx.c (rx_option_override): Likewise.
	* config/m32c/m32c.c (m32c_option_override): Likewise.
	* config/sh/sh.c (sh_option_override): Likewise.

	gcc/testsuite/
	* gcc.target/arm/volatile-bitfields-4.c: New test.
	* c-c++-common/abi-bf.c: New test.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:
	
	Maxim Kuvyrkov  <maxim@codesourcery.com>

	gcc/
	* combine.c (subst, combine_simlify_rtx): Add new argument, use it
	to track processing of conditionals.  Update all callers.
	(try_combine, simplify_if_then_else): Update.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Backport from mainline:

	2011-07-08  Julian Brown  <julian@codesourcery.com>

	gcc/
	* config/arm/neon.md (vec_shr_<mode>, vec_shl_<mode>): Disable in
	big-endian mode.
	(reduc_splus_<mode>, reduc_uplus_<mode>, reduc_smin_<mode>)
	(reduc_smax_<mode>, reduc_umin_<mode>, reduc_umax_<mode>)
	(neon_vec_unpack<US>_lo_<mode>, neon_vec_unpack<US>_hi_<mode>)
	(vec_unpack<US>_hi_<mode>, vec_unpack<US>_lo_<mode>)
	(neon_vec_<US>mult_lo_<mode>, vec_widen_<US>mult_lo_<mode>)
	(neon_vec_<US>mult_hi_<mode>, vec_widen_<US>mult_hi_<mode>)
	(vec_pack_trunc_<mode>, neon_vec_pack_trunc_<mode>): Disable for Q
	registers in big-endian mode.

	gcc/testsuite/
	* lib/target-supports.exp
	(check_effective_target_arm_little_endian): New.
	(check_effective_target_vect_pack_trunc): Use above.
	(check_effective_target_vect_unpack): Likewise.
	(check_effective_target_vect_element_align): Test
	check_effective_target_arm_vect_no_misalign for ARM.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	Jie Zhang  <jie@codesourcery.com>

	* config/arm/arm.c (arm_override_options): Disable
	-fsched-interblock for Cortex-M4.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2010-08-23  Paul Brook  <paul@codesourcery.com>

	gcc/
	* config/i386/i386elf.h (ENDFILE_SPEC): Add crtn.o.
	(STARTFILE_SPEC): Remove crt0.o. Add crti.o.
	* config/i386/t-i386elf: Build crti.o and crtn.o.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	Issue #5256

	libstdc++-v3/

	Merge from WRS Linux 4.4:

	2010-05-18  Joseph Myers  <joseph@codesourcery.com>
	Issue #5256
	Issue #5834
	* config/locale/gnu/c_locale.cc,
	config/locale/gnu/monetary_members.cc,
	config/locale/gnu/numeric_members.cc,
	config/locale/gnu/time_members.cc, src/codecvt.cc, src/ctype.cc,
	src/locale-inst.cc, src/wlocale-inst.cc: Add aliases for generic
	locale symbol names.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	Maxim Kuvyrkov  <maxim@codesourcery.com>

	gcc/
	* config/m68k/m68k.c (m68k_sched_variable_issue): Handle
	-fsched-pressure.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2010-09-09  Catherine Moore  <clm@codesourery.com>

        gcc/
        * config/mips/xlr.md (ir_xlr_alu_clz): New insn_reservation.
        (ir_xlr_alu): Remove clz.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	Kazu Hirata  <kazu@codesourcery.com>

	Issue #8579
	libiberty/
	* pex-win32.c (pex_win32_exec_child): Move calls to _close() to
	the end of the function.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2010-09-01  Andrew Stubbs  <ams@codesourcery.com>

	gcc/
	* config/sh/sh.h (SH_ASM_SPEC): Add spaces between options.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	Backport of patch posted here:
	http://gcc.gnu.org/ml/gcc-patches/2010-08/msg01462.html

	2010-08-19  Bernd Schmidt  <bernds@codesourcery.com>
	gcc/
	* Makefile.in: (mode-switching.o): Depend on integrate.h.
	* doc/md.texi (Standard Pattern Names For Generation):
	Document use_initial_val.
	* integrate.c (initial_value_pair): Add new member "initialized".
	(get_hard_reg_initial_val): Set initialized.
	(emit_initial_value_sets): Emit result of gen_use_initial_val.
	* mode-switching.c: Include integrate.h.
	(rest_of_handle_mode_switching): Call emit_initial_value_sets.

2011-07-28  Julian Brown  <julian@codesourcery.com>

        Merge from Sourcery G++ 4.5:

        2010-08-20  Catherine Moore  <clm@codesourcery.com>

        Issue #9258

        gcc/
        * config/mips/sdemtk.h (MIPS_ARCH_FLOAT_SPEC): Add 34kn.
        * config/mips/mips.c (mips_cpu_info): Likewise.
        * config/mips/mips.h (MIPS_ARCH_FLOAT_SPEC): Likewise.
        (BASE_DRIVER_SELF_SPECS): Do not imply -mdsp for the 34kn.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2010-08-16  Catherine Moore  <clm@codesourcery.com>

        gcc/
        * config/mips/mips.c (mips_cpu_info): Set tune_flags for
        the XLR processor to PTF_AVOID_BRANCH_LIKELY.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	Issue #9186 - Contents test failure for Python scripts.

	libstdc++-v3/
	* python/Makefile.am (pythondir): Use $(tooldir)/share.
	* python/Makefile.in: Regenerate.

2011-07-28  Julian Brown  <julian@codesourcery.com>

        Merge from Sourcery G++ 4.5:

        Daniel Jacobowitz  <dan@codesourcery.com>
	Andrew Stubbs  <ams@codesourcery.com>

        gcc/testsuite/
        * gcc.dg/vect/vect-shift-2.c (stdio.h): Include if TRACE.
	* gcc.dg/vect/vect-shift-3.c: New.
        * lib/target-supports.exp (check_effective_target_vect_shift_char): New
        function.
	* gcc.dg/vect/vect-shift-4.c: New file.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	Kazu Hirata  <kazu@codesourcery.com>

	gcc/
	* config.gcc (arm*-*-linux*): Handle enable_extra_asa_multilibs.
	* config/arm/t-asa: New.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5, not suitable for upstream:

	2009-05-12  Maxim Kuvyrkov  <maxim@codesourcery.com>
	gcc/
	* common.opt (feglibc): New dummy option.
	* opts.c (common_handle_option): Handle it.
	* config.gcc: Handle 'eglibc' vendor.
	* config/t-eglibc: Define multilibs for testing EGLIBC features.
	* configure.ac (--with-eglibc-configs, EGLICB_CONFIGS): New option and
	variable.
	* configure: Regenerate.
	* Makefile.in (EGLIBC_CONFIGS): Handle

2011-07-28  Julian Brown  <julian@codesourcery.com>

        Merge from Sourcery G++ 4.5:

        * gcc/config/mips/linux.h (SUBTARGET_OVERRIDE_OPTIONS):
        Disable thread support for uclibc.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2010-06-14  Nathan Froyd  <froydnj@codesourcery.com>

	NOT ASSIGNED TO THE FSF
	COPYRIGHT FREESCALE

	gcc/
	* config/rs6000/rs6000.mc (floatdidf2): Use for PROCESSOR_PPCE500MC64.
	(fix_truncdfdi2): Likewise.

	2010-06-14  Nathan Froyd  <froydnj@codesourcery.com>

	gcc/
	* config/rs6000/rs6000.c
	(rs6000_override_options) [processor_target_table]: Add e5500 entry.

	2010-06-14  Nathan Froyd  <froydnj@codesourcery.com>

	NOT ASSIGNED TO THE FSF
	COPYRIGHT FREESCALE

	gcc/
	* config/rs6000/rs6000.c (expand_block_clear): Permit non-word-aligned
	stores for PROCESSOR_PPCE500MC64.
	(expand_block_move): Likewise.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	gcc/
	* config.gcc (powerpc*-*-*): Add e5500 as a valid 64-bit cpu name.
	* config/rs6000/rs6000.h (ASM_CPU_SPEC): Add mcpu=e5500 case.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	Nathan Sidwell  <nathan@codesourcery.com>
	Joseph Myers  <joseph@codesourcery.com>

	* libtool.m4 (nucleus*): Add shared library logic, deplibs check
	method.
	* configure.ac: Handle arm*-*-nucleuseabi.
	* configure: Regenerate.

	gcc/
	* config.gcc: Handle arm*-*-nucleuseabi*.
	* config/arm/nucleus.h: New.
	* config/arm/t-cs-nucleuseabi: New.
	* config/arm/unwind-arm.h (_Unwind_decode_target2): Target2 on
	nucleus-shared is the same as linux.

	libgcc/
	* config.host: Handle arm*-*-nucleuseabi*.

	libstdc++-v3/
	* config/os/nucleus/arm-eabi-extra.ver: New.
	* configure.host (arm*-*-nucleauseabi): Add arm-eabi-extra.ver.
	* configure: Regenerated.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2010-04-02  Nathan Froyd  <froydnj@codesourcery.com>
	libgcc/
	* configure.ac: Check for __SPE__ when compiling for powerpc*.
	* configure: Regenerate.
	* config.host: Add t-spe-fprules if compiling for SPE.
	* config/rs6000/spe_adddf3.S: New file.
	* config/rs6000/spe_subdf3.S: New file.
	* config/rs6000/spe_muldf3.S: New file.
	* config/rs6000/spe_divdf3.S: New file.
	* config/rs6000/spe_add_exception.S: New file.
	* config/rs6000/spe_muldiv_scale2.S: New file.
	* config/rs6000/spe_cmpdf2.S: New file.
	* config/rs6000/spe_eqdf2.S: New file.
	* config/rs6000/spe_gedf2.S: New file.
	* config/rs6000/spe_ledf2.S: New file.
	* config/rs6000/spe_unorddf2.S: New file.
	* config/rs6000/spe_unord_sub.S: New file.
	* config/rs6000/fixdfdi.S: New file.
	* config/rs6000/fixdfsi.S: New file.
	* config/rs6000/fixunsdfdi.S: New file.
	* config/rs6000/fixunsdfsi.S: New file.
	* config/rs6000/floatdidf.S: New file.
	* config/rs6000/floatsidf.S: New file.
	* config/rs6000/floatundidf.S: New file.
	* config/rs6000/floatunsidf.S: New file.
	* config/rs6000/extendsfdf2.S: New file.
	* config/rs6000/truncdfsf2.S: New file.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merged from Sourcery G++ 4.5:

	2010-05-18  Paul Brook  <paul@codesourcery.com>

	Issue #8426 - Fix libsupc++ symbol visibility
	gcc/
	* config/arm/eabi-memset.c (__aeabi_memset): Remove bogus return value.

	libstdc++-v3/
	* libsupc++/eh_arm.cc (__cxa_type_match): Use correct namespace.
	(__cxa_begin_cleanup): Ditto.
	* libsupc++/unwind-cxx.h (__cxa_call_unexpected, __cxa_call_terminate,
	__cxa_type_match, __cxa_begin_cleanup): Use correct types on ARM EABI.
	* libsupc++/cxxabi.h: Add prototypes for __aeabi routines.
	* libsupc++/eh_personality.cc (PERSONALITY_FUNCTION): Export with
	default visibility.
	* libsupc++/eh_call.cc (__cxa_call_terminate, __cxa_call_unexpected):
	Use correct namespace and types.

	* release-notes-csl.xml: New note.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2010-06-04  Nathan Sidwell  <nathan@codesourcery.com>

	Issue #8426 - build dlls.

	* libtool.m4 (symbian*): Add support for building shared libs.

	gcc/
	* configure: Rebuilt.
	* config.gcc (arm*-*-symbianelf*): Add shared-lib make file
	fragments.
	* config/t-slibgcc-symbian: New.

	libstdc++-v3/
	* configure: Rebuilt.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2010-05-24  Paul Brook  <paul@codesourcery.com>

	Issue #8426 - Avoid libsupc++ static writable data
	libstdc++-v3/
	* libsupc++/unwind-cxx.h (__get_terminate_handler,
	__get_unexpected_handler): New.
	* libsupc++/eh_throw.cc: Use them.
	* libsupc++/eh_ptr.cc: Ditto.
	* libsupc++/eh_terminate.cc: Ditto.
	* libsupc++/eh_term_handler.cc: Avoid static initializer on SymbianOS.
	* libsupc++/eh_unex_handler.cc: Avoid static initializer on SymbianOS.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merged from Sourcery G++ 4.5:

	2009-05-29  Julian Brown  <julian@codesourcery.com>

	gcc/
	* config/arm/arm.md (movsi): Don't split symbol refs here.
	(define_split): New.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2010-04-12  Andrew Stubbs  <ams@codesourcery.com>

	Issue #7178

	gcc/
	* config/arm/arm.c (arm_init_libfuncs): Change __gnu_f2h_ieee to
	__aeabi_f2h, __gnu_f2h_alternative to __aeabi_f2h_alt, __gnu_h2f_ieee
	to __aeabi_h2f, and __gnu_h2f_alternative to __aeabi_h2f_alt.
	* config/arm/fp16.c (__gnu_f2h_internal): Change return type to
	unsigned int. Change 'sign' variable likewise.
	(__gnu_h2f_internal): Set to static inline.
	Change return type to unsigned int. Change 'sign' variable likewise.
	(ALIAS): New define.
	(__gnu_f2h_ieee): Change unsigned short to unsigned int.
	(__gnu_h2f_ieee): Likewise.
	(__gnu_f2h_alternative): Likewise.
	(__gnu_h2f_alternative): Likewise.
	(__aeabi_f2h, __aeabi_h2f): New aliases.
	(__aeabi_f2h_alt, __aeabi_h2f_alt): Likewise.
	* config/arm/sfp-machine.h (__extendhfsf2): Set to __aeabi_h2f.
	(__truncsfhf2): Set to __aeabi_f2h.

	gcc/testsuite/
	* g++.dg/ext/arm-fp16/arm-fp16-ops-5.C: Check for __aeabi_h2f
	and __aeabi_f2h.
	* g++.dg/ext/arm-fp16/arm-fp16-ops-6.C: Likewise.
	* gcc.dg/torture/arm-fp16-ops-5.c: Likewise.
	* gcc.dg/torture/arm-fp16-ops-6.c: Likewise.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2010-04-13  Andrew Stubbs  <ams@codesourcery.com>
	gcc/
	* regmove.c (fixup_match_2): Swap incorrect uses of src and dst.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2010-02-23  Julian Brown  <julian@codesourcery.com>

	gcc/
	* calls.c (precompute_register_parameters): Avoid generating a
	register move if optimizing for size.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2010-02-16  Paul Brook  <paul@codesourcery.com>

	gcc/
	* config.gcc (arm*-*-symbianelf*): Add t-bpabi to t-symbian.
	* config/arm/symbian.h (RENAME_LIBRARY): Remove.
	* config/arm/lib1funcs.asm: Remove __symbian__ conditionals.
	* config/arm/libunwind.S: Ditto.
	* config/arm/t-symbian (LIB1ASMFUNCS): Remove.
	(UNWIND_H, LIB2ADDEH, LIB2ADDEHDEP): Remove.
	(LIB2FUNCS_STATIC_EXTRA): Remove.
	(LIB2FUNCS_EXTRA): Add eabi-memcpy.c and eabi-memset.c.
	* config/arm/eabi-memcpy.c: New file.
	* config/arm/eabi-memset.c: New file.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Backport from mainline:

	2011-06-08  Julian Brown  <julian@codesourcery.com>

	gcc/
	* config/arm/arm.c (arm_libcall_uses_aapcs_base): Use correct ABI
	for double-precision helper functions in hard-float mode if only
	single-precision arithmetic is supported in hardware.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	Jie Zhang  <jie@codesourcery.com>

	Issue #7122

	gcc/
	* config/arm/arm.c (arm_rtx_costs_1): Adjust cost for
	CONST_VECTOR.
	(arm_size_rtx_costs): Likewise.
	(thumb2_size_rtx_costs): Likewise.
	(neon_valid_immediate): Add a case for double 0.0.

	gcc/testsuite/
	* gcc.target/arm/neon-vdup-1.c: New test case.
	* gcc.target/arm/neon-vdup-2.c: New test case.
	* gcc.target/arm/neon-vdup-3.c: New test case.
	* gcc.target/arm/neon-vdup-4.c: New test case.
	* gcc.target/arm/neon-vdup-5.c: New test case.
	* gcc.target/arm/neon-vdup-6.c: New test case.
	* gcc.target/arm/neon-vdup-7.c: New test case.
	* gcc.target/arm/neon-vdup-8.c: New test case.
	* gcc.target/arm/neon-vdup-9.c: New test case.
	* gcc.target/arm/neon-vdup-10.c: New test case.
	* gcc.target/arm/neon-vdup-11.c: New test case.
	* gcc.target/arm/neon-vdup-12.c: New test case.
	* gcc.target/arm/neon-vdup-13.c: New test case.
	* gcc.target/arm/neon-vdup-14.c: New test case.
	* gcc.target/arm/neon-vdup-15.c: New test case.
	* gcc.target/arm/neon-vdup-16.c: New test case.
	* gcc.target/arm/neon-vdup-17.c: New test case.
	* gcc.target/arm/neon-vdup-18.c: New test case.
	* gcc.target/arm/neon-vdup-19.c: New test case.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:	

	2009-05-15  Joseph Myers  <joseph@codesourcery.com>
	Merge from Sourcery G++ 4.3:
	NOT ASSIGNED TO FSF
	COPYRIGHT CAVIUM
	gcc/
	* config/mips/octeon-elf-unwind.h, config/mips/octeon-elf.h,
	config/mips/octeon.h, config/mips/t-octeon-elf: New.
	* config.gcc: Handle mips64octeon*-wrs-elf*.
	(mips-wrs-linux-gnu): Use mips/octeon.h.
	* config/mips/mips-protos.h (octeon_output_shared_variable): New.
	* config/mips/mips.c (octeon_handle_cvmx_shared_attribute,
	octeon_select_section, octeon_unique_section,
	octeon_output_shared_variable): New.
	(mips_attribute_table): Add cvmx_shared.
	(mips_in_small_data_p): Check for cvmx_shared attribute.
	libgcc/
	* config.host: Handle mips64octeon*-wrs-elf*.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	Mark Mitchell  <mark@codesourcery.com>
	Joseph Myers  <joseph@codesourcery.com>
	Mark Shinwell  <shinwell@codesourcery.com>
	Vladimir Prus  <vladimir@codesourcery.com>
	Paul Brook  <paul@codesourcery.com>

	gcc/
	* config.gcc (arm-wrs-linux-gnueabi, i586-wrs-linux-gnu,
	mips-wrs-linux-gnu, powerpc-wrs-linux-gnu):
	Handle new targets.
	* config/arm/t-wrs-linux, config/arm/wrs-linux.h,
	config/i386/t-wrs-linux, config/i386/wrs-linux.h,
	config/i386/wrs-linux.opt, config/mips/t-wrs-linux,
	config/mips/wrs-linux.h, config/rs6000/t-wrs-linux,
	config/rs6000/wrs-linux.h: New.
	* config/mips/t-octeon-elf (MULTILIB_OPTIONS, MULTILIB_DIRNAMES,
	MULTILIB_EXCEPTIONS): Add Octeon II multilibs.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2010-02-23  Julian Brown  <julian@codesourcery.com>

	gcc/
	* config/arm/arm.c (thumb2_size_rtx_costs): New.
	(arm_rtx_costs): Call above for Thumb-2.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2010-02-04  Daniel Jacobowitz  <dan@codesourcery.com>

	Issue #7197 - backtrace() through throw()

	libstdc++-v3/
	* libsupc++/eh_personality.cc (PERSONALITY_FUNCTION): For
	ARM EABI, skip handlers for _US_VIRTUAL_UNWIND_FRAME
	| _US_FORCE_UNWIND.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2009-08-26  Julian Brown  <julian@codesourcery.com>

	gcc/config/arm/
	* uclinux-eabi.h (LINK_GCC_C_SEQUENCE_SPEC): Override definition
	for uclinux.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2009-02-17  Andrew Jenner  <andrew@codesourcery.com>
	            Maciej Rozycki  <macro@codesourcery.com>

	gcc/
	* unwind.inc (_Unwind_RaiseException, _Unwind_ForcedUnwind)
	(_Unwind_Resume, _Unwind_Resume_or_Rethrow, _Unwind_Backtrace): Use
	return value of uw_init_context.
	* unwind-dw2.c (uw_init_context): Make macro an expression instead of
	a statement.
	(uw_init_context_1): Add return value.
	* unwind-sjlj.c (uw_init_context): Add return value.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2009-07-07  Catherine Moore  <clm@codesourcery.com>
	gcc/testsuite/
	* gcc.target/mips/clear-cache-2.c: Add target checks for
	mips-sde-elf.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2008-03-17  Julian Brown  <julian@codesourcery.com>
	2009-08-04  Sandra Loosemore  <sandra@codesourcery.com>

	gcc/
	* config/mips/sdemtk.h (MIPS_ARCH_FLOAT_SPEC): Override, adding
	-mno-float option.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2009-07-20  Joseph Myers  <joseph@codesourcery.com>

	Issue #5565

	fixincludes/
	* fixincl.tpl (sed_cmd_z): Hardcode to "sed".
	* fixincl.x: Regenerate.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2009-07-14  Paul Brook  <paul@codesourcery.com>

	Issue #5829

	config/
	* stdint.m4: Avoid pulling in headers when checking basic type sizes.

	libstdc++-v3/
	* configure: Regenerate.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

        2008-07-08  Catherine Moore  <clm@codesourcery.com>
        gcc/testsuite/
        * gcc.dg/torture/type-generic-1.c: Link with floating point
        emulation for target mips-sde-elf.

2011-07-28  Julian Brown  <julian@codesourcery.com>

        Merge from Sourcery G++ 4.5:

        2009-07-01  Catherine Moore  <clm@codesourcery.com>
        gcc/testsuite/
        * gcc.c-torture/execute/ieee/ieee.exp: Link with floating
        point emulation for mips-sde-elf targets.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2009-07-09  Andrew Stubbs  <ams@codesourcery.com>
	gcc/
	* config/sh/cs-sgxxlite-linux.h (SUBTARGET_OVERRIDE_OPTIONS): Define.

2011-07-28  Julian Brown  <julian@codesourcery.com>

        Merged from Sourcery G++ 4.5:

        2009-05-28  Julian Brown  <julian@codesourcery.com>

        libgcc/
        * config.host (arm*-*-linux*, arm*-*-uclinux*, arm*-*-eabi*)
        (arm*-*-symbianelf): Add arm/t-divmod-ef to tmake_file.
        * Makefile.in (LIB2_DIVMOD_EXCEPTION_FLAGS): Set to previous
        default if not set by a target-specific Makefile fragment.
        (lib2-divmod-o, lib2-divmod-s-o): Use above.
        * config/arm/t-divmod-ef: New.

        2009-09-02  Daniel Jacobowitz  <dan@codesourcery.com>

        libgcc/
        * shared-object.mk (c_flags-$(base)$(objext)): New.
        ($(base)$(objext)): Use above.
        ($(base)_s$(objext)): Likewise.
        * static-object.mk (c_flags-$(base)$(objext)): New.
        ($(base)$(objext)): Use above.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

        2009-06-10  Catherine Moore  <clm@codesourcery.com>
        Merge from Sourcery G++ 4.3:
        gcc/
        2008-11-23  Richard Sandiford  <rsandiford@googlemail.com>
        * config/mips/mips.c (mips_legitimize_address): Handle
        illegitimate CONST_INT addresses.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	Catherine Moore  <clm@codesourcery.com>

	Merge from MIPS:
	2007-11-29  Thiemo Seufer  <ths@mips.com>
	gcc/
	* config/mips/mips.c (mips_option_override): Let -fpic imply
	-mabicalls, forward port from SDE	.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

        Catherine Moore  <clm@codesourcery.com>

	Merge from MIPS:
	2007-12-21  David Ung  <davidu@mips.com>
	gcc/
	* config/mips/mips.h (TARGET_MIPS_SDE): Define macro as 0.
	* config/mips/sde.h (TARGET_MIPS_SDE): Define to 1.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2010-11-03  Paul Brook  <paul@codesourcery.com>

	2008-03-25  Maxim Kuvyrkov  <maxim@codesourcery.com>
		    Julian Brown  <julian@codesourcery.com>
	
	* config/mips/74k.md (r74k_int_mult, r74k_int_madd): Don't use
	mips_linked_madd_p for bypasses.
	(r74k_int_mul3): Use mips_mult_madd_chain_bypass_p for bypass.
	* config/mips/mips.c (mips_mult_madd_chain_bypass_p): New.
	* config/mips/mips-protos.h (mips_mult_madd_chain_bypass_p): Add
	prototype.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2009-04-04  Sandra Loosemore  <sandra@codesourcery.com>

	Issue #5104
	PR tree-optimization/39604

	gcc/testsuite
	* g++.dg/tree-ssa/sink-1.C: New.

	gcc/
	* tree-ssa-sink.c (sink_code_in_bb): Do not sink statements out
	of a lexical block containing variable definitions.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2009-06-22  Kazu Hirata  <kazu@codesourcery.com>

	Issue #5105
	gcc/testsuite/
	* gcc.target/m68k/pr36134.c: Use dg-skip-if to skip the testcase
	if there is a conflict with -mcpu=.  Use -mcpu=5208.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	gcc/
	* config/arm/arm.c (arm_option_override): Override alignments if
	tuning for Cortex-A8.
	(create_fix_barrier, arm_reorg): If aligning to jumps or loops,
	make labels have a size.
	* config/arm/arm.md (VUNSPEC_ALIGN16, VUNSPEC_ALIGN32): New constants.
	(align_16, align_32): New patterns.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2008-09-08  Daniel Jacobowitz  <dan@codesourcery.com>

	gcc/
	* config/arm/unwind-arm.c (__gnu_unwind_pr_common): Correct test
	for barrier handlers.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2008-02-12  Nathan Sidwell  <nathan@codesourcery.com>
		    Daniel Jacobowitz  <dan@codesourcery.com>
	gcc/
	* config/rs6000/eabi-ci.asm (__init): Add _init func start.
	(__fini): Also declare _fini for newlib.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2007-08-16  Daniel Jacobowitz  <dan@codesourcery.com>
	gcc/
	* config/rs6000/rs6000.c (rs6000_conditional_register_usage): Mark
	call-saved AltiVec registers call-used if ! TARGET_ALTIVEC_ABI.
	* config/rs6000/rs6000.h (CALL_USED_REGISTERS): Mark the first 20
	AltiVec registers call-used.
	(CALL_REALLY_USED_REGISTERS): Likewise.

	gcc/testsuite/
	* gcc.target/powerpc/altivec-consts.c: Remove -mabi=altivec.
	* gcc.target/powerpc/altivec-varargs-1.c: Likewise.
	* gcc.dg/vmx/vmx.exp: Likewise.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2008-07-02  Nathan Froyd  <froydnj@codesourcery.com>
	gcc/
	* config/rs6000/eabi.h (NAME__MAIN, INVOKE__main): Remove.
	* config/rs6000/t-ppccomm (LIB2FUNCS_STATIC_EXTRA): Remove eabi.S.
	(eabi.S): Remove rule.

	2008-10-13  Andrew Stubbs  <ams@codesourcery.com>
	gcc/
	* doc/invoke.texi (PowerPC Options): -meabi option no longer places
	__eabi function in main.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	Julian Brown  <julian@codesourcery.com>
	Mark Shinwell  <mark@codesourcery.com>

	gcc/
	* config/arm/arm.c (arm_class_likely_spilled_p): Check against LO_REGS
	only for Thumb-1.
	* config/arm/arm.h (MODE_BASE_REG_CLASS): Restrict base registers to
	those which can be used in short instructions when optimising for size
	on Thumb-2.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2007-09-19  Vladimir Prus  <vladimir@codesourcery.com>

	gcc/
	* config/arm/arm.c (arm_option_override): Disable
	-fmove-loop-invariants. Use very restrictive inlining heuristics.

	gcc/testsuite/
	* gcc.c-torture/execute/bcp-1.x: New.  Don't run bcp-1.c test on arm,
	with -Os.
	* gcc.c-torture/execute/990208-1.x: New.  Likewise.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2007-06-06  Joseph Myers  <joseph@codesourcery.com>

	gcc/
	* config/arm/arm.h (VALID_IWMMXT_REG_MODE): Allow SImode.
	* config/arm/arm.c (arm_legitimize_reload_address): Reduce range
	allowed for SImode offsets with iWMMXt.
	(arm_hard_regno_mode_ok): Update for change to VALID_IWMMXT_REG_MODE.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2007-07-05  Mark Shinwell  <shinwell@codesourcery.com>

	gcc/
	* config/arm/arm.h (BRANCH_COST): Set to 1 when optimizing for size
	on Thumb-2.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2007-02-16  Richard Sandiford  <richard@codesourcery.com>
 	gcc/
	* config/m68k/m68k.h (INDEX_REG_CLASS): Delete in favor of...
	(MODE_INDEX_REG_CLASS): ...this new macro.  Return NO_REGS unless
	MODE_OK_FOR_INDEX_P.
	(MODE_OK_FOR_INDEX_P): New macro.
	(REGNO_OK_FOR_INDEX_P): Delete in favor of...
	(REGNO_MODE_OK_FOR_INDEX_P): ...this new macro.  Return false
	unless MODE_OK_FOR_INDEX_P.
	(REG_OK_FOR_INDEX_P): Delete in favor of...
	(REG_MODE_OK_FOR_INDEX_P): ...this new macro.  Return false
	unless MODE_OK_FOR_INDEX_P.
	* m68k-protos.h (m68k_legitimate_index_reg_p): Add mode argument.
	* m68k.c (m68k_legitimate_index_reg_p, m68k_decompose_index):
	Add mode argument.  Use it.
	* config/m68k/m68k.md (tst<mode>_cf, cmp<mode>_cf, movsf_cf_hard)
	(movdf_cf_hard, extendsfdf2_cf, truncdfsf2_cf, ftrunc<mode>2_cf)
	(add<mode>3_cf, sub<mode>3_cf, fmul<mode>3_cf, div<mode>3_cf)
	(neg<mode>2_cf, sqrt<mode>2_cf, abs<mode>2_cf): Replace "Q<U>"
	constraints for FP addresses with "m" constraints.

	2007-02-16  Nathan Sidwell  <nathan@codesourcery.com>
	gcc/testsuite/
	* gcc.dg/m68k-fp-1.c: New.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:
	
	http://gcc.gnu.org/ml/gcc-patches/2006-03/msg00038.html

	* g++.dg/other/armv7m-1.C: New.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2007-03-05  Mark Mitchell  <mark@codesourcery.com>
	* configure.in (*-*-vxworks*): Remove target-libstdc++-v3 from
	noconfigdirs.
	* configure: Regenerated.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2007-03-12  Richard Sandiford  <richard@codesourcery.com>
	gcc/
	* config/vx-common.h (TARGET_FLEXLM): Define.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merged from Sourcery G++ 4.5:

 	Mark Mitchell  <mark@codesourcery.com>
	Sandra Loosemore  <sandra@codesourcery.com>

	gcc/testsuite/
	* lib/prune.exp (prune_warnings): Extend the default
	implementation to prune linker warnings about libm on Solaris.
	libstdc++-v3/
	* testsuite/lib/prune.exp (prune_g++_output): Prune linker
	warnings about libm on Solaris.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merged from Sourcery G++ 4.5:

	Mark Mitchell  <mark@codesourcery.com>
	Sandra Loosemore  <sandra@codesourcery.com>

	fixincludes/
	* inclhack.def (solaris_mutex_init_2): Remove precise machine
	checks; look at <sys/types.h> to determine whether fix is
	required.
	(solaris_rwlock_init_1): Likewise.
	(solaris_once_init_2): Likewise.
	* tests/base/sys/types.h: Add output generated by
	solaris_mutex_init_2.
	* fixincl.x: Regenerated.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	Issue #1510

	2007-04-27  Paul Brook  <paul@codesourcery.com>
	gcc/
	* cse.c (cse_process_notes): Make sure PLUS are canonical.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2007-03-30  Paul Brook  <paul@codesourcery.com>

	gcc/
	* calls.c (store_one_arg): Check alignment of mode used for save.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.4:

	Joseph Myers  <joseph@codesourcery.com>
	Paul Brook  <paul@codesourcery.com>
	Daniel Gutson  <dgutson@codesourcery.com>
	Julian Brown  <julian@codesourcery.com>
	Sandra Loosemore  <sandra@codesourcery.com>
	Daniel Jacobowitz  <dan@codesourcery.com>

	gcc/
	* config.gcc: Add ARM multilib configurations.
	* config/arm/nocrt0.h, config/arm/t-cs-eabi,
	config/arm/t-cs-eabi-lite, config/arm/t-cs-linux,
	config/arm/t-cs-linux-lite, config/arm/t-cs-uclinux-eabi: New.
	* config/arm/t-arm-elf (MULTILIB_MATCHES): Add armv7e-m.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	Julian Brown  <julian@codesourcery.com>
	Catherine Moore  <clm@codesourcery.com>
	Sandra Loosemore  <sandra@codesourcery.com>
	Richard Sandiford  <richard@codesourcery.com>
	Nigel Stephens  <nigel@mips.com>
	Joseph Myers  <joseph@codesourcery.com>

	gcc/
	* config.gcc: Add MIPS multilib configurations. Enable soft-fp for
	mips-sde-elf.
	* config/mips/cs-sgxx-linux.h, config/mips/cs-sgxxlite-linux.h,
	config/mips/t-sgxx-linux, config/mips/t-sgxx-sde,
	config/mips/t-sgxxlite-linux, config/mips/t-fprules-softfp,
	config/mips/sfp-machine.h: New.
	* config/mips/mips.opt (mips16e): Add as deprecated alias
	for -mips16.
	* doc/invoke.texi (Option Summary, MIPS Options): Document it.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:
	
	Joseph Myers  <joseph@codesourcery.com>
	
	gcc/
	* config.gcc (i[34567]86-*-linux*): Use extra config files if
	--enable-extra-sgxx-multilibs or --enable-extra-sgxxlite-multilibs.
	* config/i386/cs-linux-lite.h, config/i386/t-cs-linux-lite,
	config/i386/cs-linux.h, config/i386/cs-linux.opt,
	config/i386/t-cs-linux: New.
	* configure.ac (gcc_cv_libc_provides_ssp): Set to yes for
	GNU/Linux targets with libssp disabled.
	* configure: Regenerate.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:
	
	2009-05-01  Andrew Stubbs  <ams@codesourcery.com>

	gcc/
	* config/sh/cs-sgxxlite-linux.h, config/sh/t-sgxxlite-linux: New.
	* config.gcc: Add SH multilib configurations.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	Nathan Froyd  <froydnj@codesourcery.com>
	Kazu Hirata <kazu@codesourcery.com>
	Daniel Jacobowitz  <dan@codesourcery.com>
	Nathan Sidwell  <nathan@codesourcery.com>
	Joseph Myers  <joseph@codesourcery.com>

	gcc/
	* config.gcc: Add Power multilib configurations. Use
	rs6000/t-fprules-softfp and soft-fp/t-softfp.
	* config/rs6000/e500mc.h, config/rs6000/t-cs-eabi,
	config/rs6000/t-cs-eabi-lite, config/rs6000/t-cs-linux,
	config/rs6000/t-ppc-e500mc: New.
	* config/rs6000/cs-linux.h: New.
	* config/rs6000/eabi.h (CC1_EXTRA_SPEC, ASM_DEFAULT_SPEC): Define.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	2008-08-25  Nathan Froyd  <froydnj@codesourcery.com>

	gcc/
	* config/rs6000/sysv4.h (LIB_SIM_SPEC): Use LIB_DEFAULT_SPEC.
	(STARTFILE_SIM_SPEC): Remove sim-crt0.o%s.
	(ENDFILE_SIM_SPEC): Add -Tsim-hosted.ld.
	(LINK_OS_SIM_SPEC): Define to empty.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	Joseph Myers  <joseph@codesourcery.com>
	Daniel Jacobowitz  <dan@codesourcery.com>
	Nathan Froyd  <froydnj@codesourcery.com>

	gcc/
	* config/rs6000/option-defaults.h (OPTION_DEFAULT_SPECS): Handle
	-te500mc, -te500v1, -te500v2 and -te600.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:
	
	gcc/
	* config/rs6000/sysv4.h (CC1_EXTRA_SPEC): Define and use.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:
	
	Nathan Froyd  <froydnj@codesourcery.com>
	Andrew Stubbs  <ams@codesourcery.com>
	Bernd Schmidt  <bernds@codesourcery.com>

	gcc/
	* doc/invoke.texi: Document -fremove-local-statics.
	* Makefile.in (OBJS-common): Add tree-ssa-remove-local-statics.o.
	* cgraph.c (cgraph_node): Set ever_was_nested in the node and
	its parent when creating a new node.
	* cgraph.h (struct cgraph_node): Add 'ever_was_nested'.
	* passes.c (init_optimization_passes): Add
	pass_remove_local_statics to the optimization passes.
	* timevar.def (TV_RLS): New timevar.
	* toplev.h (flag_remove_local_statics): Declare.
	* tree-pass.h (pass_remove_local_statics): Declare.
	* tree-ssa-remove-local-statics.c: New file.

	gcc/c-family/
	* c.opt (fremove-local-statics): New option (for C and C++).

	gcc/cp/
	* decl2.c (mark_used): Mark _DECLs as DECL_NONLOCAL if appropriate.

	gcc/testsuite/
	* g++.dg/remove-local-statics-1.C: New test.
	* g++.dg/remove-local-statics-2.C: New test.
	* gcc.dg/remove-local-statics-1.c: New file.
	* gcc.dg/remove-local-statics-2.c: New file.
	* gcc.dg/remove-local-statics-3.c: New file.
	* gcc.dg/remove-local-statics-4.c: New file.
	* gcc.dg/remove-local-statics-5.c: New file.
	* gcc.dg/remove-local-statics-6.c: New file.
	* gcc.dg/remove-local-statics-7.c: New file.
	* gcc.dg/remove-local-statics-8.c: New file.
	* gcc.dg/remove-local-statics-9.c: New file.
	* gcc.dg/remove-local-statics-10.c: New file.
	* gcc.dg/remove-local-statics-11.c: New file.
	* gcc.dg/remove-local-statics-12.c: New file.
	* gcc.dg/remove-local-statics-13.c: New test.
	* gcc.dg/remove-local-statics-14.c: New test.
	* gcc.dg/remove-local-statics-15.c: New test.
	* gcc.dg/remove-local-statics-16.c: New test.
	* gcc.dg/remove-local-statics-17.c: New test.
	* gcc.dg/remove-local-statics-18.c: New test.
	* gcc.dg/tree-ssa/pr21559.c: Compile with -fno-remove-local-statics.
	* gcc.dg/tree-ssa/ssa-dse-6.c: Likewise.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:
	
	Mark Mitchell  <mark@codesourcery.com>
	Vladimir Prus  <vladimir@codesourcery.com>
	Joseph Myers  <joseph@codesourcery.com>
	Carlos O'Donell  <carlos@codesourcery.com>
	Daniel Jacobowitz  <dan@codesourcery.com>
	Kazu Hirata  <kazu@codesourcery.com>
	Pedro Alves  <pedro@codesourcery.com>

	libiberty/
	* configure.ac: Add cygpath for mingw hosts.
	* configure: Regenerate.
	* Makefile.in: Add cygpath.
	* cygpath.c: New.
	* lrealpath.c (lrealpath): Use cygpath on Windows.
	* pex-win32.c (pex_win32_open_read, pex_win32_open_write): Use
	open not _open.

	include/
	* libiberty.h (cygpath): Declare.

	config/
	* mh-mingw (CFLAGS, BOOT_CFLAGS): Do not use -D__USE_MINGW_ACCESS.
	Add a comment.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	Paul Brook  <paul@codesourcery.com>
	Andrew Stubbs  <ams@codesourcery.com>

	gcc/
	* doc/fragments.texi: Document MULTILIB_ALIASES.
	* genmultilib: Add aliases.
	* Makefile.in (s-mlib): Pass MULTILIB_ALIASES.
	* config/print-sysroot-suffix.sh: Add support for MULTILIB_ALIASES.
	* config/t-sysroot-suffix: Pass MULTILIB_ALIASES.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merged from Sourcery G++ 4.5:
	
	2008-09-03  Nathan Froyd  <froydnj@codesourcery.com>

	libgomp/
	* libgomp.texi (Library Index): Renamed from "Index" to prevent
	conflict with index.html on case-insensitive file systems.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merged from Sourcery G++ 4.5:

	2009-02-10  Mark Mitchell  <mark@codesourcery.com>

	libjava/classpath/
	* m4/acinclude.m4 (CLASSPATH_TOOLEXECLIBDIR): Match libjava.
	* configure.ac (--enable-version-specific-runtime-libs): Support.
	* Makefile.in, */Makefile.in: Regenerated.

	libjava/
	* Makefile.am (pkgconfigdir): Use toolexeclibdir, not $(libdir).
	* configure.ac (dbexecdir): Likewise.
	* configure: Regenerated.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merged from Sourcery G++ 4.5:

	2009-02-10  Mark Mitchell  <mark@codesourcery.com>

	libjava/
	* Makefile.am (jardir): Set to a target-specific location.
	* Makefile.in: Regenerate.

	gcc/java/
	* Make-lang.in: Adjust to match.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	Daniel Jacobowitz  <dan@codesourcery.com>
	Joseph Myers  <joseph@codesourcery.com>

	gcc/
	* doc/invoke.texi (-Wno-poison-system-directories): Document.
	* gcc.c (LINK_COMMAND_SPEC): Pass --no-poison-system-directories
	if -Wno-poison-system-directories and --error-poison-system-directories
	if -Werror=poison-system-directories to linker.
	* incpath.c: Include flags.h. Include toplev.h.
	(merge_include_chains): If ENABLE_POISON_SYSTEM_DIRECTORIES defined
	and flag_poison_system_directories is true, warn for use of
	/usr/include, /usr/local/include or /usr/X11R6/include.
	* Makefile.in (incpath.o): Depend on $(FLAGS_H) and toplev.h.
	* common.opt (--Wno-poison-system-directories): New.
	* configure.ac (--enable-poison-system-directories): New option.
	* configure: Regenerate.
	* config.in: Regenerate.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	Merge from Sourcery G++ 4.5:

	Mark Mitchell  <mark@codesourcery.com>
	Richard Sandiford  <richard@codesourcery.com>
	Joseph Myers  <joseph@codesourcery.com>
	Nathan Sidwell  <nathan@codesourcery.com>
	Nathan Froyd  <froydnj@codesourcery.com>
	Julian Brown  <julian@codesourcery.com>

	NOT ASSIGNED TO FSF
	COPYRIGHT CODESOURCERY
	
	gcc/
	* Makefile.in (CSL_LICENSEINC): Define it.
	(CSL_LICENSELIB): Likewise.
	(CSL_LICENSE_PROG): Likewise.
	(LIBS): Depend on CSL_LICENSELIB.
	(GCC_PASSES): Depend on CSL_LICENSE_PROG.
	(INCLUDES): Add CSL_LICENSEINC.
	* acinclude.m4 (--with-license): New option.
	(--with-csl-license-feature): Likewise.
	(--with-csl-license-version): Likewise.
	* common.opt (flicense-me): Add option.
	(ffeature-proxy): Likewise.
	* gcc.c (csl/license.h): Include, if required.
	(license_checked): New variable.
	Define license_me_flag 1 if not TARGET_FLEXLM.
	(driver_handle_option): Handle -flicense-me, -ffeature-proxy and
	-fno-feature-proxy.
	(do_self_specs): Don't call get_feature for -E or -M.
	(main): Check licenses.
	* configure.ac (CSL_AC_LICENSE_VERSION): Use it.
	(CSL_AC_LICENSE): Likewise.
	(CSL_AC_LICENSE_FEATURE): Likewise.
	* config.in: Regenerated.
	* configure: Regenerated.

2011-07-28  Julian Brown  <julian@codesourcery.com>

	* release-notes-csl.xml: New.

Local Variables:
mode: change-log
change-log-default-name: "ChangeLog.csl"
End:
